!function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var u=r[a]={exports:{}};t[a][0].call(u.exports,function(e){var r=t[a][1][e];return i(r?r:e)},u,u.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){var n={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0};t.exports=function(e,t){return"number"!=typeof t||n[e]?t:t+"px"}},{}],2:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":9}],3:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":10}],4:[function(e,t,r){"use strict";r["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r.__esModule=!0},{}],5:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("babel-runtime/core-js/object/define-property"),o=n(i);r["default"]=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,o["default"])(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r.__esModule=!0},{"babel-runtime/core-js/object/define-property":2}],6:[function(e,t,r){"use strict";function n(){this._loader=new s,this._deferred=u.defer(),this.imagesContent=[],this.soundsContent=[],this.videosContent=[]}function i(e){return e.error||e.timeout?void o.call(this,e):void this.emit("progress",e)}function o(e){this._deferred.reject(),this.emit("error",e)}function a(e){var t=[];for(var r in this.imagesContent)t[r]=this.imagesContent[r];for(var n in this.soundsContent)t[n]=this.soundsContent[n];for(var i in this.videosContent)t[i]=this.videosContent[i];this._deferred.resolve(t),this.emit("complete",t)}var s=e("pxloader-browserify"),c=e("inherits"),h=e("emitter-component"),u=e("q"),l=/([a-z\-_0-9\/\:\.]*\.(jpg|jpeg|png|gif|svg))/gi,p=/([a-z\-_0-9\/\:\.]*\.(mp4|mov|webm|ogv))/gi,f=/([a-z\-_0-9\/\:\.]*\.(mp3|wav))/gi;c(n,h),n.prototype.load=function(e){this._loader.addCompletionListener(a.bind(this)),this._loader.addProgressListener(i.bind(this));for(var t=0,r=e.length;r>t;t++)e[t].src.match(l)&&this.addImage(e[t]),e[t].src.match(f)&&this.addSound(e[t]),e[t].src.match(p)&&this.addVideo(e[t]);return this._loader.start(),this},n.prototype.getPromise=function(){return this._deferred.promise},n.prototype.addImage=function(e){this.imagesContent[e.id]=this._loader.addImage(e.src,e.id,e.priority,e.origin)},n.prototype.getImage=function(e){return this.imagesContent[e]},n.prototype.addSound=function(e){this.soundsContent[e.id]=this._loader.addSound(e.id,e.src,null,e.priority)},n.prototype.getSound=function(e){return this.soundsContent[e]},n.prototype.addVideo=function(e){this.videosContent[e.id]=this._loader.addVideo(e.src,e.id,e.priority,e.origin)},n.prototype.getVideo=function(e){return this.videosContent[e]},t.exports=new n},{"emitter-component":25,inherits:27,"pxloader-browserify":30,q:31}],7:[function(e,t,r){"use strict";var n=e("component-emitter"),i=e("debounce"),o=t.exports;n(o),o.debounceDelay=50,o.onGlobalResize=function(){this.width=window.innerWidth,this.height=window.innerHeight,this.halfWidth=.5*this.width,this.halfHeight=.5*this.height,this.applyResize(),this.debounceDelay>0?this.debounceResize():this.applyResizeDebounce()},o.applyResizeDebounce=function(){this.emit("resizeDebounce")},o.applyResize=function(){this.emit("resize")},o.addListener=function(e,t){this.on(t?"resize":"resizeDebounce",e)},o.removeListener=function(e){e&&(this.off("resize",e),this.off("resizeDebounce",e))},o.debounceResize=i(o.applyResizeDebounce.bind(o),o.debounceDelay),o.onGlobalResize(),window.addEventListener("resize",o.onGlobalResize.bind(o))},{"component-emitter":8,debounce:22}],8:[function(e,t,r){function n(e){return e?i(e):void 0}function i(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===t||n.fn===t){r.splice(i,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks["$"+e];if(r){r=r.slice(0);for(var n=0,i=r.length;i>n;++n)r[n].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],9:[function(e,t,r){var n=e("../../modules/$");t.exports=function(e,t,r){return n.setDesc(e,t,r)}},{"../../modules/$":18}],10:[function(e,t,r){e("../../modules/es6.object.keys"),t.exports=e("../../modules/$.core").Object.keys},{"../../modules/$.core":12,"../../modules/es6.object.keys":21}],11:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],12:[function(e,t,r){var n=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},{}],13:[function(e,t,r){var n=e("./$.a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},{"./$.a-function":11}],14:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],15:[function(e,t,r){var n=e("./$.global"),i=e("./$.core"),o=e("./$.ctx"),a="prototype",s=function(e,t,r){var c,h,u,l=e&s.F,p=e&s.G,f=e&s.S,d=e&s.P,m=e&s.B,v=e&s.W,g=p?i:i[t]||(i[t]={}),y=p?n:f?n[t]:(n[t]||{})[a];p&&(r=t);for(c in r)h=!l&&y&&c in y,h&&c in g||(u=h?y[c]:r[c],g[c]=p&&"function"!=typeof y[c]?r[c]:m&&h?o(u,n):v&&y[c]==u?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t[a]=e[a],t}(u):d&&"function"==typeof u?o(Function.call,u):u,d&&((g[a]||(g[a]={}))[c]=u))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,t.exports=s},{"./$.core":12,"./$.ctx":13,"./$.global":17}],16:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(t){return!0}}},{}],17:[function(e,t,r){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],18:[function(e,t,r){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},{}],19:[function(e,t,r){var n=e("./$.export"),i=e("./$.core"),o=e("./$.fails");t.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*o(function(){r(1)}),"Object",a)}},{"./$.core":12,"./$.export":15,"./$.fails":16}],20:[function(e,t,r){var n=e("./$.defined");t.exports=function(e){return Object(n(e))}},{"./$.defined":14}],21:[function(e,t,r){var n=e("./$.to-object");e("./$.object-sap")("keys",function(e){return function(t){return e(n(t))}})},{"./$.object-sap":19,"./$.to-object":20}],22:[function(e,t,r){var n=e("date-now");t.exports=function(e,t,r){function i(){var u=n()-c;t>u&&u>0?o=setTimeout(i,t-u):(o=null,r||(h=e.apply(s,a),o||(s=a=null)))}var o,a,s,c,h;return null==t&&(t=100),function(){s=this,a=arguments,c=n();var u=r&&!o;return o||(o=setTimeout(i,t)),u&&(h=e.apply(s,a),s=a=null),h}}},{"date-now":23}],23:[function(e,t,r){function n(){return(new Date).getTime()}t.exports=Date.now||n},{}],24:[function(e,t,r){function n(e,t,r){var n=h[t];if("undefined"==typeof n&&(n=o(t)),n){if(void 0===r)return e.style[n];e.style[n]=u(n,r)}}function i(e,t){for(var r in t)t.hasOwnProperty(r)&&n(e,r,t[r])}function o(e){var t=c(e),r=s(t);return h[t]=h[e]=h[r]=r,r}function a(){2===arguments.length?i(arguments[0],arguments[1]):n(arguments[0],arguments[1],arguments[2])}var s=e("prefix-style"),c=e("to-camel-case"),h={"float":"cssFloat"},u=e("add-px-to-style");t.exports=a,t.exports.set=a,t.exports.get=function(e,t){return Array.isArray(t)?t.reduce(function(t,r){return t[r]=n(e,r||""),t},{}):n(e,t||"")}},{"add-px-to-style":1,"prefix-style":28,"to-camel-case":33}],25:[function(e,t,r){function n(e){return e?i(e):void 0}function i(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===t||n.fn===t){r.splice(i,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var n=0,i=r.length;i>n;++n)r[n].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],26:[function(e,t,r){(function(r,n){(function(){"use strict";function i(e){return"function"==typeof e||"object"==typeof e&&null!==e}function o(e){return"function"==typeof e}function a(e){return"object"==typeof e&&null!==e}function s(e){W=e}function c(e){Y=e}function h(){return function(){r.nextTick(d)}}function u(){return function(){H(d)}}function l(){var e=0,t=new Z(d),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function p(){var e=new MessageChannel;return e.port1.onmessage=d,function(){e.port2.postMessage(0)}}function f(){return function(){setTimeout(d,1)}}function d(){for(var e=0;q>e;e+=2){var t=te[e],r=te[e+1];t(r),te[e]=void 0,te[e+1]=void 0}q=0}function m(){try{var t=e,r=t("vertx");return H=r.runOnLoop||r.runOnContext,u()}catch(n){return f()}}function v(){}function g(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function b(e){try{return e.then}catch(t){return oe.error=t,oe}}function x(e,t,r,n){try{e.call(t,r,n)}catch(i){return i}}function w(e,t,r){Y(function(e){var n=!1,i=x(r,t,function(r){n||(n=!0,t!==r?M(e,r):E(e,r))},function(t){n||(n=!0,C(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&i&&(n=!0,C(e,i))},e)}function _(e,t){t._state===ne?E(e,t._result):t._state===ie?C(e,t._result):A(t,void 0,function(t){M(e,t)},function(t){C(e,t)})}function S(e,t){if(t.constructor===e.constructor)_(e,t);else{var r=b(t);r===oe?C(e,oe.error):void 0===r?E(e,t):o(r)?w(e,t,r):E(e,t)}}function M(e,t){e===t?C(e,g()):i(t)?S(e,t):E(e,t)}function T(e){e._onerror&&e._onerror(e._result),k(e)}function E(e,t){e._state===re&&(e._result=t,e._state=ne,0!==e._subscribers.length&&Y(k,e))}function C(e,t){e._state===re&&(e._state=ie,e._result=t,Y(T,e))}function A(e,t,r,n){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+ne]=r,i[o+ie]=n,0===o&&e._state&&Y(k,e)}function k(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n,i,o=e._result,a=0;a<t.length;a+=3)n=t[a],i=t[a+r],n?R(r,n,i,o):i(o);e._subscribers.length=0}}function L(){this.error=null}function P(e,t){try{return e(t)}catch(r){return ae.error=r,ae}}function R(e,t,r,n){var i,a,s,c,h=o(r);if(h){if(i=P(r,n),i===ae?(c=!0,a=i.error,i=null):s=!0,t===i)return void C(t,y())}else i=n,s=!0;t._state!==re||(h&&s?M(t,i):c?C(t,a):e===ne?E(t,i):e===ie&&C(t,i))}function D(e,t){try{t(function(t){M(e,t)},function(t){C(e,t)})}catch(r){C(e,r)}}function O(e,t){var r=this;r._instanceConstructor=e,r.promise=new e(v),r._validateInput(t)?(r._input=t,r.length=t.length,r._remaining=t.length,r._init(),0===r.length?E(r.promise,r._result):(r.length=r.length||0,r._enumerate(),0===r._remaining&&E(r.promise,r._result))):C(r.promise,r._validationError())}function V(e){return new se(this,e).promise}function F(e){function t(e){M(i,e)}function r(e){C(i,e)}var n=this,i=new n(v);if(!$(e))return C(i,new TypeError("You must pass an array to race.")),i;for(var o=e.length,a=0;i._state===re&&o>a;a++)A(n.resolve(e[a]),void 0,t,r);return i}function U(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(v);return M(r,e),r}function N(e){var t=this,r=new t(v);return C(r,e),r}function j(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function B(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(e){this._id=pe++,this._state=void 0,this._result=void 0,this._subscribers=[],v!==e&&(o(e)||j(),this instanceof z||B(),D(this,e))}function I(){var e;if("undefined"!=typeof n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var r=e.Promise;(!r||"[object Promise]"!==Object.prototype.toString.call(r.resolve())||r.cast)&&(e.Promise=fe)}var G;G=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var H,W,X,$=G,q=0,Y=({}.toString,function(e,t){te[q]=e,te[q+1]=t,q+=2,2===q&&(W?W(d):X())}),K="undefined"!=typeof window?window:void 0,Q=K||{},Z=Q.MutationObserver||Q.WebKitMutationObserver,J="undefined"!=typeof r&&"[object process]"==={}.toString.call(r),ee="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,te=new Array(1e3);X=J?h():Z?l():ee?p():void 0===K&&"function"==typeof e?m():f();var re=void 0,ne=1,ie=2,oe=new L,ae=new L;O.prototype._validateInput=function(e){return $(e)},O.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},O.prototype._init=function(){this._result=new Array(this.length)};var se=O;O.prototype._enumerate=function(){for(var e=this,t=e.length,r=e.promise,n=e._input,i=0;r._state===re&&t>i;i++)e._eachEntry(n[i],i)},O.prototype._eachEntry=function(e,t){var r=this,n=r._instanceConstructor;a(e)?e.constructor===n&&e._state!==re?(e._onerror=null,r._settledAt(e._state,t,e._result)):r._willSettleAt(n.resolve(e),t):(r._remaining--,r._result[t]=e)},O.prototype._settledAt=function(e,t,r){var n=this,i=n.promise;i._state===re&&(n._remaining--,e===ie?C(i,r):n._result[t]=r),0===n._remaining&&E(i,n._result)},O.prototype._willSettleAt=function(e,t){var r=this;A(e,void 0,function(e){r._settledAt(ne,t,e)},function(e){r._settledAt(ie,t,e)})};var ce=V,he=F,ue=U,le=N,pe=0,fe=z;z.all=ce,z.race=he,z.resolve=ue,z.reject=le,z._setScheduler=s,z._setAsap=c,z._asap=Y,z.prototype={constructor:z,then:function(e,t){var r=this,n=r._state;if(n===ne&&!e||n===ie&&!t)return this;var i=new this.constructor(v),o=r._result;if(n){var a=arguments[n-1];Y(function(){R(n,i,a,o)})}else A(r,i,e,t);return i},"catch":function(e){return this.then(null,e)}};var de=I,me={Promise:fe,polyfill:de};"function"==typeof define&&define.amd?define(function(){return me}):"undefined"!=typeof t&&t.exports?t.exports=me:"undefined"!=typeof this&&(this.ES6Promise=me),de()}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:29}],27:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],28:[function(e,t,r){var n=null,i=["Webkit","Moz","O","ms"];t.exports=function(e){n||(n=document.createElement("div"));var t=n.style;if(e in t)return e;for(var r=e.charAt(0).toUpperCase()+e.slice(1),o=i.length;o>=0;o--){var a=i[o]+r;if(a in t)return a}return!1}},{}],29:[function(e,t,r){function n(){u=!1,s.length?h=s.concat(h):l=-1,h.length&&i()}function i(){if(!u){var e=setTimeout(n);u=!0;for(var t=h.length;t;){for(s=h,h=[];++l<t;)s&&s[l].run();l=-1,t=h.length}s=null,u=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function a(){}var s,c=t.exports={},h=[],u=!1,l=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new o(e,t)),1!==h.length||u||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=a,c.addListener=a,c.once=a,c.off=a,c.removeListener=a,c.removeAllListeners=a,c.emit=a,c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],30:[function(e,t,r){function n(e){if(this.all=[],this.first=null,this.length=0,this.lookup={},e){if(Array.isArray(e))this.all=e.slice(0);else if("object"==typeof e)for(var t in e)e.hasOwnProperty(t)&&this.all.push(t);else this.all.push(e);this.length=this.all.length,this.length>0&&(this.first=this.all[0]);for(var r=0;r<this.length;r++)this.lookup[this.all[r]]=!0}}function i(e){e=e||{},this.settings=e,null==e.statusInterval&&(e.statusInterval=5e3),null==e.loggingDelay&&(e.loggingDelay=2e4),null==e.noProgressTimeout&&(e.noProgressTimeout=1/0);var t,r=[],i=[],o=Date.now(),a={QUEUED:0,WAITING:1,LOADED:2,ERROR:3,TIMEOUT:4},s=function(e){return null==e?[]:Array.isArray(e)?e:[e]};this.add=function(e){e.tags=new n(e.tags),null==e.priority&&(e.priority=1/0),r.push({resource:e,status:a.QUEUED})},this.addProgressListener=function(e,t){i.push({callback:e,tags:new n(t)})},this.addCompletionListener=function(e,t){i.push({tags:new n(t),callback:function(t){t.completedCount===t.totalCount&&e(t)}})};var c=function(e){e=s(e);var t=function(t){for(var r=t.resource,n=1/0,i=0;i<r.tags.length;i++)for(var o=0;o<Math.min(e.length,n)&&!(r.tags.all[i]===e[o]&&n>o&&(n=o,0===n))&&0!==n;o++);return n};return function(e,r){var n=t(e),i=t(r);return i>n?-1:n>i?1:e.priority<r.priority?-1:e.priority>r.priority?1:0}};this.start=function(e){t=Date.now();var n=c(e);r.sort(n);for(var i=0,o=r.length;o>i;i++){var s=r[i];s.status=a.WAITING,s.resource.start(this)}setTimeout(h,100)};var h=function(){for(var t=!1,n=Date.now()-o,i=n>=e.noProgressTimeout,s=n>=e.loggingDelay,c=0,u=r.length;u>c;c++){var l=r[c];l.status===a.WAITING&&(l.resource.checkStatus&&l.resource.checkStatus(),l.status===a.WAITING&&(i?l.resource.onTimeout():t=!0))}s&&t&&p(),t&&setTimeout(h,e.statusInterval)};this.isBusy=function(){for(var e=0,t=r.length;t>e;e++)if(r[e].status===a.QUEUED||r[e].status===a.WAITING)return!0;return!1};var u=function(e,t){var n,s,c,h,u,p=null;for(n=0,s=r.length;s>n;n++)if(r[n].resource===e){p=r[n];break}if(null!=p&&p.status===a.WAITING)for(p.status=t,o=Date.now(),c=e.tags.length,n=0,s=i.length;s>n;n++)h=i[n],u=0===h.tags.length?!0:e.tags.intersects(h.tags),u&&l(p,h)};this.onLoad=function(e){u(e,a.LOADED)},this.onError=function(e){u(e,a.ERROR)},this.onTimeout=function(e){u(e,a.TIMEOUT)};var l=function(e,t){var n,i,o,s,c=0,h=0;for(n=0,i=r.length;i>n;n++)o=r[n],s=!1,s=0===t.tags.length?!0:o.resource.tags.intersects(t.tags),s&&(h++,(o.status===a.LOADED||o.status===a.ERROR||o.status===a.TIMEOUT)&&c++);t.callback({resource:e.resource,loaded:e.status===a.LOADED,error:e.status===a.ERROR,timeout:e.status===a.TIMEOUT,completedCount:c,totalCount:h})},p=this.log=function(e){if(window.console){var n=Math.round((Date.now()-t)/1e3);window.console.log("PxLoader elapsed: "+n+" sec");for(var i=0,o=r.length;o>i;i++){var s=r[i];if(e||s.status===a.WAITING){var c="PxLoader: #"+i+" "+s.resource.getName();switch(s.status){case a.QUEUED:c+=" (Not Started)";break;case a.WAITING:c+=" (Waiting)";break;case a.LOADED:c+=" (Loaded)";break;case a.ERROR:c+=" (Error)";break;case a.TIMEOUT:c+=" (Timeout)"}s.resource.tags.length>0&&(c+=" Tags: ["+s.resource.tags.all.join(",")+"]"),window.console.log(c)}}}}}function o(e,t,r,n){var i=this,o=null;this.img=new Image,void 0!==n&&(this.img.crossOrigin=n),this.tags=t,this.priority=r;var a=function(){"complete"===i.img.readyState&&(h(),o.onLoad(i))},s=function(){h(),o.onLoad(i)},c=function(){h(),o.onError(i)},h=function(){i.unbind("load",s),i.unbind("readystatechange",a),i.unbind("error",c)};this.start=function(t){o=t,i.bind("load",s),i.bind("readystatechange",a),i.bind("error",c),i.img.src=e},this.checkStatus=function(){i.img.complete&&(h(),o.onLoad(i))},this.onTimeout=function(){h(),i.img.complete?o.onLoad(i):o.onTimeout(i)},this.getName=function(){return e},this.bind=function(e,t){i.img.addEventListener?i.img.addEventListener(e,t,!1):i.img.attachEvent&&i.img.attachEvent("on"+e,t)},this.unbind=function(e,t){i.img.removeEventListener?i.img.removeEventListener(e,t,!1):i.img.detachEvent&&i.img.detachEvent("on"+e,t)}}function a(e,t,r,n){var i=this,o=null,a=navigator.userAgent.match(/(ipad|iphone|ipod)/i),s=navigator.userAgent.match(/android/i);this.useGlobalHTML5Audio=a||s,this.tags=r,this.priority=n,this.sound=soundManager.createSound({id:e,url:t,autoLoad:!1,onload:function(){o.onLoad(i)},onsuspend:function(){o.onTimeout(i)},whileloading:function(){var e=this.bytesLoaded,t=this.bytesTotal;e>0&&e===t&&o.onLoad(i)}}),this.start=function(e){o=e,this.useGlobalHTML5Audio?o.onTimeout(i):this.sound.load()},this.checkStatus=function(){switch(i.sound.readyState){case 0:break;case 1:break;case 2:o.onError(i);break;case 3:o.onLoad(i)}},this.onTimeout=function(){o.onTimeout(i)},this.getName=function(){return t}}function s(e,t,r,n){var i=this,o=null;this.readyEventName="canplaythrough";try{this.vid=new Video}catch(a){this.vid=document.createElement("video")}void 0!==n&&(this.vid.crossOrigin=n),this.tags=t,this.priority=r;var s=function(){4===i.vid.readyState&&(u(),o.onLoad(i))},c=function(){u(),o.onLoad(i)},h=function(){u(),o.onError(i)},u=function(){i.unbind("load",c),i.unbind(i.readyEventName,s),i.unbind("error",h)};this.start=function(t){o=t,i.bind("load",c),i.bind(i.readyEventName,s),i.bind("error",h),i.bind("suspend",c),i.vid.src=e,i.vid.load()},this.checkStatus=function(){4===i.vid.readyState&&(u(),o.onLoad(i))},this.onTimeout=function(){u(),4!==i.vid.readyState?o.onLoad(i):o.onTimeout(i)},this.getName=function(){return e},this.bind=function(e,t){i.vid.addEventListener?i.vid.addEventListener(e,t,!1):i.vid.attachEvent&&i.vid.attachEvent("on"+e,t)},this.unbind=function(e,t){i.vid.removeEventListener?i.vid.removeEventListener(e,t,!1):i.vid.detachEvent&&i.vid.detachEvent("on"+e,t)}}n.prototype.intersects=function(e){if(0===this.length||0===e.length)return!1;if(1===this.length&&1===e.length)return this.first===e.first;if(e.length<this.length)return e.intersects(this);for(var t in this.lookup)if(e.lookup[t])return!0;return!1},"function"==typeof define&&define.amd&&define("PxLoader",[],function(){return i}),"object"==typeof t&&(t.exports=i),Date.now||(Date.now=function(){return(new Date).getTime()}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),i.prototype.addImage=function(e,t,r,n){var i=new o(e,t,r,n);return this.add(i),i.img},"function"==typeof define&&define.amd&&define("PxLoaderImage",[],function(){return o}),i.prototype.addSound=function(e,t,r,n){var i=new a(e,t,r,n);return this.add(i),i.sound},"function"==typeof define&&define.amd&&define("PxLoaderSound",[],function(){return a}),i.prototype.addVideo=function(e,t,r,n){var i=new s(e,t,r,n);return this.add(i),i.vid},"function"==typeof define&&define.amd&&define("PxLoaderVideo",[],function(){return s})},{}],31:[function(e,t,r){(function(e){!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof r&&"object"==typeof t)t.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var n="undefined"!=typeof window?window:self,i=n.Q;n.Q=e(),n.Q.noConflict=function(){return n.Q=i,this}}}(function(){"use strict";function t(e){return function(){return Y.apply(e,arguments)}}function r(e){return e===Object(e)}function n(e){return"[object StopIteration]"===ne(e)||e instanceof W}function i(e,t){if(I&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(ie)){for(var r=[],n=t;n;n=n.source)n.stack&&r.unshift(n.stack);r.unshift(e.stack);var i=r.join("\n"+ie+"\n");e.stack=o(i)}}function o(e){for(var t=e.split("\n"),r=[],n=0;n<t.length;++n){var i=t[n];c(i)||a(i)||!i||r.push(i)}return r.join("\n")}function a(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function s(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var r=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(r)return[r[1],Number(r[2])];var n=/.*@(.+):(\d+)$/.exec(e);return n?[n[1],Number(n[2])]:void 0}function c(e){var t=s(e);if(!t)return!1;var r=t[0],n=t[1];return r===H&&n>=X&&he>=n}function h(){if(I)try{throw new Error}catch(e){var t=e.stack.split("\n"),r=t[0].indexOf("@")>0?t[1]:t[2],n=s(r);if(!n)return;return H=n[0],n[1]}}function u(e,t,r){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+r+" instead.",new Error("").stack),e.apply(e,arguments)}}function l(e){return e instanceof m?e:b(e)?A(e):C(e)}function p(){function e(e){t=e,o.source=e,Q(r,function(t,r){l.nextTick(function(){e.promiseDispatch.apply(e,r)})},void 0),r=void 0,n=void 0}var t,r=[],n=[],i=ee(p.prototype),o=ee(m.prototype);if(o.promiseDispatch=function(e,i,o){var a=K(arguments);r?(r.push(a),"when"===i&&o[1]&&n.push(o[1])):l.nextTick(function(){t.promiseDispatch.apply(t,a)})},o.valueOf=function(){if(r)return o;var e=g(t);return y(e)&&(t=e),e},o.inspect=function(){return t?t.inspect():{state:"pending"}},l.longStackSupport&&I)try{throw new Error}catch(a){o.stack=a.stack.substring(a.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(r){t||e(l(r))},i.fulfill=function(r){t||e(C(r))},i.reject=function(r){t||e(E(r))},i.notify=function(e){t||Q(n,function(t,r){l.nextTick(function(){r(e)})},void 0)},i}function f(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=p();try{e(t.resolve,t.reject,t.notify)}catch(r){t.reject(r)}return t.promise}function d(e){return f(function(t,r){for(var n=0,i=e.length;i>n;n++)l(e[n]).then(t,r)})}function m(e,t,r){void 0===t&&(t=function(e){return E(new Error("Promise does not support operation: "+e))}),void 0===r&&(r=function(){return{state:"unknown"}});var n=ee(m.prototype);if(n.promiseDispatch=function(r,i,o){var a;try{a=e[i]?e[i].apply(n,o):t.call(n,i,o)}catch(s){a=E(s)}r&&r(a)},n.inspect=r,r){var i=r();"rejected"===i.state&&(n.exception=i.reason),n.valueOf=function(){var e=r();return"pending"===e.state||"rejected"===e.state?n:e.value}}return n}function v(e,t,r,n){return l(e).then(t,r,n)}function g(e){if(y(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function y(e){return e instanceof m}function b(e){return r(e)&&"function"==typeof e.then}function x(e){return y(e)&&"pending"===e.inspect().state}function w(e){return!y(e)||"fulfilled"===e.inspect().state}function _(e){return y(e)&&"rejected"===e.inspect().state}function S(){oe.length=0,ae.length=0,ce||(ce=!0)}function M(t,r){ce&&("object"==typeof e&&"function"==typeof e.emit&&l.nextTick.runAfter(function(){-1!==Z(ae,t)&&(e.emit("unhandledRejection",r,t),se.push(t))}),ae.push(t),r&&"undefined"!=typeof r.stack?oe.push(r.stack):oe.push("(no stack) "+r))}function T(t){if(ce){var r=Z(ae,t);-1!==r&&("object"==typeof e&&"function"==typeof e.emit&&l.nextTick.runAfter(function(){var n=Z(se,t);-1!==n&&(e.emit("rejectionHandled",oe[r],t),se.splice(n,1))}),ae.splice(r,1),oe.splice(r,1))}}function E(e){var t=m({when:function(t){return t&&T(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return M(t,e),t}function C(e){return m({when:function(){return e},get:function(t){return e[t]},set:function(t,r){e[t]=r},"delete":function(t){delete e[t]},post:function(t,r){return null===t||void 0===t?e.apply(void 0,r):e[t].apply(e,r)},apply:function(t,r){return e.apply(t,r)},keys:function(){return re(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function A(e){var t=p();return l.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(r){t.reject(r)}}),t.promise}function k(e){return m({isDef:function(){}},function(t,r){return V(e,t,r)},function(){return l(e).inspect()})}function L(e,t,r){return l(e).spread(t,r)}function P(e){return function(){function t(e,t){var a;if("undefined"==typeof StopIteration){try{a=r[e](t)}catch(s){return E(s)}return a.done?l(a.value):v(a.value,i,o)}try{a=r[e](t)}catch(s){return n(s)?l(s.value):E(s)}return v(a,i,o)}var r=e.apply(this,arguments),i=t.bind(t,"next"),o=t.bind(t,"throw");return i()}}function R(e){l.done(l.async(e)())}function D(e){throw new W(e)}function O(e){return function(){return L([this,F(arguments)],function(t,r){return e.apply(t,r)})}}function V(e,t,r){return l(e).dispatch(t,r)}function F(e){return v(e,function(e){var t=0,r=p();return Q(e,function(n,i,o){var a;y(i)&&"fulfilled"===(a=i.inspect()).state?e[o]=a.value:(++t,v(i,function(n){e[o]=n,0===--t&&r.resolve(e)},r.reject,function(e){r.notify({index:o,value:e})}))},void 0),0===t&&r.resolve(e),r.promise})}function U(e){if(0===e.length)return l.resolve();var t=l.defer(),r=0;return Q(e,function(n,i,o){function a(e){t.resolve(e)}function s(){r--,0===r&&t.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function c(e){t.notify({index:o,value:e})}var h=e[o];r++,v(h,a,s,c)},void 0),t.promise}function N(e){return v(e,function(e){return e=J(e,l),v(F(J(e,function(e){return v(e,$,$)})),function(){return e})})}function j(e){return l(e).allSettled()}function B(e,t){return l(e).then(void 0,void 0,t)}function z(e,t){return l(e).nodeify(t)}var I=!1;try{throw new Error}catch(G){I=!!G.stack}var H,W,X=h(),$=function(){},q=function(){function t(){for(var e,t;n.next;)n=n.next,e=n.task,n.task=void 0,t=n.domain,t&&(n.domain=void 0,t.enter()),r(e,t);for(;c.length;)e=c.pop(),r(e);o=!1}function r(e,r){try{e()}catch(n){if(s)throw r&&r.exit(),setTimeout(t,0),r&&r.enter(),n;setTimeout(function(){throw n},0)}r&&r.exit()}var n={task:void 0,next:null},i=n,o=!1,a=void 0,s=!1,c=[];if(q=function(t){i=i.next={task:t,domain:s&&e.domain,
next:null},o||(o=!0,a())},"object"==typeof e&&"[object process]"===e.toString()&&e.nextTick)s=!0,a=function(){e.nextTick(t)};else if("function"==typeof setImmediate)a="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var h=new MessageChannel;h.port1.onmessage=function(){a=u,h.port1.onmessage=t,t()};var u=function(){h.port2.postMessage(0)};a=function(){setTimeout(t,0),u()}}else a=function(){setTimeout(t,0)};return q.runAfter=function(e){c.push(e),o||(o=!0,a())},q}(),Y=Function.call,K=t(Array.prototype.slice),Q=t(Array.prototype.reduce||function(e,t){var r=0,n=this.length;if(1===arguments.length)for(;;){if(r in this){t=this[r++];break}if(++r>=n)throw new TypeError}for(;n>r;r++)r in this&&(t=e(t,this[r],r));return t}),Z=t(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),J=t(Array.prototype.map||function(e,t){var r=this,n=[];return Q(r,function(i,o,a){n.push(e.call(t,o,a,r))},void 0),n}),ee=Object.create||function(e){function t(){}return t.prototype=e,new t},te=t(Object.prototype.hasOwnProperty),re=Object.keys||function(e){var t=[];for(var r in e)te(e,r)&&t.push(r);return t},ne=t(Object.prototype.toString);W="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var ie="From previous event:";l.resolve=l,l.nextTick=q,l.longStackSupport=!1,"object"==typeof e&&e&&e.env&&e.env.Q_DEBUG&&(l.longStackSupport=!0),l.defer=p,p.prototype.makeNodeResolver=function(){var e=this;return function(t,r){t?e.reject(t):arguments.length>2?e.resolve(K(arguments,1)):e.resolve(r)}},l.Promise=f,l.promise=f,f.race=d,f.all=F,f.reject=E,f.resolve=l,l.passByCopy=function(e){return e},m.prototype.passByCopy=function(){return this},l.join=function(e,t){return l(e).join(t)},m.prototype.join=function(e){return l([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},l.race=d,m.prototype.race=function(){return this.then(l.race)},l.makePromise=m,m.prototype.toString=function(){return"[object Promise]"},m.prototype.then=function(e,t,r){function n(t){try{return"function"==typeof e?e(t):t}catch(r){return E(r)}}function o(e){if("function"==typeof t){i(e,s);try{return t(e)}catch(r){return E(r)}}return E(e)}function a(e){return"function"==typeof r?r(e):e}var s=this,c=p(),h=!1;return l.nextTick(function(){s.promiseDispatch(function(e){h||(h=!0,c.resolve(n(e)))},"when",[function(e){h||(h=!0,c.resolve(o(e)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(e){var t,r=!1;try{t=a(e)}catch(n){if(r=!0,!l.onerror)throw n;l.onerror(n)}r||c.notify(t)}]),c.promise},l.tap=function(e,t){return l(e).tap(t)},m.prototype.tap=function(e){return e=l(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},l.when=v,m.prototype.thenResolve=function(e){return this.then(function(){return e})},l.thenResolve=function(e,t){return l(e).thenResolve(t)},m.prototype.thenReject=function(e){return this.then(function(){throw e})},l.thenReject=function(e,t){return l(e).thenReject(t)},l.nearer=g,l.isPromise=y,l.isPromiseAlike=b,l.isPending=x,m.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=w,m.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=_,m.prototype.isRejected=function(){return"rejected"===this.inspect().state};var oe=[],ae=[],se=[],ce=!0;l.resetUnhandledRejections=S,l.getUnhandledReasons=function(){return oe.slice()},l.stopUnhandledRejectionTracking=function(){S(),ce=!1},S(),l.reject=E,l.fulfill=C,l.master=k,l.spread=L,m.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},l.async=P,l.spawn=R,l["return"]=D,l.promised=O,l.dispatch=V,m.prototype.dispatch=function(e,t){var r=this,n=p();return l.nextTick(function(){r.promiseDispatch(n.resolve,e,t)}),n.promise},l.get=function(e,t){return l(e).dispatch("get",[t])},m.prototype.get=function(e){return this.dispatch("get",[e])},l.set=function(e,t,r){return l(e).dispatch("set",[t,r])},m.prototype.set=function(e,t){return this.dispatch("set",[e,t])},l.del=l["delete"]=function(e,t){return l(e).dispatch("delete",[t])},m.prototype.del=m.prototype["delete"]=function(e){return this.dispatch("delete",[e])},l.mapply=l.post=function(e,t,r){return l(e).dispatch("post",[t,r])},m.prototype.mapply=m.prototype.post=function(e,t){return this.dispatch("post",[e,t])},l.send=l.mcall=l.invoke=function(e,t){return l(e).dispatch("post",[t,K(arguments,2)])},m.prototype.send=m.prototype.mcall=m.prototype.invoke=function(e){return this.dispatch("post",[e,K(arguments,1)])},l.fapply=function(e,t){return l(e).dispatch("apply",[void 0,t])},m.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},l["try"]=l.fcall=function(e){return l(e).dispatch("apply",[void 0,K(arguments,1)])},m.prototype.fcall=function(){return this.dispatch("apply",[void 0,K(arguments)])},l.fbind=function(e){var t=l(e),r=K(arguments,1);return function(){return t.dispatch("apply",[this,r.concat(K(arguments))])}},m.prototype.fbind=function(){var e=this,t=K(arguments);return function(){return e.dispatch("apply",[this,t.concat(K(arguments))])}},l.keys=function(e){return l(e).dispatch("keys",[])},m.prototype.keys=function(){return this.dispatch("keys",[])},l.all=F,m.prototype.all=function(){return F(this)},l.any=U,m.prototype.any=function(){return U(this)},l.allResolved=u(N,"allResolved","allSettled"),m.prototype.allResolved=function(){return N(this)},l.allSettled=j,m.prototype.allSettled=function(){return this.then(function(e){return F(J(e,function(e){function t(){return e.inspect()}return e=l(e),e.then(t,t)}))})},l.fail=l["catch"]=function(e,t){return l(e).then(void 0,t)},m.prototype.fail=m.prototype["catch"]=function(e){return this.then(void 0,e)},l.progress=B,m.prototype.progress=function(e){return this.then(void 0,void 0,e)},l.fin=l["finally"]=function(e,t){return l(e)["finally"](t)},m.prototype.fin=m.prototype["finally"]=function(e){return e=l(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},l.done=function(e,t,r,n){return l(e).done(t,r,n)},m.prototype.done=function(t,r,n){var o=function(e){l.nextTick(function(){if(i(e,a),!l.onerror)throw e;l.onerror(e)})},a=t||r||n?this.then(t,r,n):this;"object"==typeof e&&e&&e.domain&&(o=e.domain.bind(o)),a.then(void 0,o)},l.timeout=function(e,t,r){return l(e).timeout(t,r)},m.prototype.timeout=function(e,t){var r=p(),n=setTimeout(function(){t&&"string"!=typeof t||(t=new Error(t||"Timed out after "+e+" ms"),t.code="ETIMEDOUT"),r.reject(t)},e);return this.then(function(e){clearTimeout(n),r.resolve(e)},function(e){clearTimeout(n),r.reject(e)},r.notify),r.promise},l.delay=function(e,t){return void 0===t&&(t=e,e=void 0),l(e).delay(t)},m.prototype.delay=function(e){return this.then(function(t){var r=p();return setTimeout(function(){r.resolve(t)},e),r.promise})},l.nfapply=function(e,t){return l(e).nfapply(t)},m.prototype.nfapply=function(e){var t=p(),r=K(e);return r.push(t.makeNodeResolver()),this.fapply(r).fail(t.reject),t.promise},l.nfcall=function(e){var t=K(arguments,1);return l(e).nfapply(t)},m.prototype.nfcall=function(){var e=K(arguments),t=p();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},l.nfbind=l.denodeify=function(e){var t=K(arguments,1);return function(){var r=t.concat(K(arguments)),n=p();return r.push(n.makeNodeResolver()),l(e).fapply(r).fail(n.reject),n.promise}},m.prototype.nfbind=m.prototype.denodeify=function(){var e=K(arguments);return e.unshift(this),l.denodeify.apply(void 0,e)},l.nbind=function(e,t){var r=K(arguments,2);return function(){function n(){return e.apply(t,arguments)}var i=r.concat(K(arguments)),o=p();return i.push(o.makeNodeResolver()),l(n).fapply(i).fail(o.reject),o.promise}},m.prototype.nbind=function(){var e=K(arguments,0);return e.unshift(this),l.nbind.apply(void 0,e)},l.nmapply=l.npost=function(e,t,r){return l(e).npost(t,r)},m.prototype.nmapply=m.prototype.npost=function(e,t){var r=K(t||[]),n=p();return r.push(n.makeNodeResolver()),this.dispatch("post",[e,r]).fail(n.reject),n.promise},l.nsend=l.nmcall=l.ninvoke=function(e,t){var r=K(arguments,2),n=p();return r.push(n.makeNodeResolver()),l(e).dispatch("post",[t,r]).fail(n.reject),n.promise},m.prototype.nsend=m.prototype.nmcall=m.prototype.ninvoke=function(e){var t=K(arguments,1),r=p();return t.push(r.makeNodeResolver()),this.dispatch("post",[e,t]).fail(r.reject),r.promise},l.nodeify=z,m.prototype.nodeify=function(e){return e?void this.then(function(t){l.nextTick(function(){e(null,t)})},function(t){l.nextTick(function(){e(t)})}):this},l.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var he=h();return l})}).call(this,e("_process"))},{_process:29}],32:[function(e,t,r){var n=n||{},i={REVISION:"73"};"function"==typeof define&&define.amd?define("three",i):"undefined"!=typeof r&&"undefined"!=typeof t&&(t.exports=i),(void 0===n.requestAnimationFrame||void 0===n.cancelAnimationFrame)&&!function(){for(var e=0,t=["ms","moz","webkit","o"],r=0;r<t.length&&!n.requestAnimationFrame;++r)n.requestAnimationFrame=n[t[r]+"RequestAnimationFrame"],n.cancelAnimationFrame=n[t[r]+"CancelAnimationFrame"]||n[t[r]+"CancelRequestAnimationFrame"];void 0===n.requestAnimationFrame&&void 0!==n.setTimeout&&(n.requestAnimationFrame=function(t){var r=Date.now(),i=Math.max(0,16-(r-e)),o=n.setTimeout(function(){t(r+i)},i);return e=r+i,o}),void 0===n.cancelAnimationFrame&&void 0!==n.clearTimeout&&(n.cancelAnimationFrame=function(e){n.clearTimeout(e)})}(),void 0===n.performance&&(n.performance={}),void 0===n.performance.now&&!function(){var e=Date.now();n.performance.now=function(){return Date.now()-e}}(),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(e){return 0>e?-1:e>0?1:+e}),void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),i.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},i.CullFaceNone=0,i.CullFaceBack=1,i.CullFaceFront=2,i.CullFaceFrontBack=3,i.FrontFaceDirectionCW=0,i.FrontFaceDirectionCCW=1,i.BasicShadowMap=0,i.PCFShadowMap=1,i.PCFSoftShadowMap=2,i.FrontSide=0,i.BackSide=1,i.DoubleSide=2,i.FlatShading=1,i.SmoothShading=2,i.NoColors=0,i.FaceColors=1,i.VertexColors=2,i.NoBlending=0,i.NormalBlending=1,i.AdditiveBlending=2,i.SubtractiveBlending=3,i.MultiplyBlending=4,i.CustomBlending=5,i.AddEquation=100,i.SubtractEquation=101,i.ReverseSubtractEquation=102,i.MinEquation=103,i.MaxEquation=104,i.ZeroFactor=200,i.OneFactor=201,i.SrcColorFactor=202,i.OneMinusSrcColorFactor=203,i.SrcAlphaFactor=204,i.OneMinusSrcAlphaFactor=205,i.DstAlphaFactor=206,i.OneMinusDstAlphaFactor=207,i.DstColorFactor=208,i.OneMinusDstColorFactor=209,i.SrcAlphaSaturateFactor=210,i.NeverDepth=0,i.AlwaysDepth=1,i.LessDepth=2,i.LessEqualDepth=3,i.EqualDepth=4,i.GreaterEqualDepth=5,i.GreaterDepth=6,i.NotEqualDepth=7,i.MultiplyOperation=0,i.MixOperation=1,i.AddOperation=2,i.UVMapping=300,i.CubeReflectionMapping=301,i.CubeRefractionMapping=302,i.EquirectangularReflectionMapping=303,i.EquirectangularRefractionMapping=304,i.SphericalReflectionMapping=305,i.RepeatWrapping=1e3,i.ClampToEdgeWrapping=1001,i.MirroredRepeatWrapping=1002,i.NearestFilter=1003,i.NearestMipMapNearestFilter=1004,i.NearestMipMapLinearFilter=1005,i.LinearFilter=1006,i.LinearMipMapNearestFilter=1007,i.LinearMipMapLinearFilter=1008,i.UnsignedByteType=1009,i.ByteType=1010,i.ShortType=1011,i.UnsignedShortType=1012,i.IntType=1013,i.UnsignedIntType=1014,i.FloatType=1015,i.HalfFloatType=1025,i.UnsignedShort4444Type=1016,i.UnsignedShort5551Type=1017,i.UnsignedShort565Type=1018,i.AlphaFormat=1019,i.RGBFormat=1020,i.RGBAFormat=1021,i.LuminanceFormat=1022,i.LuminanceAlphaFormat=1023,i.RGBEFormat=i.RGBAFormat,i.RGB_S3TC_DXT1_Format=2001,i.RGBA_S3TC_DXT1_Format=2002,i.RGBA_S3TC_DXT3_Format=2003,i.RGBA_S3TC_DXT5_Format=2004,i.RGB_PVRTC_4BPPV1_Format=2100,i.RGB_PVRTC_2BPPV1_Format=2101,i.RGBA_PVRTC_4BPPV1_Format=2102,i.RGBA_PVRTC_2BPPV1_Format=2103,i.LoopOnce=2200,i.LoopRepeat=2201,i.LoopPingPong=2202,i.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(e,t){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},i.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElement("canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},i.Color=function(e){return 3===arguments.length?this.fromArray(arguments):this.set(e)},i.Color.prototype={constructor:i.Color,r:1,g:1,b:1,set:function(e){return e instanceof i.Color?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,r){return this.r=e,this.g=t,this.b=r,this},setHSL:function(){function e(e,t,r){return 0>r&&(r+=1),r>1&&(r-=1),1/6>r?e+6*(t-e)*r:.5>r?t:2/3>r?e+6*(t-e)*(2/3-r):e}return function(t,r,n){if(t=i.Math.euclideanModulo(t,1),r=i.Math.clamp(r,0,1),n=i.Math.clamp(n,0,1),0===r)this.r=this.g=this.b=n;else{var o=.5>=n?n*(1+r):n+r-n*r,a=2*n-o;this.r=e(a,o,t+1/3),this.g=e(a,o,t),this.b=e(a,o,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n,o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,t(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,t(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var s=parseFloat(n[1])/360,c=parseInt(n[2],10)/100,h=parseInt(n[3],10)/100;return t(n[5]),this.setHSL(s,c,h)}}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u=r[1],l=u.length;if(3===l)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}if(e&&e.length>0){var u=i.ColorKeywords[e];void 0!==u?this.setHex(u):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this},convertGammaToLinear:function(){var e=this.r,t=this.g,r=this.b;return this.r=e*e,this.g=t*t,this.b=r*r,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,r,n=e||{h:0,s:0,l:0},i=this.r,o=this.g,a=this.b,s=Math.max(i,o,a),c=Math.min(i,o,a),h=(c+s)/2;if(c===s)t=0,r=0;else{var u=s-c;switch(r=.5>=h?u/(s+c):u/(2-s-c),s){case i:t=(o-a)/u+(a>o?6:0);break;case o:t=(a-i)/u+2;break;case a:t=(i-o)/u+4}t/=6}return n.h=t,n.s=r,n.l=h,n},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,r){var n=this.getHSL();return n.h+=e,n.s+=t,n.l+=r,this.setHSL(n.h,n.s,n.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},i.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},i.Quaternion=function(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._w=void 0!==n?n:1},i.Quaternion.prototype={constructor:i.Quaternion,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(e instanceof i.Euler==!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var r=Math.cos(e._x/2),n=Math.cos(e._y/2),o=Math.cos(e._z/2),a=Math.sin(e._x/2),s=Math.sin(e._y/2),c=Math.sin(e._z/2),h=e.order;return"XYZ"===h?(this._x=a*n*o+r*s*c,this._y=r*s*o-a*n*c,this._z=r*n*c+a*s*o,this._w=r*n*o-a*s*c):"YXZ"===h?(this._x=a*n*o+r*s*c,this._y=r*s*o-a*n*c,this._z=r*n*c-a*s*o,this._w=r*n*o+a*s*c):"ZXY"===h?(this._x=a*n*o-r*s*c,this._y=r*s*o+a*n*c,this._z=r*n*c+a*s*o,this._w=r*n*o-a*s*c):"ZYX"===h?(this._x=a*n*o-r*s*c,this._y=r*s*o+a*n*c,this._z=r*n*c-a*s*o,this._w=r*n*o+a*s*c):"YZX"===h?(this._x=a*n*o+r*s*c,this._y=r*s*o+a*n*c,this._z=r*n*c-a*s*o,this._w=r*n*o-a*s*c):"XZY"===h&&(this._x=a*n*o-r*s*c,this._y=r*s*o-a*n*c,this._z=r*n*c+a*s*o,this._w=r*n*o+a*s*c),t!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var r=t/2,n=Math.sin(r);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(r),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,r=e.elements,n=r[0],i=r[4],o=r[8],a=r[1],s=r[5],c=r[9],h=r[2],u=r[6],l=r[10],p=n+s+l;return p>0?(t=.5/Math.sqrt(p+1),this._w=.25/t,this._x=(u-c)*t,this._y=(o-h)*t,this._z=(a-i)*t):n>s&&n>l?(t=2*Math.sqrt(1+n-s-l),this._w=(u-c)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+h)/t):s>l?(t=2*Math.sqrt(1+s-n-l),this._w=(o-h)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(c+u)/t):(t=2*Math.sqrt(1+l-n-s),this._w=(a-i)/t,this._x=(o+h)/t,this._y=(c+u)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t,r=1e-6;return function(n,o){return void 0===e&&(e=new i.Vector3),t=n.dot(o)+1,r>t?(t=0,Math.abs(n.x)>Math.abs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,o),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var r=e._x,n=e._y,i=e._z,o=e._w,a=t._x,s=t._y,c=t._z,h=t._w;return this._x=r*h+o*a+n*c-i*s,this._y=n*h+o*s+i*a-r*c,this._z=i*h+o*c+r*s-n*a,this._w=o*h-r*a-n*s-i*c,this.onChangeCallback(),this},multiplyVector3:function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,n=this._y,i=this._z,o=this._w,a=o*e._w+r*e._x+n*e._y+i*e._z;if(0>a?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=n,this._z=i,this;var s=Math.acos(a),c=Math.sqrt(1-a*a);if(Math.abs(c)<.001)return this._w=.5*(o+this._w),this._x=.5*(r+this._x),this._y=.5*(n+this._y),this._z=.5*(i+this._z),this;var h=Math.sin((1-t)*s)/c,u=Math.sin(t*s)/c;return this._w=o*h+this._w*u,this._x=r*h+this._x*u,this._y=n*h+this._y*u,this._z=i*h+this._z*u,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},i.Quaternion.slerp=function(e,t,r,n){return r.copy(e).slerp(t,n)},i.Vector2=function(e,t){this.x=e||0,this.y=t||0},i.Vector2.prototype={constructor:i.Vector2,get width(){return this.x},set width(e){this.x=e},get height(){return this.y},set height(e){this.y=e},set:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e):(this.x=0,this.y=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e,t;return function(r,n){return void 0===e&&(e=new i.Vector2,t=new i.Vector2),e.set(r,r),t.set(n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,r))/r),this},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e),this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromAttribute:function(e,t,r){return void 0===r&&(r=0),t=t*e.itemSize+r,this.x=e.array[t],this.y=e.array[t+1],this},rotateAround:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*r-o*n+e.x,this.y=i*n+o*r+e.y,this}},i.Vector3=function(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0},i.Vector3.prototype={constructor:i.Vector3,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e;return function(t){return t instanceof i.Euler==!1&&console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===e&&(e=new i.Quaternion),this.applyQuaternion(e.setFromEuler(t)),this}}(),applyAxisAngle:function(){var e;return function(t,r){return void 0===e&&(e=new i.Quaternion),this.applyQuaternion(e.setFromAxisAngle(t,r)),this}}(),applyMatrix3:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6]*n,this.y=i[1]*t+i[4]*r+i[7]*n,this.z=i[2]*t+i[5]*r+i[8]*n,this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[4]*r+i[8]*n+i[12],this.y=i[1]*t+i[5]*r+i[9]*n+i[13],this.z=i[2]*t+i[6]*r+i[10]*n+i[14],this},applyProjection:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements,o=1/(i[3]*t+i[7]*r+i[11]*n+i[15]);return this.x=(i[0]*t+i[4]*r+i[8]*n+i[12])*o,this.y=(i[1]*t+i[5]*r+i[9]*n+i[13])*o,this.z=(i[2]*t+i[6]*r+i[10]*n+i[14])*o,this},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z,i=e.x,o=e.y,a=e.z,s=e.w,c=s*t+o*n-a*r,h=s*r+a*t-i*n,u=s*n+i*r-o*t,l=-i*t-o*r-a*n;return this.x=c*s+l*-i+h*-a-u*-o,this.y=h*s+l*-o+u*-i-c*-a,this.z=u*s+l*-a+c*-o-h*-i,this},project:function(){var e;return function(t){return void 0===e&&(e=new i.Matrix4),e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),
this.applyProjection(e)}}(),unproject:function(){var e;return function(t){return void 0===e&&(e=new i.Matrix4),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyProjection(e)}}(),transformDirection:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[4]*r+i[8]*n,this.y=i[1]*t+i[5]*r+i[9]*n,this.z=i[2]*t+i[6]*r+i[10]*n,this.normalize(),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e,t;return function(r,n){return void 0===e&&(e=new i.Vector3,t=new i.Vector3),e.set(r,r,r),t.set(n,n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,r))/r),this},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e),this},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var r=this.x,n=this.y,i=this.z;return this.x=n*e.z-i*e.y,this.y=i*e.x-r*e.z,this.z=r*e.y-n*e.x,this},crossVectors:function(e,t){var r=e.x,n=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=n*s-i*a,this.y=i*o-r*s,this.z=r*a-n*o,this},projectOnVector:function(){var e,t;return function(r){return void 0===e&&(e=new i.Vector3),e.copy(r).normalize(),t=this.dot(e),this.copy(e).multiplyScalar(t)}}(),projectOnPlane:function(){var e;return function(t){return void 0===e&&(e=new i.Vector3),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e;return function(t){return void 0===e&&(e=new i.Vector3),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/(this.length()*e.length());return Math.acos(i.Math.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n},setEulerFromRotationMatrix:function(e,t){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(e,t){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},setFromMatrixPosition:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},setFromMatrixScale:function(e){var t=this.set(e.elements[0],e.elements[1],e.elements[2]).length(),r=this.set(e.elements[4],e.elements[5],e.elements[6]).length(),n=this.set(e.elements[8],e.elements[9],e.elements[10]).length();return this.x=t,this.y=r,this.z=n,this},setFromMatrixColumn:function(e,t){var r=4*e,n=t.elements;return this.x=n[r],this.y=n[r+1],this.z=n[r+2],this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromAttribute:function(e,t,r){return void 0===r&&(r=0),t=t*e.itemSize+r,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this}},i.Vector4=function(e,t,r,n){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==n?n:1},i.Vector4.prototype={constructor:i.Vector4,set:function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e,this.w*=e):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*n+o[12]*i,this.y=o[1]*t+o[5]*r+o[9]*n+o[13]*i,this.z=o[2]*t+o[6]*r+o[10]*n+o[14]*i,this.w=o[3]*t+o[7]*r+o[11]*n+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return 1e-4>t?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,r,n,i,o=.01,a=.1,s=e.elements,c=s[0],h=s[4],u=s[8],l=s[1],p=s[5],f=s[9],d=s[2],m=s[6],v=s[10];if(Math.abs(h-l)<o&&Math.abs(u-d)<o&&Math.abs(f-m)<o){if(Math.abs(h+l)<a&&Math.abs(u+d)<a&&Math.abs(f+m)<a&&Math.abs(c+p+v-3)<a)return this.set(1,0,0,0),this;t=Math.PI;var g=(c+1)/2,y=(p+1)/2,b=(v+1)/2,x=(h+l)/4,w=(u+d)/4,_=(f+m)/4;return g>y&&g>b?o>g?(r=0,n=.707106781,i=.707106781):(r=Math.sqrt(g),n=x/r,i=w/r):y>b?o>y?(r=.707106781,n=0,i=.707106781):(n=Math.sqrt(y),r=x/n,i=_/n):o>b?(r=.707106781,n=.707106781,i=0):(i=Math.sqrt(b),r=w/i,n=_/i),this.set(r,n,i,t),this}var S=Math.sqrt((m-f)*(m-f)+(u-d)*(u-d)+(l-h)*(l-h));return Math.abs(S)<.001&&(S=1),this.x=(m-f)/S,this.y=(u-d)/S,this.z=(l-h)/S,this.w=Math.acos((c+p+v-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(r,n){return void 0===e&&(e=new i.Vector4,t=new i.Vector4),e.set(r,r,r,r),t.set(n,n,n,n),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e),this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromAttribute:function(e,t,r){return void 0===r&&(r=0),t=t*e.itemSize+r,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this.w=e.array[t+3],this}},i.Euler=function(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._order=n||i.Euler.DefaultOrder},i.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],i.Euler.DefaultOrder="XYZ",i.Euler.prototype={constructor:i.Euler,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,r){var n=i.Math.clamp,o=e.elements,a=o[0],s=o[4],c=o[8],h=o[1],u=o[5],l=o[9],p=o[2],f=o[6],d=o[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(n(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(f,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n(l,-1,1)),Math.abs(l)<.99999?(this._y=Math.atan2(c,d),this._z=Math.atan2(h,u)):(this._y=Math.atan2(-p,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-p,d),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(h,a))):"ZYX"===t?(this._y=Math.asin(-n(p,-1,1)),Math.abs(p)<.99999?(this._x=Math.atan2(f,d),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-s,u))):"YZX"===t?(this._z=Math.asin(n(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-p,a)):(this._x=0,this._y=Math.atan2(c,d))):"XZY"===t?(this._z=Math.asin(-n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(f,u),this._y=Math.atan2(c,a)):(this._x=Math.atan2(-l,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,r!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var e;return function(t,r,n){return void 0===e&&(e=new i.Matrix4),e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,r,n),this}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new i.Quaternion;return function(t){e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new i.Vector3(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},i.Line3=function(e,t){this.start=void 0!==e?e:new i.Vector3,this.end=void 0!==t?t:new i.Vector3},i.Line3.prototype={constructor:i.Line3,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},center:function(e){var t=e||new i.Vector3;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new i.Vector3;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var r=t||new i.Vector3;return this.delta(r).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new i.Vector3,t=new i.Vector3;return function(r,n){e.subVectors(r,this.start),t.subVectors(this.end,this.start);var o=t.dot(t),a=t.dot(e),s=a/o;return n&&(s=i.Math.clamp(s,0,1)),s}}(),closestPointToPoint:function(e,t,r){var n=this.closestPointToPointParameter(e,t),o=r||new i.Vector3;return this.delta(o).multiplyScalar(n).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},i.Box2=function(e,t){this.min=void 0!==e?e:new i.Vector2(1/0,1/0),this.max=void 0!==t?t:new i.Vector2(-(1/0),-(1/0))},i.Box2.prototype={constructor:i.Box2,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;r>t;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new i.Vector2;return function(t,r){var n=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(e){var t=e||new i.Vector2;return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new i.Vector2;return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y?!0:!1},getParameter:function(e,t){var r=t||new i.Vector2;return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y?!1:!0},clampPoint:function(e,t){var r=t||new i.Vector2;return r.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new i.Vector2;return function(t){var r=e.copy(t).clamp(this.min,this.max);return r.sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},i.Box3=function(e,t){this.min=void 0!==e?e:new i.Vector3(1/0,1/0,1/0),this.max=void 0!==t?t:new i.Vector3(-(1/0),-(1/0),-(1/0))},i.Box3.prototype={constructor:i.Box3,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;r>t;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new i.Vector3;return function(t,r){var n=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),setFromObject:function(){var e=new i.Vector3;return function(t){var r=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){var n=t.geometry;if(void 0!==n)if(n instanceof i.Geometry)for(var o=n.vertices,a=0,s=o.length;s>a;a++)e.copy(o[a]),e.applyMatrix4(t.matrixWorld),r.expandByPoint(e);else if(n instanceof i.BufferGeometry&&void 0!==n.attributes.position)for(var c=n.attributes.position.array,a=0,s=c.length;s>a;a+=3)e.set(c[a],c[a+1],c[a+2]),e.applyMatrix4(t.matrixWorld),r.expandByPoint(e)}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(e){var t=e||new i.Vector3;return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new i.Vector3;return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z?!0:!1},getParameter:function(e,t){var r=t||new i.Vector3;return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z?!1:!0},clampPoint:function(e,t){var r=t||new i.Vector3;return r.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new i.Vector3;return function(t){var r=e.copy(t).clamp(this.min,this.max);return r.sub(t).length()}}(),getBoundingSphere:function(){var e=new i.Vector3;return function(t){var r=t||new i.Sphere;return r.center=this.center(),r.radius=.5*this.size(e).length(),r}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3,new i.Vector3];return function(t){return e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.makeEmpty(),this.setFromPoints(e),this}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},i.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},i.Matrix3.prototype={constructor:i.Matrix3,set:function(e,t,r,n,i,o,a,s,c){var h=this.elements;return h[0]=e,h[3]=t,h[6]=r,h[1]=n,h[4]=i,h[7]=o,h[2]=a,h[5]=s,h[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e;return function(t,r,n){void 0===e&&(e=new i.Vector3),void 0===r&&(r=0),void 0===n&&(n=t.length);for(var o=0,a=r;n>o;o+=3,a+=3)e.fromArray(t,a),e.applyMatrix3(this),e.toArray(t,a);return t}}(),applyToBuffer:function(){var e;return function(t,r,n){void 0===e&&(e=new i.Vector3),void 0===r&&(r=0),void 0===n&&(n=t.length/t.itemSize);for(var o=0,a=r;n>o;o++,a++)e.x=t.getX(a),e.y=t.getY(a),e.z=t.getZ(a),e.applyMatrix3(this),t.setXYZ(e.x,e.y,e.z);return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],c=e[7],h=e[8];return t*o*h-t*a*c-r*i*h+r*a*s+n*i*c-n*o*s},getInverse:function(e,t){var r=e.elements,n=this.elements;n[0]=r[10]*r[5]-r[6]*r[9],n[1]=-r[10]*r[1]+r[2]*r[9],n[2]=r[6]*r[1]-r[2]*r[5],n[3]=-r[10]*r[4]+r[6]*r[8],n[4]=r[10]*r[0]-r[2]*r[8],n[5]=-r[6]*r[0]+r[2]*r[4],n[6]=r[9]*r[4]-r[5]*r[8],n[7]=-r[9]*r[0]+r[1]*r[8],n[8]=r[5]*r[0]-r[1]*r[4];var i=r[0]*n[0]+r[1]*n[3]+r[2]*n[6];if(0===i){var o="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(o);return console.warn(o),this.identity(),this}return this.multiplyScalar(1/i),this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},flattenToArrayOffset:function(e,t){var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e},getNormalMatrix:function(e){return this.getInverse(e).transpose(),this},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]}},i.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},i.Matrix4.prototype={constructor:i.Matrix4,set:function(e,t,r,n,i,o,a,s,c,h,u,l,p,f,d,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=r,v[12]=n,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=c,v[6]=h,v[10]=u,v[14]=l,v[3]=p,v[7]=f,v[11]=d,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new i.Matrix4).fromArray(this.elements)},copy:function(e){return this.elements.set(e.elements),this},extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},copyPosition:function(e){var t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this},extractBasis:function(e,t,r){var n=this.elements;return e.set(n[0],n[1],n[2]),t.set(n[4],n[5],n[6]),r.set(n[8],n[9],n[10]),this},makeBasis:function(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this},extractRotation:function(){var e;return function(t){void 0===e&&(e=new i.Vector3);var r=this.elements,n=t.elements,o=1/e.set(n[0],n[1],n[2]).length(),a=1/e.set(n[4],n[5],n[6]).length(),s=1/e.set(n[8],n[9],n[10]).length();return r[0]=n[0]*o,r[1]=n[1]*o,r[2]=n[2]*o,r[4]=n[4]*a,r[5]=n[5]*a,r[6]=n[6]*a,r[8]=n[8]*s,r[9]=n[9]*s,r[10]=n[10]*s,this}}(),makeRotationFromEuler:function(e){e instanceof i.Euler==!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,r=e.x,n=e.y,o=e.z,a=Math.cos(r),s=Math.sin(r),c=Math.cos(n),h=Math.sin(n),u=Math.cos(o),l=Math.sin(o);if("XYZ"===e.order){var p=a*u,f=a*l,d=s*u,m=s*l;t[0]=c*u,t[4]=-c*l,t[8]=h,t[1]=f+d*h,t[5]=p-m*h,t[9]=-s*c,t[2]=m-p*h,t[6]=d+f*h,t[10]=a*c}else if("YXZ"===e.order){var v=c*u,g=c*l,y=h*u,b=h*l;t[0]=v+b*s,t[4]=y*s-g,t[8]=a*h,t[1]=a*l,t[5]=a*u,t[9]=-s,t[2]=g*s-y,t[6]=b+v*s,t[10]=a*c}else if("ZXY"===e.order){var v=c*u,g=c*l,y=h*u,b=h*l;t[0]=v-b*s,t[4]=-a*l,t[8]=y+g*s,t[1]=g+y*s,t[5]=a*u,t[9]=b-v*s,t[2]=-a*h,t[6]=s,t[10]=a*c}else if("ZYX"===e.order){var p=a*u,f=a*l,d=s*u,m=s*l;t[0]=c*u,t[4]=d*h-f,t[8]=p*h+m,t[1]=c*l,t[5]=m*h+p,t[9]=f*h-d,t[2]=-h,t[6]=s*c,t[10]=a*c}else if("YZX"===e.order){var x=a*c,w=a*h,_=s*c,S=s*h;t[0]=c*u,t[4]=S-x*l,t[8]=_*l+w,t[1]=l,t[5]=a*u,t[9]=-s*u,t[2]=-h*u,t[6]=w*l+_,t[10]=x-S*l}else if("XZY"===e.order){var x=a*c,w=a*h,_=s*c,S=s*h;t[0]=c*u,t[4]=-l,t[8]=h*u,t[1]=x*l+S,t[5]=a*u,t[9]=w*l-_,t[2]=_*l-w,t[6]=s*u,t[10]=S*l+x}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},makeRotationFromQuaternion:function(e){var t=this.elements,r=e.x,n=e.y,i=e.z,o=e.w,a=r+r,s=n+n,c=i+i,h=r*a,u=r*s,l=r*c,p=n*s,f=n*c,d=i*c,m=o*a,v=o*s,g=o*c;return t[0]=1-(p+d),t[4]=u-g,t[8]=l+v,t[1]=u+g,t[5]=1-(h+d),t[9]=f-m,t[2]=l-v,t[6]=f+m,t[10]=1-(h+p),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e,t,r;return function(n,o,a){void 0===e&&(e=new i.Vector3),void 0===t&&(t=new i.Vector3),void 0===r&&(r=new i.Vector3);var s=this.elements;return r.subVectors(n,o).normalize(),0===r.lengthSq()&&(r.z=1),e.crossVectors(a,r).normalize(),0===e.lengthSq()&&(r.x+=1e-4,e.crossVectors(a,r).normalize()),t.crossVectors(r,e),s[0]=e.x,s[4]=t.x,s[8]=r.x,s[1]=e.y,s[5]=t.y,s[9]=r.y,s[2]=e.z,s[6]=t.z,s[10]=r.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,i=this.elements,o=r[0],a=r[4],s=r[8],c=r[12],h=r[1],u=r[5],l=r[9],p=r[13],f=r[2],d=r[6],m=r[10],v=r[14],g=r[3],y=r[7],b=r[11],x=r[15],w=n[0],_=n[4],S=n[8],M=n[12],T=n[1],E=n[5],C=n[9],A=n[13],k=n[2],L=n[6],P=n[10],R=n[14],D=n[3],O=n[7],V=n[11],F=n[15];return i[0]=o*w+a*T+s*k+c*D,i[4]=o*_+a*E+s*L+c*O,i[8]=o*S+a*C+s*P+c*V,i[12]=o*M+a*A+s*R+c*F,i[1]=h*w+u*T+l*k+p*D,i[5]=h*_+u*E+l*L+p*O,i[9]=h*S+u*C+l*P+p*V,i[13]=h*M+u*A+l*R+p*F,i[2]=f*w+d*T+m*k+v*D,i[6]=f*_+d*E+m*L+v*O,i[10]=f*S+d*C+m*P+v*V,i[14]=f*M+d*A+m*R+v*F,i[3]=g*w+y*T+b*k+x*D,i[7]=g*_+y*E+b*L+x*O,i[11]=g*S+y*C+b*P+x*V,i[15]=g*M+y*A+b*R+x*F,this},multiplyToArray:function(e,t,r){var n=this.elements;return this.multiplyMatrices(e,t),r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),e.applyProjection(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e;return function(t,r,n){void 0===e&&(e=new i.Vector3),void 0===r&&(r=0),void 0===n&&(n=t.length);for(var o=0,a=r;n>o;o+=3,a+=3)e.fromArray(t,a),e.applyMatrix4(this),e.toArray(t,a);return t}}(),applyToBuffer:function(){var e;return function(t,r,n){void 0===e&&(e=new i.Vector3),void 0===r&&(r=0),void 0===n&&(n=t.length/t.itemSize);for(var o=0,a=r;n>o;o++,a++)e.x=t.getX(a),e.y=t.getY(a),e.z=t.getZ(a),e.applyMatrix4(this),t.setXYZ(e.x,e.y,e.z);return t}}(),rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},determinant:function(){var e=this.elements,t=e[0],r=e[4],n=e[8],i=e[12],o=e[1],a=e[5],s=e[9],c=e[13],h=e[2],u=e[6],l=e[10],p=e[14],f=e[3],d=e[7],m=e[11],v=e[15];return f*(+i*s*u-n*c*u-i*a*l+r*c*l+n*a*p-r*s*p)+d*(+t*s*p-t*c*l+i*o*l-n*o*p+n*c*h-i*s*h)+m*(+t*c*u-t*a*p-i*o*u+r*o*p+i*a*h-r*c*h)+v*(-n*a*h-t*s*u+t*a*l+n*o*u-r*o*l+r*s*h)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},flattenToArrayOffset:function(e,t){var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e},getPosition:function(){var e;return function(){void 0===e&&(e=new i.Vector3),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var t=this.elements;return e.set(t[12],t[13],t[14])}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var r=this.elements,n=e.elements,i=n[0],o=n[4],a=n[8],s=n[12],c=n[1],h=n[5],u=n[9],l=n[13],p=n[2],f=n[6],d=n[10],m=n[14],v=n[3],g=n[7],y=n[11],b=n[15];r[0]=u*m*g-l*d*g+l*f*y-h*m*y-u*f*b+h*d*b,r[4]=s*d*g-a*m*g-s*f*y+o*m*y+a*f*b-o*d*b,r[8]=a*l*g-s*u*g+s*h*y-o*l*y-a*h*b+o*u*b,r[12]=s*u*f-a*l*f-s*h*d+o*l*d+a*h*m-o*u*m,r[1]=l*d*v-u*m*v-l*p*y+c*m*y+u*p*b-c*d*b,r[5]=a*m*v-s*d*v+s*p*y-i*m*y-a*p*b+i*d*b,r[9]=s*u*v-a*l*v-s*c*y+i*l*y+a*c*b-i*u*b,r[13]=a*l*p-s*u*p+s*c*d-i*l*d-a*c*m+i*u*m,r[2]=h*m*v-l*f*v+l*p*g-c*m*g-h*p*b+c*f*b,
r[6]=s*f*v-o*m*v-s*p*g+i*m*g+o*p*b-i*f*b,r[10]=o*l*v-s*h*v+s*c*g-i*l*g-o*c*b+i*h*b,r[14]=s*h*p-o*l*p-s*c*f+i*l*f+o*c*m-i*h*m,r[3]=u*f*v-h*d*v-u*p*g+c*d*g+h*p*y-c*f*y,r[7]=o*d*v-a*f*v+a*p*g-i*d*g-o*p*y+i*f*y,r[11]=a*h*v-o*u*v-a*c*g+i*u*g+o*c*y-i*h*y,r[15]=o*u*p-a*h*p+a*c*f-i*u*f-o*c*d+i*h*d;var x=i*r[0]+c*r[4]+p*r[8]+v*r[12];if(0===x){var w="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(w);return console.warn(w),this.identity(),this}return this.multiplyScalar(1/x),this},translate:function(e){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(e){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(e){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(e){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(e,t){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(e){var t=this.elements,r=e.x,n=e.y,i=e.z;return t[0]*=r,t[4]*=n,t[8]*=i,t[1]*=r,t[5]*=n,t[9]*=i,t[2]*=r,t[6]*=n,t[10]*=i,t[3]*=r,t[7]*=n,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=1-r,o=e.x,a=e.y,s=e.z,c=i*o,h=i*a;return this.set(c*o+r,c*a-n*s,c*s+n*a,0,c*a+n*s,h*a+r,h*s-n*o,0,c*s-n*a,h*s+n*o,i*s*s+r,0,0,0,0,1),this},makeScale:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this},compose:function(e,t,r){return this.makeRotationFromQuaternion(t),this.scale(r),this.setPosition(e),this},decompose:function(){var e,t;return function(r,n,o){void 0===e&&(e=new i.Vector3),void 0===t&&(t=new i.Matrix4);var a=this.elements,s=e.set(a[0],a[1],a[2]).length(),c=e.set(a[4],a[5],a[6]).length(),h=e.set(a[8],a[9],a[10]).length(),u=this.determinant();0>u&&(s=-s),r.x=a[12],r.y=a[13],r.z=a[14],t.elements.set(this.elements);var l=1/s,p=1/c,f=1/h;return t.elements[0]*=l,t.elements[1]*=l,t.elements[2]*=l,t.elements[4]*=p,t.elements[5]*=p,t.elements[6]*=p,t.elements[8]*=f,t.elements[9]*=f,t.elements[10]*=f,n.setFromRotationMatrix(t),o.x=s,o.y=c,o.z=h,this}}(),makeFrustum:function(e,t,r,n,i,o){var a=this.elements,s=2*i/(t-e),c=2*i/(n-r),h=(t+e)/(t-e),u=(n+r)/(n-r),l=-(o+i)/(o-i),p=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=l,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(e,t,r,n){var o=r*Math.tan(i.Math.degToRad(.5*e)),a=-o,s=a*t,c=o*t;return this.makeFrustum(s,c,a,o,r,n)},makeOrthographic:function(e,t,r,n,i,o){var a=this.elements,s=t-e,c=r-n,h=o-i,u=(t+e)/s,l=(r+n)/c,p=(o+i)/h;return a[0]=2/s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2/c,a[9]=0,a[13]=-l,a[2]=0,a[6]=0,a[10]=-2/h,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,r=e.elements,n=0;16>n;n++)if(t[n]!==r[n])return!1;return!0},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}},i.Ray=function(e,t){this.origin=void 0!==e?e:new i.Vector3,this.direction=void 0!==t?t:new i.Vector3},i.Ray.prototype={constructor:i.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var r=t||new i.Vector3;return r.copy(this.direction).multiplyScalar(e).add(this.origin)},recast:function(){var e=new i.Vector3;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var r=t||new i.Vector3;r.subVectors(e,this.origin);var n=r.dot(this.direction);return 0>n?r.copy(this.origin):r.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new i.Vector3;return function(t){var r=e.subVectors(t,this.origin).dot(this.direction);return 0>r?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(r).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new i.Vector3,t=new i.Vector3,r=new i.Vector3;return function(n,i,o,a){e.copy(n).add(i).multiplyScalar(.5),t.copy(i).sub(n).normalize(),r.copy(this.origin).sub(e);var s,c,h,u,l=.5*n.distanceTo(i),p=-this.direction.dot(t),f=r.dot(this.direction),d=-r.dot(t),m=r.lengthSq(),v=Math.abs(1-p*p);if(v>0)if(s=p*d-f,c=p*f-d,u=l*v,s>=0)if(c>=-u)if(u>=c){var g=1/v;s*=g,c*=g,h=s*(s+p*c+2*f)+c*(p*s+c+2*d)+m}else c=l,s=Math.max(0,-(p*c+f)),h=-s*s+c*(c+2*d)+m;else c=-l,s=Math.max(0,-(p*c+f)),h=-s*s+c*(c+2*d)+m;else-u>=c?(s=Math.max(0,-(-p*l+f)),c=s>0?-l:Math.min(Math.max(-l,-d),l),h=-s*s+c*(c+2*d)+m):u>=c?(s=0,c=Math.min(Math.max(-l,-d),l),h=c*(c+2*d)+m):(s=Math.max(0,-(p*l+f)),c=s>0?l:Math.min(Math.max(-l,-d),l),h=-s*s+c*(c+2*d)+m);else c=p>0?-l:l,s=Math.max(0,-(p*c+f)),h=-s*s+c*(c+2*d)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(t).multiplyScalar(c).add(e),h}}(),isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},intersectSphere:function(){var e=new i.Vector3;return function(t,r){e.subVectors(t.center,this.origin);var n=e.dot(this.direction),i=e.dot(e)-n*n,o=t.radius*t.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=n-a,c=n+a;return 0>s&&0>c?null:0>s?this.at(c,r):this.at(s,r)}}(),isIntersectionPlane:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var r=e.normal.dot(this.direction);return 0>r*t?!0:!1},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null},intersectPlane:function(e,t){var r=this.distanceToPlane(e);return null===r?null:this.at(r,t)},isIntersectionBox:function(){var e=new i.Vector3;return function(t){return null!==this.intersectBox(t,e)}}(),intersectBox:function(e,t){var r,n,i,o,a,s,c=1/this.direction.x,h=1/this.direction.y,u=1/this.direction.z,l=this.origin;return c>=0?(r=(e.min.x-l.x)*c,n=(e.max.x-l.x)*c):(r=(e.max.x-l.x)*c,n=(e.min.x-l.x)*c),h>=0?(i=(e.min.y-l.y)*h,o=(e.max.y-l.y)*h):(i=(e.max.y-l.y)*h,o=(e.min.y-l.y)*h),r>o||i>n?null:((i>r||r!==r)&&(r=i),(n>o||n!==n)&&(n=o),u>=0?(a=(e.min.z-l.z)*u,s=(e.max.z-l.z)*u):(a=(e.max.z-l.z)*u,s=(e.min.z-l.z)*u),r>s||a>n?null:((a>r||r!==r)&&(r=a),(n>s||n!==n)&&(n=s),0>n?null:this.at(r>=0?r:n,t)))},intersectTriangle:function(){var e=new i.Vector3,t=new i.Vector3,r=new i.Vector3,n=new i.Vector3;return function(i,o,a,s,c){t.subVectors(o,i),r.subVectors(a,i),n.crossVectors(t,r);var h,u=this.direction.dot(n);if(u>0){if(s)return null;h=1}else{if(!(0>u))return null;h=-1,u=-u}e.subVectors(this.origin,i);var l=h*this.direction.dot(r.crossVectors(e,r));if(0>l)return null;var p=h*this.direction.dot(t.cross(e));if(0>p)return null;if(l+p>u)return null;var f=-h*e.dot(n);return 0>f?null:this.at(f/u,c)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},i.Sphere=function(e,t){this.center=void 0!==e?e:new i.Vector3,this.radius=void 0!==t?t:0},i.Sphere.prototype={constructor:i.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new i.Box3;return function(t,r){var n=this.center;void 0!==r?n.copy(r):e.setFromPoints(t).center(n);for(var i=0,o=0,a=t.length;a>o;o++)i=Math.max(i,n.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},clampPoint:function(e,t){var r=this.center.distanceToSquared(e),n=t||new i.Vector3;return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(e){var t=e||new i.Box3;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},i.Frustum=function(e,t,r,n,o,a){this.planes=[void 0!==e?e:new i.Plane,void 0!==t?t:new i.Plane,void 0!==r?r:new i.Plane,void 0!==n?n:new i.Plane,void 0!==o?o:new i.Plane,void 0!==a?a:new i.Plane]},i.Frustum.prototype={constructor:i.Frustum,set:function(e,t,r,n,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(n),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,r=0;6>r;r++)t[r].copy(e.planes[r]);return this},setFromMatrix:function(e){var t=this.planes,r=e.elements,n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],c=r[5],h=r[6],u=r[7],l=r[8],p=r[9],f=r[10],d=r[11],m=r[12],v=r[13],g=r[14],y=r[15];return t[0].setComponents(a-n,u-s,d-l,y-m).normalize(),t[1].setComponents(a+n,u+s,d+l,y+m).normalize(),t[2].setComponents(a+i,u+c,d+p,y+v).normalize(),t[3].setComponents(a-i,u-c,d-p,y-v).normalize(),t[4].setComponents(a-o,u-h,d-f,y-g).normalize(),t[5].setComponents(a+o,u+h,d+f,y+g).normalize(),this},intersectsObject:function(){var e=new i.Sphere;return function(t){var r=t.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),e.copy(r.boundingSphere),e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,r=e.center,n=-e.radius,i=0;6>i;i++){var o=t[i].distanceToPoint(r);if(n>o)return!1}return!0},intersectsBox:function(){var e=new i.Vector3,t=new i.Vector3;return function(r){for(var n=this.planes,i=0;6>i;i++){var o=n[i];e.x=o.normal.x>0?r.min.x:r.max.x,t.x=o.normal.x>0?r.max.x:r.min.x,e.y=o.normal.y>0?r.min.y:r.max.y,t.y=o.normal.y>0?r.max.y:r.min.y,e.z=o.normal.z>0?r.min.z:r.max.z,t.z=o.normal.z>0?r.max.z:r.min.z;var a=o.distanceToPoint(e),s=o.distanceToPoint(t);if(0>a&&0>s)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,r=0;6>r;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}},i.Plane=function(e,t){this.normal=void 0!==e?e:new i.Vector3(1,0,0),this.constant=void 0!==t?t:0},i.Plane.prototype={constructor:i.Plane,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,r,n){return this.normal.set(e,t,r),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new i.Vector3,t=new i.Vector3;return function(r,n,i){var o=e.subVectors(i,n).cross(t.subVectors(r,n)).normalize();return this.setFromNormalAndCoplanarPoint(o,r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var r=this.distanceToPoint(e),n=t||new i.Vector3;return n.copy(this.normal).multiplyScalar(r)},isIntersectionLine:function(e){var t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return 0>t&&r>0||0>r&&t>0},intersectLine:function(){var e=new i.Vector3;return function(t,r){var n=r||new i.Vector3,o=t.delta(e),a=this.normal.dot(o);if(0!==a){var s=-(t.start.dot(this.normal)+this.constant)/a;if(!(0>s||s>1))return n.copy(o).multiplyScalar(s).add(t.start)}else if(0===this.distanceToPoint(t.start))return n.copy(t.start)}}(),coplanarPoint:function(e){var t=e||new i.Vector3;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new i.Vector3,t=new i.Vector3,r=new i.Matrix3;return function(n,i){var o=i||r.getNormalMatrix(n),a=e.copy(this.normal).applyMatrix3(o),s=this.coplanarPoint(t);return s.applyMatrix4(n),this.setFromNormalAndCoplanarPoint(a,s),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},i.Math={generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=new Array(36),n=0;return function(){for(var i=0;36>i;i++)8===i||13===i||18===i||23===i?r[i]="-":14===i?r[i]="4":(2>=n&&(n=33554432+16777216*Math.random()|0),e=15&n,n>>=4,r[i]=t[19===i?3&e|8:e]);return r.join("")}}(),clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)},smoothstep:function(e,t,r){return t>=e?0:e>=r?1:(e=(e-t)/(r-t),e*e*(3-2*e))},smootherstep:function(e,t,r){return t>=e?0:e>=r?1:(e=(e-t)/(r-t),e*e*e*(e*(6*e-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(){var e=Math.PI/180;return function(t){return t*e}}(),radToDeg:function(){var e=180/Math.PI;return function(t){return t*e}}(),isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e}},i.Spline=function(e){function t(e,t,r,n,i,o,a){var s=.5*(r-e),c=.5*(n-t);return(2*(t-r)+s+c)*a+(-3*(t-r)-2*s-c)*o+s*i+t}this.points=e;var r,n,o,a,s,c,h,u,l,p=[],f={x:0,y:0,z:0};this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return r=(this.points.length-1)*e,n=Math.floor(r),o=r-n,p[0]=0===n?n:n-1,p[1]=n,p[2]=n>this.points.length-2?this.points.length-1:n+1,p[3]=n>this.points.length-3?this.points.length-1:n+2,c=this.points[p[0]],h=this.points[p[1]],u=this.points[p[2]],l=this.points[p[3]],a=o*o,s=o*a,f.x=t(c.x,h.x,u.x,l.x,o,a,s),f.y=t(c.y,h.y,u.y,l.y,o,a,s),f.z=t(c.z,h.z,u.z,l.z,o,a,s),f},this.getControlPointsArray=function(){var e,t,r=this.points.length,n=[];for(e=0;r>e;e++)t=this.points[e],n[e]=[t.x,t.y,t.z];return n},this.getLength=function(e){var t,r,n,o,a=0,s=0,c=0,h=new i.Vector3,u=new i.Vector3,l=[],p=0;for(l[0]=0,e||(e=100),n=this.points.length*e,h.copy(this.points[0]),t=1;n>t;t++)r=t/n,o=this.getPoint(r),u.copy(o),p+=u.distanceTo(h),h.copy(o),a=(this.points.length-1)*r,s=Math.floor(a),s!==c&&(l[s]=p,c=s);return l[l.length]=p,{chunks:l,total:p}},this.reparametrizeByArcLength=function(e){var t,r,n,o,a,s,c,h,u=[],l=new i.Vector3,p=this.getLength();for(u.push(l.copy(this.points[0]).clone()),t=1;t<this.points.length;t++){for(s=p.chunks[t]-p.chunks[t-1],c=Math.ceil(e*s/p.total),o=(t-1)/(this.points.length-1),a=t/(this.points.length-1),r=1;c-1>r;r++)n=o+r*(1/c)*(a-o),h=this.getPoint(n),u.push(l.copy(h).clone());u.push(l.copy(this.points[t]).clone())}this.points=u}},i.Triangle=function(e,t,r){this.a=void 0!==e?e:new i.Vector3,this.b=void 0!==t?t:new i.Vector3,this.c=void 0!==r?r:new i.Vector3},i.Triangle.normal=function(){var e=new i.Vector3;return function(t,r,n,o){var a=o||new i.Vector3;a.subVectors(n,r),e.subVectors(t,r),a.cross(e);var s=a.lengthSq();return s>0?a.multiplyScalar(1/Math.sqrt(s)):a.set(0,0,0)}}(),i.Triangle.barycoordFromPoint=function(){var e=new i.Vector3,t=new i.Vector3,r=new i.Vector3;return function(n,o,a,s,c){e.subVectors(s,o),t.subVectors(a,o),r.subVectors(n,o);var h=e.dot(e),u=e.dot(t),l=e.dot(r),p=t.dot(t),f=t.dot(r),d=h*p-u*u,m=c||new i.Vector3;if(0===d)return m.set(-2,-1,-1);var v=1/d,g=(p*l-u*f)*v,y=(h*f-u*l)*v;return m.set(1-g-y,y,g)}}(),i.Triangle.containsPoint=function(){var e=new i.Vector3;return function(t,r,n,o){var a=i.Triangle.barycoordFromPoint(t,r,n,o,e);return a.x>=0&&a.y>=0&&a.x+a.y<=1}}(),i.Triangle.prototype={constructor:i.Triangle,set:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this},setFromPointsAndIndices:function(e,t,r,n){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new i.Vector3,t=new i.Vector3;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){var t=e||new i.Vector3;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return i.Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new i.Plane;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return i.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return i.Triangle.containsPoint(e,this.a,this.b,this.c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},i.Channels=function(){this.mask=1},i.Channels.prototype={constructor:i.Channels,set:function(e){this.mask=1<<e},enable:function(e){this.mask|=1<<e},toggle:function(e){this.mask^=1<<e},disable:function(e){this.mask&=~(1<<e)}},i.Clock=function(e){this.autoStart=void 0!==e?e:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},i.Clock.prototype={constructor:i.Clock,start:function(){this.startTime=n.performance.now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=n.performance.now();e=.001*(t-this.oldTime),this.oldTime=t,this.elapsedTime+=e}return e}},i.EventDispatcher=function(){},i.EventDispatcher.prototype={constructor:i.EventDispatcher,apply:function(e){e.addEventListener=i.EventDispatcher.prototype.addEventListener,e.hasEventListener=i.EventDispatcher.prototype.hasEventListener,e.removeEventListener=i.EventDispatcher.prototype.removeEventListener,e.dispatchEvent=i.EventDispatcher.prototype.dispatchEvent},addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)?!0:!1},removeEventListener:function(e,t){if(void 0!==this._listeners){var r=this._listeners,n=r[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,r=t[e.type];if(void 0!==r){e.target=this;for(var n=[],i=r.length,o=0;i>o;o++)n[o]=r[o];for(var o=0;i>o;o++)n[o].call(this,e)}}}},function(e){function t(e,t){return e.distance-t.distance}function r(e,t,n,i){if(e.visible!==!1&&(e.raycast(t,n),i===!0))for(var o=e.children,a=0,s=o.length;s>a;a++)r(o[a],t,n,!0)}e.Raycaster=function(t,r,n,i){this.ray=new e.Ray(t,r),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})},e.Raycaster.prototype={constructor:e.Raycaster,linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(t,r){r instanceof e.PerspectiveCamera?(this.ray.origin.setFromMatrixPosition(r.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(r).sub(this.ray.origin).normalize()):r instanceof e.OrthographicCamera?(this.ray.origin.set(t.x,t.y,-1).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,n){var i=[];return r(e,this,i,n),i.sort(t),i},intersectObjects:function(e,n){var i=[];if(Array.isArray(e)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var o=0,a=e.length;a>o;o++)r(e[o],this,i,n);return i.sort(t),i}}}(i),i.Object3D=function(){function e(){o.setFromEuler(n,!1)}function t(){n.setFromQuaternion(o,void 0,!1)}Object.defineProperty(this,"id",{value:i.Object3DIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.channels=new i.Channels,this.children=[],this.up=i.Object3D.DefaultUp.clone();var r=new i.Vector3,n=new i.Euler,o=new i.Quaternion,a=new i.Vector3(1,1,1);n.onChange(e),o.onChange(t),Object.defineProperties(this,{position:{enumerable:!0,value:r},rotation:{enumerable:!0,value:n},quaternion:{enumerable:!0,value:o},scale:{enumerable:!0,value:a},modelViewMatrix:{value:new i.Matrix4},normalMatrix:{value:new i.Matrix3}}),this.rotationAutoUpdate=!0,this.matrix=new i.Matrix4,this.matrixWorld=new i.Matrix4,this.matrixAutoUpdate=i.Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}},i.Object3D.DefaultUp=new i.Vector3(0,1,0),i.Object3D.DefaultMatrixAutoUpdate=!0,i.Object3D.prototype={constructor:i.Object3D,get eulerOrder(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set eulerOrder(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(e){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set renderDepth(e){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new i.Quaternion;return function(t,r){return e.setFromAxisAngle(t,r),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new i.Vector3(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new i.Vector3(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new i.Vector3(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new i.Vector3;return function(t,r){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(r)),this}}(),translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},translateX:function(){var e=new i.Vector3(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new i.Vector3(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new i.Vector3(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new i.Matrix4;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new i.Matrix4;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e instanceof i.Object3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);var r=this.children.indexOf(e);-1!==r&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(r,1))},getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var r=0,n=this.children.length;n>r;r++){var i=this.children[r],o=i.getObjectByProperty(e,t);if(void 0!==o)return o}},getWorldPosition:function(e){var t=e||new i.Vector3;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new i.Vector3,t=new i.Vector3;return function(r){var n=r||new i.Quaternion;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,t),n}}(),getWorldRotation:function(){var e=new i.Quaternion;return function(t){var r=t||new i.Euler;return this.getWorldQuaternion(e),r.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new i.Vector3,t=new i.Quaternion;return function(r){var n=r||new i.Vector3;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(){var e=new i.Quaternion;return function(t){var r=t||new i.Vector3;return this.getWorldQuaternion(e),r.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,r=0,n=t.length;n>r;r++)t[r].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this);for(var t=this.children,r=0,n=t.length;n>r;r++)t[r].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||e===!0)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,r=this.children.length;r>t;t++)this.children[t].updateMatrixWorld(e)},toJSON:function(e){function t(e){var t=[];for(var r in e){var n=e[r];delete n.metadata,t.push(n)}return t}var r=void 0===e,n={};r&&(e={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var i={};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),i.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===e.geometries[this.geometry.uuid]&&(e.geometries[this.geometry.uuid]=this.geometry.toJSON(e)),i.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===e.materials[this.material.uuid]&&(e.materials[this.material.uuid]=this.material.toJSON(e)),i.material=this.material.uuid),this.children.length>0){i.children=[];for(var o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(r){var a=t(e.geometries),s=t(e.materials),c=t(e.textures),h=t(e.images);a.length>0&&(n.geometries=a),s.length>0&&(n.materials=s),c.length>0&&(n.textures=c),h.length>0&&(n.images=h)}return n.object=i,n},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.rotationAutoUpdate=e.rotationAutoUpdate,this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(var r=0;r<e.children.length;r++){var n=e.children[r];this.add(n.clone())}return this}},i.EventDispatcher.prototype.apply(i.Object3D.prototype),i.Object3DIdCount=0,i.Face3=function(e,t,r,n,o,a){this.a=e,this.b=t,this.c=r,this.normal=n instanceof i.Vector3?n:new i.Vector3,this.vertexNormals=Array.isArray(n)?n:[],this.color=o instanceof i.Color?o:new i.Color,this.vertexColors=Array.isArray(o)?o:[],this.materialIndex=void 0!==a?a:0},i.Face3.prototype={constructor:i.Face3,clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,r=e.vertexNormals.length;r>t;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,r=e.vertexColors.length;r>t;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}},i.Face4=function(e,t,r,n,o,a,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new i.Face3(e,t,r,o,a,s)},i.BufferAttribute=function(e,t){this.uuid=i.Math.generateUUID(),this.array=e,this.itemSize=t,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0},i.BufferAttribute.prototype={constructor:i.BufferAttribute,get length(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length},get count(){return this.array.length/this.itemSize},set needsUpdate(e){e===!0&&this.version++},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.itemSize,r*=t.itemSize;for(var n=0,i=this.itemSize;i>n;n++)this.array[e+n]=t.array[r+n];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,r=0,n=0,o=e.length;o>n;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),a=new i.Color),t[r++]=a.r,t[r++]=a.g,t[r++]=a.b}return this},copyIndicesArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;i>n;n++){var o=e[n];t[r++]=o.a,t[r++]=o.b,t[r++]=o.c}return this},copyVector2sArray:function(e){for(var t=this.array,r=0,n=0,o=e.length;o>n;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),a=new i.Vector2),t[r++]=a.x,t[r++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,r=0,n=0,o=e.length;o>n;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),
a=new i.Vector3),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,r=0,n=0,o=e.length;o>n;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),a=new i.Vector4),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z,t[r++]=a.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this},setXYZW:function(e,t,r,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this.array[e+3]=i,this},clone:function(){return(new this.constructor).copy(this)}},i.Int8Attribute=function(e,t){return new i.BufferAttribute(new Int8Array(e),t)},i.Uint8Attribute=function(e,t){return new i.BufferAttribute(new Uint8Array(e),t)},i.Uint8ClampedAttribute=function(e,t){return new i.BufferAttribute(new Uint8ClampedArray(e),t)},i.Int16Attribute=function(e,t){return new i.BufferAttribute(new Int16Array(e),t)},i.Uint16Attribute=function(e,t){return new i.BufferAttribute(new Uint16Array(e),t)},i.Int32Attribute=function(e,t){return new i.BufferAttribute(new Int32Array(e),t)},i.Uint32Attribute=function(e,t){return new i.BufferAttribute(new Uint32Array(e),t)},i.Float32Attribute=function(e,t){return new i.BufferAttribute(new Float32Array(e),t)},i.Float64Attribute=function(e,t){return new i.BufferAttribute(new Float64Array(e),t)},i.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new i.BufferAttribute(e,t).setDynamic(!0)},i.InstancedBufferAttribute=function(e,t,r){i.BufferAttribute.call(this,e,t),this.meshPerAttribute=r||1},i.InstancedBufferAttribute.prototype=Object.create(i.BufferAttribute.prototype),i.InstancedBufferAttribute.prototype.constructor=i.InstancedBufferAttribute,i.InstancedBufferAttribute.prototype.copy=function(e){return i.BufferAttribute.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},i.InterleavedBuffer=function(e,t){this.uuid=i.Math.generateUUID(),this.array=e,this.stride=t,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0},i.InterleavedBuffer.prototype={constructor:i.InterleavedBuffer,get length(){return this.array.length},get count(){return this.array.length/this.stride},set needsUpdate(e){e===!0&&this.version++},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){this.array=new e.array.constructor(e.array),this.stride=e.stride,this.dynamic=e.dynamic},copyAt:function(e,t,r){e*=this.stride,r*=t.stride;for(var n=0,i=this.stride;i>n;n++)this.array[e+n]=t.array[r+n];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)}},i.InstancedInterleavedBuffer=function(e,t,r){i.InterleavedBuffer.call(this,e,t),this.meshPerAttribute=r||1},i.InstancedInterleavedBuffer.prototype=Object.create(i.InterleavedBuffer.prototype),i.InstancedInterleavedBuffer.prototype.constructor=i.InstancedInterleavedBuffer,i.InstancedInterleavedBuffer.prototype.copy=function(e){return i.InterleavedBuffer.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},i.InterleavedBufferAttribute=function(e,t,r){this.uuid=i.Math.generateUUID(),this.data=e,this.itemSize=t,this.offset=r},i.InterleavedBufferAttribute.prototype={constructor:i.InterleavedBufferAttribute,get length(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length},get count(){return this.data.array.length/this.data.stride},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this},setXYZW:function(e,t,r,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this.data.array[e+3]=i,this}},i.Geometry=function(){Object.defineProperty(this,"id",{value:i.GeometryIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1},i.Geometry.prototype={constructor:i.Geometry,applyMatrix:function(e){for(var t=(new i.Matrix3).getNormalMatrix(e),r=0,n=this.vertices.length;n>r;r++){var o=this.vertices[r];o.applyMatrix4(e)}for(var r=0,n=this.faces.length;n>r;r++){var a=this.faces[r];a.normal.applyMatrix3(t).normalize();for(var s=0,c=a.vertexNormals.length;c>s;s++)a.vertexNormals[s].applyMatrix3(t).normalize()}null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0},rotateX:function(){var e;return function(t){return void 0===e&&(e=new i.Matrix4),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new i.Matrix4),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new i.Matrix4),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,r,n){return void 0===e&&(e=new i.Matrix4),e.makeTranslation(t,r,n),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,r,n){return void 0===e&&(e=new i.Matrix4),e.makeScale(t,r,n),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new i.Object3D),e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function t(e,t,n){var o=void 0!==s?[l[e].clone(),l[t].clone(),l[n].clone()]:[],a=void 0!==c?[r.colors[e].clone(),r.colors[t].clone(),r.colors[n].clone()]:[],d=new i.Face3(e,t,n,o,a);r.faces.push(d),void 0!==h&&r.faceVertexUvs[0].push([p[e].clone(),p[t].clone(),p[n].clone()]),void 0!==u&&r.faceVertexUvs[1].push([f[e].clone(),f[t].clone(),f[n].clone()])}var r=this,n=null!==e.index?e.index.array:void 0,o=e.attributes,a=o.position.array,s=void 0!==o.normal?o.normal.array:void 0,c=void 0!==o.color?o.color.array:void 0,h=void 0!==o.uv?o.uv.array:void 0,u=void 0!==o.uv2?o.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var l=[],p=[],f=[],d=0,m=0,v=0;d<a.length;d+=3,m+=2,v+=4)r.vertices.push(new i.Vector3(a[d],a[d+1],a[d+2])),void 0!==s&&l.push(new i.Vector3(s[d],s[d+1],s[d+2])),void 0!==c&&r.colors.push(new i.Color(c[d],c[d+1],c[d+2])),void 0!==h&&p.push(new i.Vector2(h[m],h[m+1])),void 0!==u&&f.push(new i.Vector2(u[m],u[m+1]));if(void 0!==n){var g=e.groups;if(g.length>0)for(var d=0;d<g.length;d++)for(var y=g[d],b=y.start,x=y.count,m=b,w=b+x;w>m;m+=3)t(n[m],n[m+1],n[m+2]);else for(var d=0;d<n.length;d+=3)t(n[d],n[d+1],n[d+2])}else for(var d=0;d<a.length/3;d+=3)t(d,d+1,d+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.center().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,r=0===t?1:1/t,n=new i.Matrix4;return n.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var e=new i.Vector3,t=new i.Vector3,r=0,n=this.faces.length;n>r;r++){var o=this.faces[r],a=this.vertices[o.a],s=this.vertices[o.b],c=this.vertices[o.c];e.subVectors(c,s),t.subVectors(a,s),e.cross(t),e.normalize(),o.normal.copy(e)}},computeVertexNormals:function(e){var t,r,n,o,a,s;for(s=new Array(this.vertices.length),t=0,r=this.vertices.length;r>t;t++)s[t]=new i.Vector3;if(e){var c,h,u,l=new i.Vector3,p=new i.Vector3;for(n=0,o=this.faces.length;o>n;n++)a=this.faces[n],c=this.vertices[a.a],h=this.vertices[a.b],u=this.vertices[a.c],l.subVectors(u,h),p.subVectors(c,h),l.cross(p),s[a.a].add(l),s[a.b].add(l),s[a.c].add(l)}else for(n=0,o=this.faces.length;o>n;n++)a=this.faces[n],s[a.a].add(a.normal),s[a.b].add(a.normal),s[a.c].add(a.normal);for(t=0,r=this.vertices.length;r>t;t++)s[t].normalize();for(n=0,o=this.faces.length;o>n;n++){a=this.faces[n];var f=a.vertexNormals;3===f.length?(f[0].copy(s[a.a]),f[1].copy(s[a.b]),f[2].copy(s[a.c])):(f[0]=s[a.a].clone(),f[1]=s[a.b].clone(),f[2]=s[a.c].clone())}},computeMorphNormals:function(){var e,t,r,n,o;for(r=0,n=this.faces.length;n>r;r++)for(o=this.faces[r],o.__originalFaceNormal?o.__originalFaceNormal.copy(o.normal):o.__originalFaceNormal=o.normal.clone(),o.__originalVertexNormals||(o.__originalVertexNormals=[]),e=0,t=o.vertexNormals.length;t>e;e++)o.__originalVertexNormals[e]?o.__originalVertexNormals[e].copy(o.vertexNormals[e]):o.__originalVertexNormals[e]=o.vertexNormals[e].clone();var a=new i.Geometry;for(a.faces=this.faces,e=0,t=this.morphTargets.length;t>e;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var s,c,h=this.morphNormals[e].faceNormals,u=this.morphNormals[e].vertexNormals;for(r=0,n=this.faces.length;n>r;r++)s=new i.Vector3,c={a:new i.Vector3,b:new i.Vector3,c:new i.Vector3},h.push(s),u.push(c)}var l=this.morphNormals[e];a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals();var s,c;for(r=0,n=this.faces.length;n>r;r++)o=this.faces[r],s=l.faceNormals[r],c=l.vertexNormals[r],s.copy(o.normal),c.a.copy(o.vertexNormals[0]),c.b.copy(o.vertexNormals[1]),c.c.copy(o.vertexNormals[2])}for(r=0,n=this.faces.length;n>r;r++)o=this.faces[r],o.normal=o.__originalFaceNormal,o.vertexNormals=o.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){for(var e=0,t=this.vertices,r=0,n=t.length;n>r;r++)r>0&&(e+=t[r].distanceTo(t[r-1])),this.lineDistances[r]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new i.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new i.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,r){if(e instanceof i.Geometry==!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);var n,o=this.vertices.length,a=this.vertices,s=e.vertices,c=this.faces,h=e.faces,u=this.faceVertexUvs[0],l=e.faceVertexUvs[0];void 0===r&&(r=0),void 0!==t&&(n=(new i.Matrix3).getNormalMatrix(t));for(var p=0,f=s.length;f>p;p++){var d=s[p],m=d.clone();void 0!==t&&m.applyMatrix4(t),a.push(m)}for(p=0,f=h.length;f>p;p++){var v,g,y,b=h[p],x=b.vertexNormals,w=b.vertexColors;v=new i.Face3(b.a+o,b.b+o,b.c+o),v.normal.copy(b.normal),void 0!==n&&v.normal.applyMatrix3(n).normalize();for(var _=0,S=x.length;S>_;_++)g=x[_].clone(),void 0!==n&&g.applyMatrix3(n).normalize(),v.vertexNormals.push(g);v.color.copy(b.color);for(var _=0,S=w.length;S>_;_++)y=w[_],v.vertexColors.push(y.clone());v.materialIndex=b.materialIndex+r,c.push(v)}for(p=0,f=l.length;f>p;p++){var M=l[p],T=[];if(void 0!==M){for(var _=0,S=M.length;S>_;_++)T.push(M[_].clone());u.push(T)}}},mergeMesh:function(e){return e instanceof i.Mesh==!1?void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e):(e.matrixAutoUpdate&&e.updateMatrix(),void this.merge(e.geometry,e.matrix))},mergeVertices:function(){var e,t,r,n,i,o,a,s,c={},h=[],u=[],l=4,p=Math.pow(10,l);for(r=0,n=this.vertices.length;n>r;r++)e=this.vertices[r],t=Math.round(e.x*p)+"_"+Math.round(e.y*p)+"_"+Math.round(e.z*p),void 0===c[t]?(c[t]=r,h.push(this.vertices[r]),u[r]=h.length-1):u[r]=u[c[t]];var f=[];for(r=0,n=this.faces.length;n>r;r++){i=this.faces[r],i.a=u[i.a],i.b=u[i.b],i.c=u[i.c],o=[i.a,i.b,i.c];for(var d=-1,m=0;3>m;m++)if(o[m]===o[(m+1)%3]){d=m,f.push(r);break}}for(r=f.length-1;r>=0;r--){var v=f[r];for(this.faces.splice(v,1),a=0,s=this.faceVertexUvs.length;s>a;a++)this.faceVertexUvs[a].splice(v,1)}var g=this.vertices.length-h.length;return this.vertices=h,g},sortFacesByMaterialIndex:function(){function e(e,t){return e.materialIndex-t.materialIndex}for(var t=this.faces,r=t.length,n=0;r>n;n++)t[n]._id=n;t.sort(e);var i,o,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===r&&(i=[]),s&&s.length===r&&(o=[]);for(var n=0;r>n;n++){var c=t[n]._id;i&&i.push(a[c]),o&&o.push(s[c])}i&&(this.faceVertexUvs[0]=i),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){function e(e,t,r){return r?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==p[t]?p[t]:(p[t]=l.length/3,l.push(e.x,e.y,e.z),p[t])}function r(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==d[t]?d[t]:(d[t]=f.length,f.push(e.getHex()),d[t])}function n(e){var t=e.x.toString()+e.y.toString();return void 0!==v[t]?v[t]:(v[t]=m.length/2,m.push(e.x,e.y),v[t])}var i={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var a in o)void 0!==o[a]&&(i[a]=o[a]);return i}for(var s=[],c=0;c<this.vertices.length;c++){var h=this.vertices[c];s.push(h.x,h.y,h.z)}for(var u=[],l=[],p={},f=[],d={},m=[],v={},c=0;c<this.faces.length;c++){var g=this.faces[c],y=!1,b=!1,x=void 0!==this.faceVertexUvs[0][c],w=g.normal.length()>0,_=g.vertexNormals.length>0,S=1!==g.color.r||1!==g.color.g||1!==g.color.b,M=g.vertexColors.length>0,T=0;if(T=e(T,0,0),T=e(T,1,y),T=e(T,2,b),T=e(T,3,x),T=e(T,4,w),T=e(T,5,_),T=e(T,6,S),T=e(T,7,M),u.push(T),u.push(g.a,g.b,g.c),x){var E=this.faceVertexUvs[0][c];u.push(n(E[0]),n(E[1]),n(E[2]))}if(w&&u.push(t(g.normal)),_){var C=g.vertexNormals;u.push(t(C[0]),t(C[1]),t(C[2]))}if(S&&u.push(r(g.color)),M){var A=g.vertexColors;u.push(r(A[0]),r(A[1]),r(A[2]))}}return i.data={},i.data.vertices=s,i.data.normals=l,f.length>0&&(i.data.colors=f),m.length>0&&(i.data.uvs=[m]),i.data.faces=u,i},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]];for(var t=e.vertices,r=0,n=t.length;n>r;r++)this.vertices.push(t[r].clone());for(var i=e.faces,r=0,n=i.length;n>r;r++)this.faces.push(i[r].clone());for(var r=0,n=e.faceVertexUvs.length;n>r;r++){var o=e.faceVertexUvs[r];void 0===this.faceVertexUvs[r]&&(this.faceVertexUvs[r]=[]);for(var a=0,s=o.length;s>a;a++){for(var c=o[a],h=[],u=0,l=c.length;l>u;u++){var p=c[u];h.push(p.clone())}this.faceVertexUvs[r].push(h)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}},i.EventDispatcher.prototype.apply(i.Geometry.prototype),i.GeometryIdCount=0,i.DirectGeometry=function(){Object.defineProperty(this,"id",{value:i.GeometryIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.type="DirectGeometry",this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1},i.DirectGeometry.prototype={constructor:i.DirectGeometry,computeBoundingBox:i.Geometry.prototype.computeBoundingBox,computeBoundingSphere:i.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(e){for(var t,r,n=[],i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:r})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t=e.faces,r=e.vertices,n=e.faceVertexUvs,o=n[0]&&n[0].length>0,a=n[1]&&n[1].length>0,s=e.morphTargets,c=s.length;if(c>0){for(var h=[],u=0;c>u;u++)h[u]=[];this.morphTargets.position=h}var l=e.morphNormals,p=l.length;if(p>0){for(var f=[],u=0;p>u;u++)f[u]=[];this.morphTargets.normal=f}for(var d=e.skinIndices,m=e.skinWeights,v=d.length===r.length,g=m.length===r.length,u=0;u<t.length;u++){var y=t[u];this.vertices.push(r[y.a],r[y.b],r[y.c]);var b=y.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var x=y.normal;this.normals.push(x,x,x)}var w=y.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var _=y.color;this.colors.push(_,_,_)}if(o===!0){var S=n[0][u];void 0!==S?this.uvs.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new i.Vector2,new i.Vector2,new i.Vector2))}if(a===!0){var S=n[1][u];void 0!==S?this.uvs2.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new i.Vector2,new i.Vector2,new i.Vector2))}for(var M=0;c>M;M++){var T=s[M].vertices;h[M].push(T[y.a],T[y.b],T[y.c])}for(var M=0;p>M;M++){var E=l[M].vertexNormals[u];f[M].push(E.a,E.b,E.c)}v&&this.skinIndices.push(d[y.a],d[y.b],d[y.c]),g&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},i.EventDispatcher.prototype.apply(i.DirectGeometry.prototype),i.BufferGeometry=function(){Object.defineProperty(this,"id",{value:i.GeometryIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}},i.BufferGeometry.prototype={constructor:i.BufferGeometry,addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},getIndex:function(){return this.index},setIndex:function(e){this.index=e},addAttribute:function(e,t){return t instanceof i.BufferAttribute==!1&&t instanceof i.InterleavedBufferAttribute==!1?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new i.BufferAttribute(arguments[1],arguments[2]))):"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):void(this.attributes[e]=t)},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){delete this.attributes[e]},get drawcalls(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups},get offsets(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups},addDrawCall:function(e,t,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},addGroup:function(e,t,r){this.groups.push({start:e,count:t,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToVector3Array(t.array),t.needsUpdate=!0);var r=this.attributes.normal;if(void 0!==r){var n=(new i.Matrix3).getNormalMatrix(e);n.applyToVector3Array(r.array),r.needsUpdate=!0}null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere()},rotateX:function(){var e;return function(t){return void 0===e&&(e=new i.Matrix4),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new i.Matrix4),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new i.Matrix4),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,r,n){return void 0===e&&(e=new i.Matrix4),e.makeTranslation(t,r,n),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,r,n){return void 0===e&&(e=new i.Matrix4),e.makeScale(t,r,n),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new i.Object3D),e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.center().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e instanceof i.Points||e instanceof i.Line){var r=new i.Float32Attribute(3*t.vertices.length,3),n=new i.Float32Attribute(3*t.colors.length,3);if(this.addAttribute("position",r.copyVector3sArray(t.vertices)),this.addAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var o=new i.Float32Attribute(t.lineDistances.length,1);this.addAttribute("lineDistance",o.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e instanceof i.Mesh&&t instanceof i.Geometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t=e.geometry;if(e instanceof i.Mesh){var r=t.__directGeometry;if(void 0===r)return this.fromGeometry(t);r.verticesNeedUpdate=t.verticesNeedUpdate,r.normalsNeedUpdate=t.normalsNeedUpdate,r.colorsNeedUpdate=t.colorsNeedUpdate,r.uvsNeedUpdate=t.uvsNeedUpdate,r.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=r}if(t.verticesNeedUpdate===!0){var n=this.attributes.position;void 0!==n&&(n.copyVector3sArray(t.vertices),n.needsUpdate=!0),t.verticesNeedUpdate=!1}if(t.normalsNeedUpdate===!0){var n=this.attributes.normal;void 0!==n&&(n.copyVector3sArray(t.normals),n.needsUpdate=!0),t.normalsNeedUpdate=!1}if(t.colorsNeedUpdate===!0){var n=this.attributes.color;void 0!==n&&(n.copyColorsArray(t.colors),n.needsUpdate=!0),t.colorsNeedUpdate=!1}if(t.uvsNeedUpdate){var n=this.attributes.uv;void 0!==n&&(n.copyVector2sArray(t.uvs),n.needsUpdate=!0),t.uvsNeedUpdate=!1}if(t.lineDistancesNeedUpdate){var n=this.attributes.lineDistance;void 0!==n&&(n.copyArray(t.lineDistances),n.needsUpdate=!0),t.lineDistancesNeedUpdate=!1}return t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new i.DirectGeometry).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new i.BufferAttribute(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var r=new Float32Array(3*e.normals.length);this.addAttribute("normal",new i.BufferAttribute(r,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var n=new Float32Array(3*e.colors.length);this.addAttribute("color",new i.BufferAttribute(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var o=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new i.BufferAttribute(o,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new i.BufferAttribute(a,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var s=e.vertices.length>65535?Uint32Array:Uint16Array,c=new s(3*e.indices.length);this.setIndex(new i.BufferAttribute(c,1).copyIndicesArray(e.indices))}this.groups=e.groups;for(var h in e.morphTargets){for(var u=[],l=e.morphTargets[h],p=0,f=l.length;f>p;p++){var d=l[p],m=new i.Float32Attribute(3*d.length,3);u.push(m.copyVector3sArray(d))}this.morphAttributes[h]=u}if(e.skinIndices.length>0){var v=new i.Float32Attribute(4*e.skinIndices.length,4);this.addAttribute("skinIndex",v.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var g=new i.Float32Attribute(4*e.skinWeights.length,4);this.addAttribute("skinWeight",g.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){var e=new i.Vector3;return function(){null===this.boundingBox&&(this.boundingBox=new i.Box3);var t=this.attributes.position.array;if(t){var r=this.boundingBox;r.makeEmpty();for(var n=0,o=t.length;o>n;n+=3)e.fromArray(t,n),r.expandByPoint(e)}(void 0===t||0===t.length)&&(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var e=new i.Box3,t=new i.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new i.Sphere);var r=this.attributes.position.array;if(r){e.makeEmpty();for(var n=this.boundingSphere.center,o=0,a=r.length;a>o;o+=3)t.fromArray(r,o),e.expandByPoint(t);e.center(n);for(var s=0,o=0,a=r.length;a>o;o+=3)t.fromArray(r,o),s=Math.max(s,n.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,r=this.groups;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new i.BufferAttribute(new Float32Array(n.length),3));else for(var o=t.normal.array,a=0,s=o.length;s>a;a++)o[a]=0;var c,h,u,o=t.normal.array,l=new i.Vector3,p=new i.Vector3,f=new i.Vector3,d=new i.Vector3,m=new i.Vector3;if(e){var v=e.array;0===r.length&&this.addGroup(0,v.length);for(var g=0,y=r.length;y>g;++g)for(var b=r[g],x=b.start,w=b.count,a=x,s=x+w;s>a;a+=3)c=3*v[a+0],h=3*v[a+1],u=3*v[a+2],l.fromArray(n,c),p.fromArray(n,h),f.fromArray(n,u),d.subVectors(f,p),m.subVectors(l,p),d.cross(m),o[c]+=d.x,o[c+1]+=d.y,o[c+2]+=d.z,o[h]+=d.x,o[h+1]+=d.y,o[h+2]+=d.z,o[u]+=d.x,o[u+1]+=d.y,o[u+2]+=d.z}else for(var a=0,s=n.length;s>a;a+=9)l.fromArray(n,a),p.fromArray(n,a+3),f.fromArray(n,a+6),d.subVectors(f,p),m.subVectors(l,p),d.cross(m),o[a]=d.x,o[a+1]=d.y,o[a+2]=d.z,o[a+3]=d.x,o[a+4]=d.y,o[a+5]=d.z,o[a+6]=d.x,o[a+7]=d.y,o[a+8]=d.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(e){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},merge:function(e,t){if(e instanceof i.BufferGeometry==!1)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0);var r=this.attributes;for(var n in r)if(void 0!==e.attributes[n])for(var o=r[n],a=o.array,s=e.attributes[n],c=s.array,h=s.itemSize,u=0,l=h*t;u<c.length;u++,l++)a[l]=c[u];return this},normalizeNormals:function(){for(var e,t,r,n,i=this.attributes.normal.array,o=0,a=i.length;a>o;o+=3)e=i[o],t=i[o+1],r=i[o+2],n=1/Math.sqrt(e*e+t*t+r*r),i[o]*=n,i[o+1]*=n,i[o+2]*=n},toJSON:function(){var e={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}e.data={attributes:{}};var n=this.index;if(null!==n){var i=Array.prototype.slice.call(n.array);e.data.index={type:n.array.constructor.name,array:i}}var o=this.attributes;for(var r in o){var a=o[r],i=Array.prototype.slice.call(a.array);e.data.attributes[r]={itemSize:a.itemSize,type:a.array.constructor.name,array:i}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var c=this.boundingSphere;return null!==c&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e},clone:function(){return(new this.constructor).copy(this)},copy:function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var r=e.attributes;for(var n in r){var i=r[n];this.addAttribute(n,i.clone())}for(var o=e.groups,a=0,s=o.length;s>a;a++){var c=o[a];this.addGroup(c.start,c.count)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}},i.EventDispatcher.prototype.apply(i.BufferGeometry.prototype),i.BufferGeometry.MaxIndex=65535,i.InstancedBufferGeometry=function(){i.BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0},i.InstancedBufferGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.InstancedBufferGeometry.prototype.constructor=i.InstancedBufferGeometry,i.InstancedBufferGeometry.prototype.addGroup=function(e,t,r){this.groups.push({start:e,count:t,instances:r})},i.InstancedBufferGeometry.prototype.copy=function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var r=e.attributes;for(var n in r){var i=r[n];this.addAttribute(n,i.clone())}for(var o=e.groups,a=0,s=o.length;s>a;a++){var c=o[a];this.addGroup(c.start,c.count,c.instances)}return this},i.EventDispatcher.prototype.apply(i.InstancedBufferGeometry.prototype),i.AnimationAction=function(e,t,r,n,o){if(void 0===e)throw new Error("clip is null");this.clip=e,this.localRoot=null,this.startTime=t||0,this.timeScale=r||1,this.weight=n||1,this.loop=o||i.LoopRepeat,this.loopCount=0,this.enabled=!0,this.actionTime=-this.startTime,this.clipTime=0,this.propertyBindings=[]},i.AnimationAction.prototype={constructor:i.AnimationAction,setLocalRoot:function(e){return this.localRoot=e,this},updateTime:function(e){var t=this.clipTime,r=this.loopCount,n=(this.actionTime,this.clip.duration);if(this.actionTime=this.actionTime+e,this.loop===i.LoopOnce)return this.loopCount=0,this.clipTime=Math.min(Math.max(this.actionTime,0),n),this.clipTime!==t&&(this.clipTime===n?this.mixer.dispatchEvent({type:"finished",action:this,direction:1}):0===this.clipTime&&this.mixer.dispatchEvent({type:"finished",action:this,direction:-1})),this.clipTime;this.loopCount=Math.floor(this.actionTime/n);var o=this.actionTime-this.loopCount*n;return o%=n,this.loop==i.LoopPingPong&&1===Math.abs(this.loopCount%2)&&(o=n-o),
this.clipTime=o,this.loopCount!==r&&this.mixer.dispatchEvent({type:"loop",action:this,loopDelta:this.loopCount-this.loopCount}),this.clipTime},syncWith:function(e){return this.actionTime=e.actionTime,this.timeScale=e.timeScale,this},warpToDuration:function(e){return this.timeScale=this.clip.duration/e,this},init:function(e){return this.clipTime=e-this.startTime,this},update:function(e){this.updateTime(e);var t=this.clip.getAt(this.clipTime);return t},getTimeScaleAt:function(e){return this.timeScale.getAt?this.timeScale.getAt(e):this.timeScale},getWeightAt:function(e){return this.weight.getAt?this.weight.getAt(e):this.weight}},i.AnimationClip=function(e,t,r){if(this.name=e,this.tracks=r,this.duration=void 0!==t?t:-1,this.duration<0)for(var n=0;n<this.tracks.length;n++){var i=this.tracks[n];this.duration=Math.max(i.keys[i.keys.length-1].time)}this.trim(),this.optimize(),this.results=[]},i.AnimationClip.prototype={constructor:i.AnimationClip,getAt:function(e){e=Math.max(0,Math.min(e,this.duration));for(var t=0;t<this.tracks.length;t++){var r=this.tracks[t];this.results[t]=r.getAt(e)}return this.results},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},i.AnimationClip.CreateFromMorphTargetSequence=function(e,t,r){for(var n=t.length,o=[],a=0;n>a;a++){var s=[];s.push({time:(a+n-1)%n,value:0}),s.push({time:a,value:1}),s.push({time:(a+1)%n,value:0}),s.sort(i.KeyframeTrack.keyComparer),0===s[0].time&&s.push({time:n,value:s[0].value}),o.push(new i.NumberKeyframeTrack(".morphTargetInfluences["+t[a].name+"]",s).scale(1/r))}return new i.AnimationClip(e,-1,o)},i.AnimationClip.findByName=function(e,t){for(var r=0;r<e.length;r++)if(e[r].name===t)return e[r];return null},i.AnimationClip.CreateClipsFromMorphTargetSequences=function(e,t){for(var r={},n=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;a>o;o++){var s=e[o],c=s.name.match(n);if(c&&c.length>1){var h=c[1],u=r[h];u||(r[h]=u=[]),u.push(s)}}var l=[];for(var h in r)l.push(i.AnimationClip.CreateFromMorphTargetSequence(h,r[h],t));return l},i.AnimationClip.parse=function(e){for(var t=[],r=0;r<e.tracks.length;r++)t.push(i.KeyframeTrack.parse(e.tracks[r]).scale(1/e.fps));return new i.AnimationClip(e.name,e.duration,t)},i.AnimationClip.parseAnimation=function(e,t,r){if(!e)return console.error("  no animation in JSONLoader data"),null;for(var n=function(e,t,r,n,i){for(var o=[],a=0;a<t.length;a++){var s=t[a];void 0!==s[r]&&o.push({time:s.time,value:i(s)})}return o.length>0?new n(e,o):null},o=[],a=e.name||"default",s=e.length||-1,c=e.fps||30,h=e.hierarchy||[],u=0;u<h.length;u++){var l=h[u].keys;if(l&&0!=l.length)if(l[0].morphTargets){for(var p={},f=0;f<l.length;f++)if(l[f].morphTargets)for(var d=0;d<l[f].morphTargets.length;d++)p[l[f].morphTargets[d]]=-1;for(var m in p){for(var v=[],d=0;d<l[f].morphTargets.length;d++){var g=l[f];v.push({time:g.time,value:g.morphTarget===m?1:0})}o.push(new i.NumberKeyframeTrack(r+".morphTargetInfluence["+m+"]",v))}s=p.length*(c||1)}else{var y=r+".bones["+t[u].name+"]",b=n(y+".position",l,"pos",i.VectorKeyframeTrack,function(e){return(new i.Vector3).fromArray(e.pos)});b&&o.push(b);var x=n(y+".quaternion",l,"rot",i.QuaternionKeyframeTrack,function(e){return e.rot.slerp?e.rot.clone():(new i.Quaternion).fromArray(e.rot)});x&&o.push(x);var w=n(y+".scale",l,"scl",i.VectorKeyframeTrack,function(e){return(new i.Vector3).fromArray(e.scl)});w&&o.push(w)}}if(0===o.length)return null;var _=new i.AnimationClip(a,s,o);return _},i.AnimationMixer=function(e){this.root=e,this.time=0,this.timeScale=1,this.actions=[],this.propertyBindingMap={}},i.AnimationMixer.prototype={constructor:i.AnimationMixer,addAction:function(e){this.actions.push(e),e.init(this.time),e.mixer=this;for(var t=e.clip.tracks,r=e.localRoot||this.root,n=0;n<t.length;n++){var o=t[n],a=r.uuid+"-"+o.name,s=this.propertyBindingMap[a];void 0===s&&(s=new i.PropertyBinding(r,o.name),this.propertyBindingMap[a]=s),e.propertyBindings.push(s),s.referenceCount+=1}},removeAllActions:function(){for(var e=0;e<this.actions.length;e++)this.actions[e].mixer=null;for(var t in this.propertyBindingMap)this.propertyBindingMap[t].unbind();return this.actions=[],this.propertyBindingMap={},this},removeAction:function(e){var t=this.actions.indexOf(e);-1!==t&&(this.actions.splice(t,1),e.mixer=null);for(var r=e.localRoot||this.root,n=e.clip.tracks,i=0;i<n.length;i++){var o=n[i],a=r.uuid+"-"+o.name,s=this.propertyBindingMap[a];s.referenceCount-=1,s.referenceCount<=0&&(s.unbind(),delete this.propertyBindingMap[a])}return this},findActionByName:function(e){for(var t=0;t<this.actions.length;t++)if(this.actions[t].name===e)return this.actions[t];return null},play:function(e,t){return e.startTime=this.time,this.addAction(e),this},fadeOut:function(e,t){var r=[];return r.push({time:this.time,value:1}),r.push({time:this.time+t,value:0}),e.weight=new i.NumberKeyframeTrack("weight",r),this},fadeIn:function(e,t){var r=[];return r.push({time:this.time,value:0}),r.push({time:this.time+t,value:1}),e.weight=new i.NumberKeyframeTrack("weight",r),this},warp:function(e,t,r,n){var o=[];return o.push({time:this.time,value:t}),o.push({time:this.time+n,value:r}),e.timeScale=new i.NumberKeyframeTrack("timeScale",o),this},crossFade:function(e,t,r,n){if(this.fadeOut(e,r),this.fadeIn(t,r),n){var i=e.clip.duration/t.clip.duration,o=1/i;this.warp(e,1,i,r),this.warp(t,o,1,r)}return this},update:function(e){var t=e*this.timeScale;this.time+=t;for(var r=0;r<this.actions.length;r++){var n=this.actions[r],i=n.getWeightAt(this.time),o=n.getTimeScaleAt(this.time),a=t*o,s=n.update(a);if(!(n.weight<=0)&&n.enabled)for(var c=0;c<s.length;c++){n.clip.tracks[c].name;n.propertyBindings[c].accumulate(s[c],i)}}for(var h in this.propertyBindingMap)this.propertyBindingMap[h].apply();return this}},i.EventDispatcher.prototype.apply(i.AnimationMixer.prototype),i.AnimationUtils={getEqualsFunc:function(e){return e.equals?function(e,t){return e.equals(t)}:function(e,t){return e===t}},clone:function(e){var t=typeof e;if("object"===t){if(e.clone)return e.clone();console.error("can not figure out how to copy exemplarValue",e)}return e},lerp:function(e,t,r,n){var o=i.AnimationUtils.getLerpFunc(e,n);return o(e,t,r)},lerp_object:function(e,t,r){return e.lerp(t,r)},slerp_object:function(e,t,r){return e.slerp(t,r)},lerp_number:function(e,t,r){return e*(1-r)+t*r},lerp_boolean:function(e,t,r){return.5>r?e:t},lerp_boolean_immediate:function(e,t,r){return e},lerp_string:function(e,t,r){return.5>r?e:t},lerp_string_immediate:function(e,t,r){return e},getLerpFunc:function(e,t){if(void 0===e||null===e)throw new Error("examplarValue is null");var r=typeof e;switch(r){case"object":if(e.lerp)return i.AnimationUtils.lerp_object;if(e.slerp)return i.AnimationUtils.slerp_object;break;case"number":return i.AnimationUtils.lerp_number;case"boolean":return t?i.AnimationUtils.lerp_boolean:i.AnimationUtils.lerp_boolean_immediate;case"string":return t?i.AnimationUtils.lerp_string:i.AnimationUtils.lerp_string_immediate}}},i.KeyframeTrack=function(e,t){if(void 0===e)throw new Error("track name is undefined");if(void 0===t||0===t.length)throw new Error("no keys in track named "+e);this.name=e,this.keys=t,this.lastIndex=0,this.validate(),this.optimize()},i.KeyframeTrack.prototype={constructor:i.KeyframeTrack,getAt:function(e){for(;this.lastIndex<this.keys.length&&e>=this.keys[this.lastIndex].time;)this.lastIndex++;for(;this.lastIndex>0&&e<this.keys[this.lastIndex-1].time;)this.lastIndex--;if(this.lastIndex>=this.keys.length)return this.setResult(this.keys[this.keys.length-1].value),this.result;if(0===this.lastIndex)return this.setResult(this.keys[0].value),this.result;var t=this.keys[this.lastIndex-1];if(this.setResult(t.value),t.constantToNext)return this.result;var r=this.keys[this.lastIndex],n=(e-t.time)/(r.time-t.time);return this.result=this.lerpValues(this.result,r.value,n),this.result},shift:function(e){if(0!==e)for(var t=0;t<this.keys.length;t++)this.keys[t].time+=e;return this},scale:function(e){if(1!==e)for(var t=0;t<this.keys.length;t++)this.keys[t].time*=e;return this},trim:function(e,t){for(var r=0,n=1;n<this.keys.length;n++)this.keys[n]<=e&&r++;for(var i=0,n=this.keys.length-2;n>0&&this.keys[n]>=t;n++)i++;return r+i>0&&(this.keys=this.keys.splice(r,this.keys.length-i-r)),this},validate:function(){var e=null;if(0===this.keys.length)return void console.error("  track is empty, no keys",this);for(var t=0;t<this.keys.length;t++){var r=this.keys[t];if(!r)return void console.error("  key is null in track",this,t);if("number"!=typeof r.time||isNaN(r.time))return void console.error("  key.time is not a valid number",this,t,r);if(void 0===r.value||null===r.value)return void console.error("  key.value is null in track",this,t,r);if(e&&e.time>r.time)return void console.error("  key.time is less than previous key time, out of order keys",this,t,r,e);e=r}return this},optimize:function(){var e=[],t=this.keys[0];e.push(t);for(var r=(i.AnimationUtils.getEqualsFunc(t.value),1);r<this.keys.length-1;r++){var n=this.keys[r],o=this.keys[r+1];t.time!==n.time&&(this.compareValues(t.value,n.value)&&this.compareValues(n.value,o.value)||(t.constantToNext=this.compareValues(t.value,n.value),e.push(n),t=n))}return e.push(this.keys[this.keys.length-1]),this.keys=e,this}},i.KeyframeTrack.keyComparer=function(e,t){return e.time-t.time},i.KeyframeTrack.parse=function(e){if(void 0===e.type)throw new Error("track type undefined, can not parse");var t=i.KeyframeTrack.GetTrackTypeForTypeName(e.type);return t.parse(e)},i.KeyframeTrack.GetTrackTypeForTypeName=function(e){switch(e.toLowerCase()){case"vector":case"vector2":case"vector3":case"vector4":return i.VectorKeyframeTrack;case"quaternion":return i.QuaternionKeyframeTrack;case"integer":case"scalar":case"double":case"float":case"number":return i.NumberKeyframeTrack;case"bool":case"boolean":return i.BooleanKeyframeTrack;case"string":return i.StringKeyframeTrack}throw new Error("Unsupported typeName: "+e)},i.PropertyBinding=function(e,t){this.rootNode=e,this.trackName=t,this.referenceCount=0,this.originalValue=null;var r=i.PropertyBinding.parseTrackName(t);this.directoryName=r.directoryName,this.nodeName=r.nodeName,this.objectName=r.objectName,this.objectIndex=r.objectIndex,this.propertyName=r.propertyName,this.propertyIndex=r.propertyIndex,this.node=i.PropertyBinding.findNode(e,this.nodeName)||e,this.cumulativeValue=null,this.cumulativeWeight=0},i.PropertyBinding.prototype={constructor:i.PropertyBinding,reset:function(){this.cumulativeValue=null,this.cumulativeWeight=0},accumulate:function(e,t){if(this.isBound||this.bind(),0===this.cumulativeWeight)t>0&&(null===this.cumulativeValue&&(this.cumulativeValue=i.AnimationUtils.clone(e)),this.cumulativeWeight=t);else{var r=t/(this.cumulativeWeight+t);this.cumulativeValue=this.lerpValue(this.cumulativeValue,e,r),this.cumulativeWeight+=t}},unbind:function(){this.isBound&&(this.setValue(this.originalValue),this.setValue=null,this.getValue=null,this.lerpValue=null,this.equalsValue=null,this.triggerDirty=null,this.isBound=!1)},bind:function(){if(!this.isBound){var e=this.node;if(!e)return void console.error("  trying to update node for track: "+this.trackName+" but it wasn't found.");if(this.objectName){if("materials"===this.objectName){if(!e.material)return void console.error("  can not bind to material as node does not have a material",this);if(!e.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);e=e.material.materials}else if("bones"===this.objectName){if(!e.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);e=e.skeleton.bones;for(var t=0;t<e.length;t++)if(e[t].name===this.objectIndex){this.objectIndex=t;break}}else{if(void 0===e[this.objectName])return void console.error("  can not bind to objectName of node, undefined",this);e=e[this.objectName]}if(void 0!==this.objectIndex){if(void 0===e[this.objectIndex])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,e);e=e[this.objectIndex]}}var r=e[this.propertyName];if(!r)return void console.error("  trying to update property for track: "+this.nodeName+"."+this.propertyName+" but it wasn't found.",e);if(void 0!==this.propertyIndex){if("morphTargetInfluences"===this.propertyName){e.geometry||console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this),e.geometry.morphTargets||console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(var t=0;t<this.node.geometry.morphTargets.length;t++)if(e.geometry.morphTargets[t].name===this.propertyIndex){this.propertyIndex=t;break}}this.setValue=function(e){return this.equalsValue(r[this.propertyIndex],e)?!1:(r[this.propertyIndex]=e,!0)},this.getValue=function(){return r[this.propertyIndex]}}else r.copy?(this.setValue=function(e){return this.equalsValue(r,e)?!1:(r.copy(e),!0)},this.getValue=function(){return r}):(this.setValue=function(t){return this.equalsValue(e[this.propertyName],t)?!1:(e[this.propertyName]=t,!0)},this.getValue=function(){return e[this.propertyName]});void 0!==e.needsUpdate?this.triggerDirty=function(){this.node.needsUpdate=!0}:void 0!==e.matrixWorldNeedsUpdate&&(this.triggerDirty=function(){e.matrixWorldNeedsUpdate=!0}),this.originalValue=this.getValue(),this.equalsValue=i.AnimationUtils.getEqualsFunc(this.originalValue),this.lerpValue=i.AnimationUtils.getLerpFunc(this.originalValue,!0),this.isBound=!0}},apply:function(){if(this.isBound||this.bind(),this.cumulativeWeight>0){if(this.cumulativeWeight<1){var e=1-this.cumulativeWeight,t=e/(this.cumulativeWeight+e);this.cumulativeValue=this.lerpValue(this.cumulativeValue,this.originalValue,t)}var r=this.setValue(this.cumulativeValue);r&&this.triggerDirty&&this.triggerDirty(),this.cumulativeValue=null,this.cumulativeWeight=0}}},i.PropertyBinding.parseTrackName=function(e){var t=/^(([\w]+\/)*)([\w-\d]+)?(\.([\w]+)(\[([\w\d\[\]\_. ]+)\])?)?(\.([\w.]+)(\[([\w\d\[\]\_. ]+)\])?)$/,r=t.exec(e);if(!r)throw new Error("cannot parse trackName at all: "+e);r.index===t.lastIndex&&t.lastIndex++;var n={directoryName:r[1],nodeName:r[3],objectName:r[5],objectIndex:r[7],propertyName:r[9],propertyIndex:r[11]};if(null===n.propertyName||0===n.propertyName.length)throw new Error("can not parse propertyName from trackName: "+e);return n},i.PropertyBinding.findNode=function(e,t){function r(e){for(var r=0;r<e.bones.length;r++){var n=e.bones[r];if(n.name===t)return n}return null}function n(e){for(var r=0;r<e.length;r++){var i=e[r];if(i.name===t||i.uuid===t)return i;var o=n(i.children);if(o)return o}return null}if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var i=r(e.skeleton);if(i)return i}if(e.children){var o=n(e.children);if(o)return o}return null},i.VectorKeyframeTrack=function(e,t){i.KeyframeTrack.call(this,e,t),this.result=this.keys[0].value.clone()},i.VectorKeyframeTrack.prototype=Object.create(i.KeyframeTrack.prototype),i.VectorKeyframeTrack.prototype.constructor=i.VectorKeyframeTrack,i.VectorKeyframeTrack.prototype.setResult=function(e){this.result.copy(e)},i.VectorKeyframeTrack.prototype.lerpValues=function(e,t,r){return e.lerp(t,r)},i.VectorKeyframeTrack.prototype.compareValues=function(e,t){return e.equals(t)},i.VectorKeyframeTrack.prototype.clone=function(){for(var e=[],t=0;t<this.keys.length;t++){var r=this.keys[t];e.push({time:r.time,value:r.value.clone()})}return new i.VectorKeyframeTrack(this.name,e)},i.VectorKeyframeTrack.parse=function(e){for(var t=e.keys[0].value.length,r=i["Vector"+t],n=[],o=0;o<e.keys.length;o++){var a=e.keys[o];n.push({value:(new r).fromArray(a.value),time:a.time})}return new i.VectorKeyframeTrack(e.name,n)},i.QuaternionKeyframeTrack=function(e,t){i.KeyframeTrack.call(this,e,t),this.result=this.keys[0].value.clone()},i.QuaternionKeyframeTrack.prototype=Object.create(i.KeyframeTrack.prototype),i.QuaternionKeyframeTrack.prototype.constructor=i.QuaternionKeyframeTrack,i.QuaternionKeyframeTrack.prototype.setResult=function(e){this.result.copy(e)},i.QuaternionKeyframeTrack.prototype.lerpValues=function(e,t,r){return e.slerp(t,r)},i.QuaternionKeyframeTrack.prototype.compareValues=function(e,t){return e.equals(t)},i.QuaternionKeyframeTrack.prototype.multiply=function(e){for(var t=0;t<this.keys.length;t++)this.keys[t].value.multiply(e);return this},i.QuaternionKeyframeTrack.prototype.clone=function(){for(var e=[],t=0;t<this.keys.length;t++){var r=this.keys[t];e.push({time:r.time,value:r.value.clone()})}return new i.QuaternionKeyframeTrack(this.name,e)},i.QuaternionKeyframeTrack.parse=function(e){for(var t=[],r=0;r<e.keys.length;r++){var n=e.keys[r];t.push({value:(new i.Quaternion).fromArray(n.value),time:n.time})}return new i.QuaternionKeyframeTrack(e.name,t)},i.StringKeyframeTrack=function(e,t){i.KeyframeTrack.call(this,e,t),this.result=this.keys[0].value},i.StringKeyframeTrack.prototype=Object.create(i.KeyframeTrack.prototype),i.StringKeyframeTrack.prototype.constructor=i.StringKeyframeTrack,i.StringKeyframeTrack.prototype.setResult=function(e){this.result=e},i.StringKeyframeTrack.prototype.lerpValues=function(e,t,r){return 1>r?e:t},i.StringKeyframeTrack.prototype.compareValues=function(e,t){return e===t},i.StringKeyframeTrack.prototype.clone=function(){for(var e=[],t=0;t<this.keys.length;t++){var r=this.keys[t];e.push({time:r.time,value:r.value})}return new i.StringKeyframeTrack(this.name,e)},i.StringKeyframeTrack.parse=function(e){return new i.StringKeyframeTrack(e.name,e.keys)},i.BooleanKeyframeTrack=function(e,t){i.KeyframeTrack.call(this,e,t),this.result=this.keys[0].value},i.BooleanKeyframeTrack.prototype=Object.create(i.KeyframeTrack.prototype),i.BooleanKeyframeTrack.prototype.constructor=i.BooleanKeyframeTrack,i.BooleanKeyframeTrack.prototype.setResult=function(e){this.result=e},i.BooleanKeyframeTrack.prototype.lerpValues=function(e,t,r){return 1>r?e:t},i.BooleanKeyframeTrack.prototype.compareValues=function(e,t){return e===t},i.BooleanKeyframeTrack.prototype.clone=function(){for(var e=[],t=0;t<this.keys.length;t++){var r=this.keys[t];e.push({time:r.time,value:r.value})}return new i.BooleanKeyframeTrack(this.name,e)},i.BooleanKeyframeTrack.parse=function(e){return new i.BooleanKeyframeTrack(e.name,e.keys)},i.NumberKeyframeTrack=function(e,t){i.KeyframeTrack.call(this,e,t),this.result=this.keys[0].value},i.NumberKeyframeTrack.prototype=Object.create(i.KeyframeTrack.prototype),i.NumberKeyframeTrack.prototype.constructor=i.NumberKeyframeTrack,i.NumberKeyframeTrack.prototype.setResult=function(e){this.result=e},i.NumberKeyframeTrack.prototype.lerpValues=function(e,t,r){return e*(1-r)+t*r},i.NumberKeyframeTrack.prototype.compareValues=function(e,t){return e===t},i.NumberKeyframeTrack.prototype.clone=function(){for(var e=[],t=0;t<this.keys.length;t++){var r=this.keys[t];e.push({time:r.time,value:r.value})}return new i.NumberKeyframeTrack(this.name,e)},i.NumberKeyframeTrack.parse=function(e){return new i.NumberKeyframeTrack(e.name,e.keys)},i.Camera=function(){i.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new i.Matrix4,this.projectionMatrix=new i.Matrix4},i.Camera.prototype=Object.create(i.Object3D.prototype),i.Camera.prototype.constructor=i.Camera,i.Camera.prototype.getWorldDirection=function(){var e=new i.Quaternion;return function(t){var r=t||new i.Vector3;return this.getWorldQuaternion(e),r.set(0,0,-1).applyQuaternion(e)}}(),i.Camera.prototype.lookAt=function(){var e=new i.Matrix4;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),i.Camera.prototype.clone=function(){return(new this.constructor).copy(this)},i.Camera.prototype.copy=function(e){return i.Object3D.prototype.copy.call(this,e),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},i.CubeCamera=function(e,t,r){i.Object3D.call(this),this.type="CubeCamera";var n=90,o=1,a=new i.PerspectiveCamera(n,o,e,t);a.up.set(0,-1,0),a.lookAt(new i.Vector3(1,0,0)),this.add(a);var s=new i.PerspectiveCamera(n,o,e,t);s.up.set(0,-1,0),s.lookAt(new i.Vector3(-1,0,0)),this.add(s);var c=new i.PerspectiveCamera(n,o,e,t);c.up.set(0,0,1),c.lookAt(new i.Vector3(0,1,0)),this.add(c);var h=new i.PerspectiveCamera(n,o,e,t);h.up.set(0,0,-1),h.lookAt(new i.Vector3(0,-1,0)),this.add(h);var u=new i.PerspectiveCamera(n,o,e,t);u.up.set(0,-1,0),u.lookAt(new i.Vector3(0,0,1)),this.add(u);var l=new i.PerspectiveCamera(n,o,e,t);l.up.set(0,-1,0),l.lookAt(new i.Vector3(0,0,-1)),this.add(l),this.renderTarget=new i.WebGLRenderTargetCube(r,r,{format:i.RGBFormat,magFilter:i.LinearFilter,minFilter:i.LinearFilter}),this.updateCubeMap=function(e,t){null===this.parent&&this.updateMatrixWorld();var r=this.renderTarget,n=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,r.activeCubeFace=0,e.render(t,a,r),r.activeCubeFace=1,e.render(t,s,r),r.activeCubeFace=2,e.render(t,c,r),r.activeCubeFace=3,e.render(t,h,r),r.activeCubeFace=4,e.render(t,u,r),r.texture.generateMipmaps=n,r.activeCubeFace=5,e.render(t,l,r),e.setRenderTarget(null)}},i.CubeCamera.prototype=Object.create(i.Object3D.prototype),i.CubeCamera.prototype.constructor=i.CubeCamera,i.OrthographicCamera=function(e,t,r,n,o,a){i.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.left=e,this.right=t,this.top=r,this.bottom=n,this.near=void 0!==o?o:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()},i.OrthographicCamera.prototype=Object.create(i.Camera.prototype),i.OrthographicCamera.prototype.constructor=i.OrthographicCamera,i.OrthographicCamera.prototype.updateProjectionMatrix=function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(r-e,r+e,n+t,n-t,this.near,this.far)},i.OrthographicCamera.prototype.copy=function(e){return i.Camera.prototype.copy.call(this,e),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this},i.OrthographicCamera.prototype.toJSON=function(e){var t=i.Object3D.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,t},i.PerspectiveCamera=function(e,t,r,n){i.Camera.call(this),this.type="PerspectiveCamera",this.zoom=1,this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==r?r:.1,this.far=void 0!==n?n:2e3,this.updateProjectionMatrix()},i.PerspectiveCamera.prototype=Object.create(i.Camera.prototype),i.PerspectiveCamera.prototype.constructor=i.PerspectiveCamera,i.PerspectiveCamera.prototype.setLens=function(e,t){void 0===t&&(t=24),this.fov=2*i.Math.radToDeg(Math.atan(t/(2*e))),this.updateProjectionMatrix()},i.PerspectiveCamera.prototype.setViewOffset=function(e,t,r,n,i,o){this.fullWidth=e,this.fullHeight=t,this.x=r,this.y=n,this.width=i,this.height=o,this.updateProjectionMatrix()},i.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var e=i.Math.radToDeg(2*Math.atan(Math.tan(.5*i.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var t=this.fullWidth/this.fullHeight,r=Math.tan(i.Math.degToRad(.5*e))*this.near,n=-r,o=t*n,a=t*r,s=Math.abs(a-o),c=Math.abs(r-n);this.projectionMatrix.makeFrustum(o+this.x*s/this.fullWidth,o+(this.x+this.width)*s/this.fullWidth,r-(this.y+this.height)*c/this.fullHeight,r-this.y*c/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(e,this.aspect,this.near,this.far)},i.PerspectiveCamera.prototype.copy=function(e){return i.Camera.prototype.copy.call(this,e),this.fov=e.fov,this.aspect=e.aspect,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this},i.PerspectiveCamera.prototype.toJSON=function(e){var t=i.Object3D.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.fov=this.fov,t.object.aspect=this.aspect,t.object.near=this.near,t.object.far=this.far,t},i.Light=function(e){i.Object3D.call(this),this.type="Light",this.color=new i.Color(e),this.receiveShadow=void 0},i.Light.prototype=Object.create(i.Object3D.prototype),i.Light.prototype.constructor=i.Light,Object.defineProperties(i.Light.prototype,{onlyShadow:{set:function(e){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){this.shadow.camera.far=e}},shadowCameraVisible:{set:function(e){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow ) instead.")}},shadowBias:{set:function(e){this.shadow.bias=e}},shadowDarkness:{set:function(e){this.shadow.darkness=e}},shadowMapWidth:{set:function(e){this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){this.shadow.mapSize.height=e}}}),i.Light.prototype.copy=function(e){return i.Object3D.prototype.copy.call(this,e),this.color.copy(e.color),this},i.Light.prototype.toJSON=function(e){var t=i.Object3D.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.intensity&&(t.object.intensity=this.intensity),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.exponent&&(t.object.exponent=this.exponent),t},i.LightShadow=function(e){this.camera=e,this.bias=0,this.darkness=1,this.mapSize=new i.Vector2(512,512),this.map=null,this.matrix=null},i.LightShadow.prototype={constructor:i.LightShadow,copy:function(e){this.camera=e.camera.clone(),this.bias=e.bias,this.darkness=e.darkness,this.mapSize.copy(e.mapSize)},clone:function(){return(new this.constructor).copy(this)}},i.AmbientLight=function(e){i.Light.call(this,e),this.type="AmbientLight",this.castShadow=void 0},i.AmbientLight.prototype=Object.create(i.Light.prototype),i.AmbientLight.prototype.constructor=i.AmbientLight,i.DirectionalLight=function(e,t){i.Light.call(this,e),this.type="DirectionalLight",this.position.set(0,1,0),this.updateMatrix(),this.target=new i.Object3D,this.intensity=void 0!==t?t:1,this.shadow=new i.LightShadow(new i.OrthographicCamera(-500,500,500,-500,50,5e3))},i.DirectionalLight.prototype=Object.create(i.Light.prototype),i.DirectionalLight.prototype.constructor=i.DirectionalLight,i.DirectionalLight.prototype.copy=function(e){return i.Light.prototype.copy.call(this,e),this.intensity=e.intensity,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this},i.HemisphereLight=function(e,t,r){i.Light.call(this,e),this.type="HemisphereLight",this.castShadow=void 0,this.position.set(0,1,0),this.updateMatrix(),this.groundColor=new i.Color(t),this.intensity=void 0!==r?r:1},i.HemisphereLight.prototype=Object.create(i.Light.prototype),i.HemisphereLight.prototype.constructor=i.HemisphereLight,i.HemisphereLight.prototype.copy=function(e){return i.Light.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this.intensity=e.intensity,this},i.PointLight=function(e,t,r,n){i.Light.call(this,e),this.type="PointLight",this.intensity=void 0!==t?t:1,this.distance=void 0!==r?r:0,this.decay=void 0!==n?n:1,this.shadow=new i.LightShadow(new i.PerspectiveCamera(90,1,1,500))},i.PointLight.prototype=Object.create(i.Light.prototype),i.PointLight.prototype.constructor=i.PointLight,i.PointLight.prototype.copy=function(e){return i.Light.prototype.copy.call(this,e),this.intensity=e.intensity,this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this},i.SpotLight=function(e,t,r,n,o,a){i.Light.call(this,e),this.type="SpotLight",this.position.set(0,1,0),this.updateMatrix(),this.target=new i.Object3D,this.intensity=void 0!==t?t:1,this.distance=void 0!==r?r:0,this.angle=void 0!==n?n:Math.PI/3,this.exponent=void 0!==o?o:10,this.decay=void 0!==a?a:1,this.shadow=new i.LightShadow(new i.PerspectiveCamera(50,1,50,5e3))},i.SpotLight.prototype=Object.create(i.Light.prototype),i.SpotLight.prototype.constructor=i.SpotLight,i.SpotLight.prototype.copy=function(e){return i.Light.prototype.copy.call(this,e),this.intensity=e.intensity,this.distance=e.distance,this.angle=e.angle,this.exponent=e.exponent,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this},i.Cache={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){return this.enabled!==!1?this.files[e]:void 0},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},i.Loader=function(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},i.Loader.prototype={constructor:i.Loader,crossOrigin:void 0,extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t,r){for(var n=[],i=0;i<e.length;++i)n[i]=this.createMaterial(e[i],t,r);return n},createMaterial:function(){var e,t,r;return function(n,o,a){function s(e,r,n,s,h){var u,l=o+e,p=i.Loader.Handlers.get(l);null!==p?u=p.load(l):(t.setCrossOrigin(a),u=t.load(l)),void 0!==r&&(u.repeat.fromArray(r),1!==r[0]&&(u.wrapS=i.RepeatWrapping),1!==r[1]&&(u.wrapT=i.RepeatWrapping)),void 0!==n&&u.offset.fromArray(n),void 0!==s&&("repeat"===s[0]&&(u.wrapS=i.RepeatWrapping),"mirror"===s[0]&&(u.wrapS=i.MirroredRepeatWrapping),"repeat"===s[1]&&(u.wrapT=i.RepeatWrapping),"mirror"===s[1]&&(u.wrapT=i.MirroredRepeatWrapping)),void 0!==h&&(u.anisotropy=h);var f=i.Math.generateUUID();return c[f]=u,f}void 0===e&&(e=new i.Color),void 0===t&&(t=new i.TextureLoader),void 0===r&&(r=new i.MaterialLoader);var c={},h={uuid:i.Math.generateUUID(),type:"MeshLambertMaterial"};for(var u in n){var l=n[u];switch(u){case"DbgColor":h.color=l;break;case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":h.name=l;break;case"blending":h.blending=i[l];break;case"colorDiffuse":h.color=e.fromArray(l).getHex();break;case"colorSpecular":h.specular=e.fromArray(l).getHex();break;case"colorEmissive":h.emissive=e.fromArray(l).getHex();break;case"specularCoef":h.shininess=l;break;case"shading":"basic"===l.toLowerCase()&&(h.type="MeshBasicMaterial"),"phong"===l.toLowerCase()&&(h.type="MeshPhongMaterial");break;case"mapDiffuse":h.map=s(l,n.mapDiffuseRepeat,n.mapDiffuseOffset,n.mapDiffuseWrap,n.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapLight":h.lightMap=s(l,n.mapLightRepeat,n.mapLightOffset,n.mapLightWrap,n.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":h.aoMap=s(l,n.mapAORepeat,n.mapAOOffset,n.mapAOWrap,n.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":h.bumpMap=s(l,n.mapBumpRepeat,n.mapBumpOffset,n.mapBumpWrap,n.mapBumpAnisotropy);break;case"mapBumpScale":h.bumpScale=l;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":h.normalMap=s(l,n.mapNormalRepeat,n.mapNormalOffset,n.mapNormalWrap,n.mapNormalAnisotropy);break;case"mapNormalFactor":h.normalScale=[l,l];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":h.specularMap=s(l,n.mapSpecularRepeat,n.mapSpecularOffset,n.mapSpecularWrap,n.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;
case"mapAlpha":h.alphaMap=s(l,n.mapAlphaRepeat,n.mapAlphaOffset,n.mapAlphaWrap,n.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":h.side=i.BackSide;break;case"doubleSided":h.side=i.DoubleSide;break;case"transparency":console.warn("THREE.Loader: transparency has been renamed to opacity"),h.opacity=l;break;case"opacity":case"transparent":case"depthTest":case"depthWrite":case"transparent":case"visible":case"wireframe":h[u]=l;break;case"vertexColors":l===!0&&(h.vertexColors=i.VertexColors),"face"===l&&(h.vertexColors=i.FaceColors);break;default:console.error("Loader.createMaterial: Unsupported",u,l)}}return"MeshPhongMaterial"!==h.type&&delete h.specular,h.opacity<1&&(h.transparent=!0),r.setTextures(c),r.parse(h)}}()},i.Loader.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,r=0,n=t.length;n>r;r+=2){var i=t[r],o=t[r+1];if(i.test(e))return o}return null}},i.XHRLoader=function(e){this.manager=void 0!==e?e:i.DefaultLoadingManager},i.XHRLoader.prototype={constructor:i.XHRLoader,load:function(e,t,r,n){var o=this,a=i.Cache.get(e);if(void 0!==a)return t&&setTimeout(function(){t(a)},0),a;var s=new XMLHttpRequest;return s.open("GET",e,!0),s.addEventListener("load",function(r){var n=r.target.response;i.Cache.add(e,n),t&&t(n),o.manager.itemEnd(e)},!1),void 0!==r&&s.addEventListener("progress",function(e){r(e)},!1),s.addEventListener("error",function(t){n&&n(t),o.manager.itemError(e)},!1),void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.send(null),o.manager.itemStart(e),s},setResponseType:function(e){this.responseType=e},setCrossOrigin:function(e){this.crossOrigin=e},setWithCredentials:function(e){this.withCredentials=e}},i.ImageLoader=function(e){this.manager=void 0!==e?e:i.DefaultLoadingManager},i.ImageLoader.prototype={constructor:i.ImageLoader,load:function(e,t,r,n){var o=this,a=i.Cache.get(e);if(void 0!==a)return o.manager.itemStart(e),t?setTimeout(function(){t(a),o.manager.itemEnd(e)},0):o.manager.itemEnd(e),a;var s=document.createElement("img");return s.addEventListener("load",function(r){i.Cache.add(e,this),t&&t(this),o.manager.itemEnd(e)},!1),void 0!==r&&s.addEventListener("progress",function(e){r(e)},!1),s.addEventListener("error",function(t){n&&n(t),o.manager.itemError(e)},!1),void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),o.manager.itemStart(e),s.src=e,s},setCrossOrigin:function(e){this.crossOrigin=e}},i.JSONLoader=function(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:i.DefaultLoadingManager,this.withCredentials=!1},i.JSONLoader.prototype={constructor:i.JSONLoader,get statusDomElement(){return void 0===this._statusDomElement&&(this._statusDomElement=document.createElement("div")),console.warn("THREE.JSONLoader: .statusDomElement has been removed."),this._statusDomElement},load:function(e,t,r,n){var o=this,a=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:i.Loader.prototype.extractUrlBase(e),s=new i.XHRLoader(this.manager);s.setCrossOrigin(this.crossOrigin),s.setWithCredentials(this.withCredentials),s.load(e,function(r){var n=JSON.parse(r),i=n.metadata;if(void 0!==i){if("object"===i.type)return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");if("scene"===i.type)return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.")}var s=o.parse(n,a);t(s.geometry,s.materials)})},setCrossOrigin:function(e){this.crossOrigin=e},setTexturePath:function(e){this.texturePath=e},parse:function(e,t){function r(t){function r(e,t){return e&1<<t}var n,o,a,c,h,u,l,p,f,d,m,v,g,y,b,x,w,_,S,M,T,E,C,A,k,L,P,R=e.faces,D=e.vertices,O=e.normals,V=e.colors,F=0;if(void 0!==e.uvs){for(n=0;n<e.uvs.length;n++)e.uvs[n].length&&F++;for(n=0;F>n;n++)s.faceVertexUvs[n]=[]}for(c=0,h=D.length;h>c;)_=new i.Vector3,_.x=D[c++]*t,_.y=D[c++]*t,_.z=D[c++]*t,s.vertices.push(_);for(c=0,h=R.length;h>c;)if(d=R[c++],m=r(d,0),v=r(d,1),g=r(d,3),y=r(d,4),b=r(d,5),x=r(d,6),w=r(d,7),m){if(M=new i.Face3,M.a=R[c],M.b=R[c+1],M.c=R[c+3],T=new i.Face3,T.a=R[c+1],T.b=R[c+2],T.c=R[c+3],c+=4,v&&(f=R[c++],M.materialIndex=f,T.materialIndex=f),a=s.faces.length,g)for(n=0;F>n;n++)for(A=e.uvs[n],s.faceVertexUvs[n][a]=[],s.faceVertexUvs[n][a+1]=[],o=0;4>o;o++)p=R[c++],L=A[2*p],P=A[2*p+1],k=new i.Vector2(L,P),2!==o&&s.faceVertexUvs[n][a].push(k),0!==o&&s.faceVertexUvs[n][a+1].push(k);if(y&&(l=3*R[c++],M.normal.set(O[l++],O[l++],O[l]),T.normal.copy(M.normal)),b)for(n=0;4>n;n++)l=3*R[c++],C=new i.Vector3(O[l++],O[l++],O[l]),2!==n&&M.vertexNormals.push(C),0!==n&&T.vertexNormals.push(C);if(x&&(u=R[c++],E=V[u],M.color.setHex(E),T.color.setHex(E)),w)for(n=0;4>n;n++)u=R[c++],E=V[u],2!==n&&M.vertexColors.push(new i.Color(E)),0!==n&&T.vertexColors.push(new i.Color(E));s.faces.push(M),s.faces.push(T)}else{if(S=new i.Face3,S.a=R[c++],S.b=R[c++],S.c=R[c++],v&&(f=R[c++],S.materialIndex=f),a=s.faces.length,g)for(n=0;F>n;n++)for(A=e.uvs[n],s.faceVertexUvs[n][a]=[],o=0;3>o;o++)p=R[c++],L=A[2*p],P=A[2*p+1],k=new i.Vector2(L,P),s.faceVertexUvs[n][a].push(k);if(y&&(l=3*R[c++],S.normal.set(O[l++],O[l++],O[l])),b)for(n=0;3>n;n++)l=3*R[c++],C=new i.Vector3(O[l++],O[l++],O[l]),S.vertexNormals.push(C);if(x&&(u=R[c++],S.color.setHex(V[u])),w)for(n=0;3>n;n++)u=R[c++],S.vertexColors.push(new i.Color(V[u]));s.faces.push(S)}}function n(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,n=e.skinWeights.length;n>r;r+=t){var o=e.skinWeights[r],a=t>1?e.skinWeights[r+1]:0,c=t>2?e.skinWeights[r+2]:0,h=t>3?e.skinWeights[r+3]:0;s.skinWeights.push(new i.Vector4(o,a,c,h))}if(e.skinIndices)for(var r=0,n=e.skinIndices.length;n>r;r+=t){var u=e.skinIndices[r],l=t>1?e.skinIndices[r+1]:0,p=t>2?e.skinIndices[r+2]:0,f=t>3?e.skinIndices[r+3]:0;s.skinIndices.push(new i.Vector4(u,l,p,f))}s.bones=e.bones,s.bones&&s.bones.length>0&&(s.skinWeights.length!==s.skinIndices.length||s.skinIndices.length!==s.vertices.length)&&console.warn("When skinning, number of vertices ("+s.vertices.length+"), skinIndices ("+s.skinIndices.length+"), and skinWeights ("+s.skinWeights.length+") should match.")}function o(t){if(void 0!==e.morphTargets)for(var r=0,n=e.morphTargets.length;n>r;r++){s.morphTargets[r]={},s.morphTargets[r].name=e.morphTargets[r].name,s.morphTargets[r].vertices=[];for(var o=s.morphTargets[r].vertices,a=e.morphTargets[r].vertices,c=0,h=a.length;h>c;c+=3){var u=new i.Vector3;u.x=a[c]*t,u.y=a[c+1]*t,u.z=a[c+2]*t,o.push(u)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var l=s.faces,p=e.morphColors[0].colors,r=0,n=l.length;n>r;r++)l[r].color.fromArray(p,3*r)}}function a(){var t=[],r=[];void 0!==e.animation&&r.push(e.animation),void 0!==e.animations&&(e.animations.length?r=r.concat(e.animations):r.push(e.animations));for(var n=0;n<r.length;n++){var o=i.AnimationClip.parseAnimation(r[n],s.bones);o&&t.push(o)}if(s.morphTargets){var a=i.AnimationClip.CreateClipsFromMorphTargetSequences(s.morphTargets,10);t=t.concat(a)}t.length>0&&(s.animations=t)}var s=new i.Geometry,c=void 0!==e.scale?1/e.scale:1;if(r(c),n(),o(c),a(),s.computeFaceNormals(),s.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:s};var h=i.Loader.prototype.initMaterials(e.materials,t,this.crossOrigin);return{geometry:s,materials:h}}},i.LoadingManager=function(e,t,r){var n=this,i=!1,o=0,a=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(e){a++,i===!1&&void 0!==n.onStart&&n.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==n.onProgress&&n.onProgress(e,o,a),o===a&&(i=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)}},i.DefaultLoadingManager=new i.LoadingManager,i.BufferGeometryLoader=function(e){this.manager=void 0!==e?e:i.DefaultLoadingManager},i.BufferGeometryLoader.prototype={constructor:i.BufferGeometryLoader,load:function(e,t,r,n){var o=this,a=new i.XHRLoader(o.manager);a.setCrossOrigin(this.crossOrigin),a.load(e,function(e){t(o.parse(JSON.parse(e)))},r,n)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new i.BufferGeometry,r=e.data.index;if(void 0!==r){var o=new n[r.type](r.array);t.setIndex(new i.BufferAttribute(o,1))}var a=e.data.attributes;for(var s in a){var c=a[s],o=new n[c.type](c.array);t.addAttribute(s,new i.BufferAttribute(o,c.itemSize))}var h=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==h)for(var u=0,l=h.length;u!==l;++u){var p=h[u];t.addGroup(p.start,p.count)}var f=e.data.boundingSphere;if(void 0!==f){var d=new i.Vector3;void 0!==f.center&&d.fromArray(f.center),t.boundingSphere=new i.Sphere(d,f.radius)}return t}},i.MaterialLoader=function(e){this.manager=void 0!==e?e:i.DefaultLoadingManager,this.textures={}},i.MaterialLoader.prototype={constructor:i.MaterialLoader,load:function(e,t,r,n){var o=this,a=new i.XHRLoader(o.manager);a.setCrossOrigin(this.crossOrigin),a.load(e,function(e){t(o.parse(JSON.parse(e)))},r,n)},setCrossOrigin:function(e){this.crossOrigin=e},setTextures:function(e){this.textures=e},getTexture:function(e){var t=this.textures;return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]},parse:function(e){var t=new i[e.type];if(t.uuid=e.uuid,void 0!==e.name&&(t.name=e.name),void 0!==e.color&&t.color.setHex(e.color),void 0!==e.emissive&&t.emissive.setHex(e.emissive),void 0!==e.specular&&t.specular.setHex(e.specular),void 0!==e.shininess&&(t.shininess=e.shininess),void 0!==e.uniforms&&(t.uniforms=e.uniforms),void 0!==e.vertexShader&&(t.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(t.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(t.vertexColors=e.vertexColors),void 0!==e.shading&&(t.shading=e.shading),void 0!==e.blending&&(t.blending=e.blending),void 0!==e.side&&(t.side=e.side),void 0!==e.opacity&&(t.opacity=e.opacity),void 0!==e.transparent&&(t.transparent=e.transparent),void 0!==e.alphaTest&&(t.alphaTest=e.alphaTest),void 0!==e.depthTest&&(t.depthTest=e.depthTest),void 0!==e.depthWrite&&(t.depthWrite=e.depthWrite),void 0!==e.wireframe&&(t.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(t.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.size&&(t.size=e.size),void 0!==e.sizeAttenuation&&(t.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(t.map=this.getTexture(e.map)),void 0!==e.alphaMap&&(t.alphaMap=this.getTexture(e.alphaMap),t.transparent=!0),void 0!==e.bumpMap&&(t.bumpMap=this.getTexture(e.bumpMap)),void 0!==e.bumpScale&&(t.bumpScale=e.bumpScale),void 0!==e.normalMap&&(t.normalMap=this.getTexture(e.normalMap)),e.normalScale&&(t.normalScale=new i.Vector2(e.normalScale,e.normalScale)),void 0!==e.displacementMap&&(t.displacementMap=this.getTexture(e.displacementMap)),void 0!==e.displacementScale&&(t.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(t.displacementBias=e.displacementBias),void 0!==e.specularMap&&(t.specularMap=this.getTexture(e.specularMap)),void 0!==e.envMap&&(t.envMap=this.getTexture(e.envMap),t.combine=i.MultiplyOperation),e.reflectivity&&(t.reflectivity=e.reflectivity),void 0!==e.lightMap&&(t.lightMap=this.getTexture(e.lightMap)),void 0!==e.lightMapIntensity&&(t.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(t.aoMap=this.getTexture(e.aoMap)),void 0!==e.aoMapIntensity&&(t.aoMapIntensity=e.aoMapIntensity),void 0!==e.materials)for(var r=0,n=e.materials.length;n>r;r++)t.materials.push(this.parse(e.materials[r]));return t}},i.ObjectLoader=function(e){this.manager=void 0!==e?e:i.DefaultLoadingManager,this.texturePath=""},i.ObjectLoader.prototype={constructor:i.ObjectLoader,load:function(e,t,r,n){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var o=this,a=new i.XHRLoader(o.manager);a.setCrossOrigin(this.crossOrigin),a.load(e,function(e){o.parse(JSON.parse(e),t)},r,n)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var r=this.parseGeometries(e.geometries),n=this.parseImages(e.images,function(){void 0!==t&&t(a)}),i=this.parseTextures(e.textures,n),o=this.parseMaterials(e.materials,i),a=this.parseObject(e.object,r,o);return e.animations&&(a.animations=this.parseAnimations(e.animations)),(void 0===e.images||0===e.images.length)&&void 0!==t&&t(a),a},parseGeometries:function(e){var t={};if(void 0!==e)for(var r=new i.JSONLoader,n=new i.BufferGeometryLoader,o=0,a=e.length;a>o;o++){var s,c=e[o];switch(c.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new i[c.type](c.width,c.height,c.widthSegments,c.heightSegments);break;case"BoxGeometry":case"CubeGeometry":s=new i.BoxGeometry(c.width,c.height,c.depth,c.widthSegments,c.heightSegments,c.depthSegments);break;case"CircleBufferGeometry":s=new i.CircleBufferGeometry(c.radius,c.segments,c.thetaStart,c.thetaLength);break;case"CircleGeometry":s=new i.CircleGeometry(c.radius,c.segments,c.thetaStart,c.thetaLength);break;case"CylinderGeometry":s=new i.CylinderGeometry(c.radiusTop,c.radiusBottom,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"SphereGeometry":s=new i.SphereGeometry(c.radius,c.widthSegments,c.heightSegments,c.phiStart,c.phiLength,c.thetaStart,c.thetaLength);break;case"SphereBufferGeometry":s=new i.SphereBufferGeometry(c.radius,c.widthSegments,c.heightSegments,c.phiStart,c.phiLength,c.thetaStart,c.thetaLength);break;case"DodecahedronGeometry":s=new i.DodecahedronGeometry(c.radius,c.detail);break;case"IcosahedronGeometry":s=new i.IcosahedronGeometry(c.radius,c.detail);break;case"OctahedronGeometry":s=new i.OctahedronGeometry(c.radius,c.detail);break;case"TetrahedronGeometry":s=new i.TetrahedronGeometry(c.radius,c.detail);break;case"RingGeometry":s=new i.RingGeometry(c.innerRadius,c.outerRadius,c.thetaSegments,c.phiSegments,c.thetaStart,c.thetaLength);break;case"TorusGeometry":s=new i.TorusGeometry(c.radius,c.tube,c.radialSegments,c.tubularSegments,c.arc);break;case"TorusKnotGeometry":s=new i.TorusKnotGeometry(c.radius,c.tube,c.radialSegments,c.tubularSegments,c.p,c.q,c.heightScale);break;case"BufferGeometry":s=n.parse(c);break;case"Geometry":s=r.parse(c.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+c.type+'"');continue}s.uuid=c.uuid,void 0!==c.name&&(s.name=c.name),t[c.uuid]=s}return t},parseMaterials:function(e,t){var r={};if(void 0!==e){var n=new i.MaterialLoader;n.setTextures(t);for(var o=0,a=e.length;a>o;o++){var s=n.parse(e[o]);r[s.uuid]=s}}return r},parseAnimations:function(e){for(var t=[],r=0;r<e.length;r++){var n=i.AnimationClip.parse(e[r]);t.push(n)}return t},parseImages:function(e,t){function r(e){return n.manager.itemStart(e),s.load(e,function(){n.manager.itemEnd(e)})}var n=this,o={};if(void 0!==e&&e.length>0){var a=new i.LoadingManager(t),s=new i.ImageLoader(a);s.setCrossOrigin(this.crossOrigin);for(var c=0,h=e.length;h>c;c++){var u=e[c],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:n.texturePath+u.url;o[u.uuid]=r(l)}}return o},parseTextures:function(e,t){function r(e){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),i[e])}var n={};if(void 0!==e)for(var o=0,a=e.length;a>o;o++){var s=e[o];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var c=new i.Texture(t[s.image]);c.needsUpdate=!0,c.uuid=s.uuid,void 0!==s.name&&(c.name=s.name),void 0!==s.mapping&&(c.mapping=r(s.mapping)),void 0!==s.offset&&(c.offset=new i.Vector2(s.offset[0],s.offset[1])),void 0!==s.repeat&&(c.repeat=new i.Vector2(s.repeat[0],s.repeat[1])),void 0!==s.minFilter&&(c.minFilter=r(s.minFilter)),void 0!==s.magFilter&&(c.magFilter=r(s.magFilter)),void 0!==s.anisotropy&&(c.anisotropy=s.anisotropy),Array.isArray(s.wrap)&&(c.wrapS=r(s.wrap[0]),c.wrapT=r(s.wrap[1])),n[s.uuid]=c}return n},parseObject:function(){var e=new i.Matrix4;return function(t,r,n){function o(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),r[e]}function a(e){return void 0!==e?(void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]):void 0}var s;switch(t.type){case"Scene":s=new i.Scene;break;case"PerspectiveCamera":s=new i.PerspectiveCamera(t.fov,t.aspect,t.near,t.far);break;case"OrthographicCamera":s=new i.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":s=new i.AmbientLight(t.color);break;case"DirectionalLight":s=new i.DirectionalLight(t.color,t.intensity);break;case"PointLight":s=new i.PointLight(t.color,t.intensity,t.distance,t.decay);break;case"SpotLight":s=new i.SpotLight(t.color,t.intensity,t.distance,t.angle,t.exponent,t.decay);break;case"HemisphereLight":s=new i.HemisphereLight(t.color,t.groundColor,t.intensity);break;case"Mesh":s=new i.Mesh(o(t.geometry),a(t.material));break;case"LOD":s=new i.LOD;break;case"Line":s=new i.Line(o(t.geometry),a(t.material),t.mode);break;case"PointCloud":case"Points":s=new i.Points(o(t.geometry),a(t.material));break;case"Sprite":s=new i.Sprite(a(t.material));break;case"Group":s=new i.Group;break;default:s=new i.Object3D}if(s.uuid=t.uuid,void 0!==t.name&&(s.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(s.position,s.quaternion,s.scale)):(void 0!==t.position&&s.position.fromArray(t.position),void 0!==t.rotation&&s.rotation.fromArray(t.rotation),void 0!==t.scale&&s.scale.fromArray(t.scale)),void 0!==t.castShadow&&(s.castShadow=t.castShadow),void 0!==t.receiveShadow&&(s.receiveShadow=t.receiveShadow),void 0!==t.visible&&(s.visible=t.visible),void 0!==t.userData&&(s.userData=t.userData),void 0!==t.children)for(var c in t.children)s.add(this.parseObject(t.children[c],r,n));if("LOD"===t.type)for(var h=t.levels,u=0;u<h.length;u++){var l=h[u],c=s.getObjectByProperty("uuid",l.object);void 0!==c&&s.addLevel(c,l.distance)}return s}}()},i.TextureLoader=function(e){this.manager=void 0!==e?e:i.DefaultLoadingManager},i.TextureLoader.prototype={constructor:i.TextureLoader,load:function(e,t,r,n){var o=new i.Texture,a=new i.ImageLoader(this.manager);return a.setCrossOrigin(this.crossOrigin),a.load(e,function(e){o.image=e,o.needsUpdate=!0,void 0!==t&&t(o)},r,n),o},setCrossOrigin:function(e){this.crossOrigin=e}},i.CubeTextureLoader=function(e){this.manager=void 0!==e?e:i.DefaultLoadingManager},i.CubeTextureLoader.prototype={constructor:i.CubeTextureLoader,load:function(e,t,r,n){function o(r){s.load(e[r],function(e){a.images[r]=e,c++,6===c&&(a.needsUpdate=!0,t&&t(a))},void 0,n)}var a=new i.CubeTexture([]),s=new i.ImageLoader;s.setCrossOrigin(this.crossOrigin);for(var c=0,h=0;h<e.length;++h)o(h);return a},setCrossOrigin:function(e){this.crossOrigin=e}},i.DataTextureLoader=i.BinaryTextureLoader=function(e){this.manager=void 0!==e?e:i.DefaultLoadingManager,this._parser=null},i.BinaryTextureLoader.prototype={constructor:i.BinaryTextureLoader,load:function(e,t,r,n){var o=this,a=new i.DataTexture,s=new i.XHRLoader(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setResponseType("arraybuffer"),s.load(e,function(e){var r=o._parser(e);r&&(void 0!==r.image?a.image=r.image:void 0!==r.data&&(a.image.width=r.width,a.image.height=r.height,a.image.data=r.data),a.wrapS=void 0!==r.wrapS?r.wrapS:i.ClampToEdgeWrapping,a.wrapT=void 0!==r.wrapT?r.wrapT:i.ClampToEdgeWrapping,a.magFilter=void 0!==r.magFilter?r.magFilter:i.LinearFilter,a.minFilter=void 0!==r.minFilter?r.minFilter:i.LinearMipMapLinearFilter,a.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,void 0!==r.format&&(a.format=r.format),void 0!==r.type&&(a.type=r.type),void 0!==r.mipmaps&&(a.mipmaps=r.mipmaps),1===r.mipmapCount&&(a.minFilter=i.LinearFilter),a.needsUpdate=!0,t&&t(a,r))},r,n),a},setCrossOrigin:function(e){this.crossOrigin=e}},i.CompressedTextureLoader=function(e){this.manager=void 0!==e?e:i.DefaultLoadingManager,this._parser=null},i.CompressedTextureLoader.prototype={constructor:i.CompressedTextureLoader,load:function(e,t,r,n){var o=this,a=[],s=new i.CompressedTexture;s.image=a;var c=new i.XHRLoader(this.manager);if(c.setCrossOrigin(this.crossOrigin),c.setResponseType("arraybuffer"),Array.isArray(e))for(var h=0,u=function(u){c.load(e[u],function(e){var r=o._parser(e,!0);a[u]={width:r.width,height:r.height,format:r.format,mipmaps:r.mipmaps},h+=1,6===h&&(1===r.mipmapCount&&(s.minFilter=i.LinearFilter),s.format=r.format,s.needsUpdate=!0,t&&t(s))},r,n)},l=0,p=e.length;p>l;++l)u(l);else c.load(e,function(e){var r=o._parser(e,!0);if(r.isCubemap)for(var n=r.mipmaps.length/r.mipmapCount,c=0;n>c;c++){a[c]={mipmaps:[]};for(var h=0;h<r.mipmapCount;h++)a[c].mipmaps.push(r.mipmaps[c*r.mipmapCount+h]),a[c].format=r.format,a[c].width=r.width,a[c].height=r.height}else s.image.width=r.width,s.image.height=r.height,s.mipmaps=r.mipmaps;1===r.mipmapCount&&(s.minFilter=i.LinearFilter),s.format=r.format,s.needsUpdate=!0,t&&t(s)},r,n);return s},setCrossOrigin:function(e){this.crossOrigin=e}},i.Material=function(){Object.defineProperty(this,"id",{value:i.MaterialIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.type="Material",this.side=i.FrontSide,this.opacity=1,this.transparent=!1,this.blending=i.NormalBlending,this.blendSrc=i.SrcAlphaFactor,this.blendDst=i.OneMinusSrcAlphaFactor,this.blendEquation=i.AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=i.LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.overdraw=0,this.visible=!0,this._needsUpdate=!0},i.Material.prototype={constructor:i.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){e===!0&&this.update(),this._needsUpdate=e},setValues:function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r){var n=this[t];void 0!==n?n instanceof i.Color?n.set(r):n instanceof i.Vector3&&r instanceof i.Vector3?n.copy(r):"overdraw"===t?this[t]=Number(r):this[t]=r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};return t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),this.color instanceof i.Color&&(t.color=this.color.getHex()),this.emissive instanceof i.Color&&(t.emissive=this.emissive.getHex()),this.specular instanceof i.Color&&(t.specular=this.specular.getHex()),void 0!==this.shininess&&(t.shininess=this.shininess),this.map instanceof i.Texture&&(t.map=this.map.toJSON(e).uuid),this.alphaMap instanceof i.Texture&&(t.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap instanceof i.Texture&&(t.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap instanceof i.Texture&&(t.bumpMap=this.bumpMap.toJSON(e).uuid,t.bumpScale=this.bumpScale),this.normalMap instanceof i.Texture&&(t.normalMap=this.normalMap.toJSON(e).uuid,t.normalScale=this.normalScale),this.displacementMap instanceof i.Texture&&(t.displacementMap=this.displacementMap.toJSON(e).uuid,t.displacementScale=this.displacementScale,t.displacementBias=this.displacementBias),this.specularMap instanceof i.Texture&&(t.specularMap=this.specularMap.toJSON(e).uuid),this.envMap instanceof i.Texture&&(t.envMap=this.envMap.toJSON(e).uuid,t.reflectivity=this.reflectivity),void 0!==this.size&&(t.size=this.size),void 0!==this.sizeAttenuation&&(t.sizeAttenuation=this.sizeAttenuation),void 0!==this.vertexColors&&this.vertexColors!==i.NoColors&&(t.vertexColors=this.vertexColors),void 0!==this.shading&&this.shading!==i.SmoothShading&&(t.shading=this.shading),void 0!==this.blending&&this.blending!==i.NormalBlending&&(t.blending=this.blending),void 0!==this.side&&this.side!==i.FrontSide&&(t.side=this.side),this.opacity<1&&(t.opacity=this.opacity),this.transparent===!0&&(t.transparent=this.transparent),this.alphaTest>0&&(t.alphaTest=this.alphaTest),this.wireframe===!0&&(t.wireframe=this.wireframe),this.wireframeLinewidth>1&&(t.wireframeLinewidth=this.wireframeLinewidth),t},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.side=e.side,this.opacity=e.opacity,this.transparent=e.transparent,this.blending=e.blending,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.alphaTest=e.alphaTest,this.overdraw=e.overdraw,this.visible=e.visible,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})},get wrapAround(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set wrapAround(e){console.warn("THREE."+this.type+": .wrapAround has been removed.")},get wrapRGB(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new i.Color}},i.EventDispatcher.prototype.apply(i.Material.prototype),i.MaterialIdCount=0,i.LineBasicMaterial=function(e){i.Material.call(this),this.type="LineBasicMaterial",this.color=new i.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=i.NoColors,this.fog=!0,this.setValues(e)},i.LineBasicMaterial.prototype=Object.create(i.Material.prototype),i.LineBasicMaterial.prototype.constructor=i.LineBasicMaterial,i.LineBasicMaterial.prototype.copy=function(e){return i.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.vertexColors=e.vertexColors,this.fog=e.fog,this},i.LineDashedMaterial=function(e){i.Material.call(this),this.type="LineDashedMaterial",this.color=new i.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(e)},i.LineDashedMaterial.prototype=Object.create(i.Material.prototype),i.LineDashedMaterial.prototype.constructor=i.LineDashedMaterial,i.LineDashedMaterial.prototype.copy=function(e){return i.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this.vertexColors=e.vertexColors,this.fog=e.fog,this},i.MeshBasicMaterial=function(e){i.Material.call(this),this.type="MeshBasicMaterial",this.color=new i.Color(16777215),this.map=null,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=i.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=i.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(e)},i.MeshBasicMaterial.prototype=Object.create(i.Material.prototype),i.MeshBasicMaterial.prototype.constructor=i.MeshBasicMaterial,i.MeshBasicMaterial.prototype.copy=function(e){return i.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.fog=e.fog,this.shading=e.shading,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.vertexColors=e.vertexColors,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},i.MeshLambertMaterial=function(e){i.Material.call(this),this.type="MeshLambertMaterial",this.color=new i.Color(16777215),this.emissive=new i.Color(0),this.map=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=i.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},i.MeshLambertMaterial.prototype=Object.create(i.Material.prototype),i.MeshLambertMaterial.prototype.constructor=i.MeshLambertMaterial,i.MeshLambertMaterial.prototype.copy=function(e){return i.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.emissive.copy(e.emissive),this.map=e.map,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.fog=e.fog,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.vertexColors=e.vertexColors,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},i.MeshPhongMaterial=function(e){i.Material.call(this),this.type="MeshPhongMaterial",this.color=new i.Color(16777215),this.emissive=new i.Color(0),this.specular=new i.Color(1118481),this.shininess=30,this.metal=!1,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=i.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=i.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},i.MeshPhongMaterial.prototype=Object.create(i.Material.prototype),i.MeshPhongMaterial.prototype.constructor=i.MeshPhongMaterial,i.MeshPhongMaterial.prototype.copy=function(e){return i.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.emissive.copy(e.emissive),this.specular.copy(e.specular),this.shininess=e.shininess,this.metal=e.metal,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissiveMap=e.emissiveMap,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.fog=e.fog,this.shading=e.shading,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.vertexColors=e.vertexColors,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},i.MeshDepthMaterial=function(e){i.Material.call(this),this.type="MeshDepthMaterial",this.morphTargets=!1,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)},i.MeshDepthMaterial.prototype=Object.create(i.Material.prototype),i.MeshDepthMaterial.prototype.constructor=i.MeshDepthMaterial,i.MeshDepthMaterial.prototype.copy=function(e){return i.Material.prototype.copy.call(this,e),
this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},i.MeshNormalMaterial=function(e){i.Material.call(this,e),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(e)},i.MeshNormalMaterial.prototype=Object.create(i.Material.prototype),i.MeshNormalMaterial.prototype.constructor=i.MeshNormalMaterial,i.MeshNormalMaterial.prototype.copy=function(e){return i.Material.prototype.copy.call(this,e),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},i.MultiMaterial=function(e){this.uuid=i.Math.generateUUID(),this.type="MultiMaterial",this.materials=e instanceof Array?e:[],this.visible=!0},i.MultiMaterial.prototype={constructor:i.MultiMaterial,toJSON:function(){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},t=0,r=this.materials.length;r>t;t++)e.materials.push(this.materials[t].toJSON());return e.visible=this.visible,e},clone:function(){for(var e=new this.constructor,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e.visible=this.visible,e}},i.MeshFaceMaterial=i.MultiMaterial,i.PointsMaterial=function(e){i.Material.call(this),this.type="PointsMaterial",this.color=new i.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=i.NoColors,this.fog=!0,this.setValues(e)},i.PointsMaterial.prototype=Object.create(i.Material.prototype),i.PointsMaterial.prototype.constructor=i.PointsMaterial,i.PointsMaterial.prototype.copy=function(e){return i.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.vertexColors=e.vertexColors,this.fog=e.fog,this},i.PointCloudMaterial=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new i.PointsMaterial(e)},i.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new i.PointsMaterial(e)},i.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new i.PointsMaterial(e)},i.ShaderMaterial=function(e){i.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=i.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.vertexColors=i.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.derivatives=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))},i.ShaderMaterial.prototype=Object.create(i.Material.prototype),i.ShaderMaterial.prototype.constructor=i.ShaderMaterial,i.ShaderMaterial.prototype.copy=function(e){return i.Material.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=i.UniformsUtils.clone(e.uniforms),this.attributes=e.attributes,this.defines=e.defines,this.shading=e.shading,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.vertexColors=e.vertexColors,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.derivatives=e.derivatives,this},i.ShaderMaterial.prototype.toJSON=function(e){var t=i.Material.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.attributes=this.attributes,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},i.RawShaderMaterial=function(e){i.ShaderMaterial.call(this,e),this.type="RawShaderMaterial"},i.RawShaderMaterial.prototype=Object.create(i.ShaderMaterial.prototype),i.RawShaderMaterial.prototype.constructor=i.RawShaderMaterial,i.SpriteMaterial=function(e){i.Material.call(this),this.type="SpriteMaterial",this.color=new i.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(e)},i.SpriteMaterial.prototype=Object.create(i.Material.prototype),i.SpriteMaterial.prototype.constructor=i.SpriteMaterial,i.SpriteMaterial.prototype.copy=function(e){return i.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.fog=e.fog,this},i.Texture=function(e,t,r,n,o,a,s,c,h){Object.defineProperty(this,"id",{value:i.TextureIdCount++}),this.uuid=i.Math.generateUUID(),this.name="",this.sourceFile="",this.image=void 0!==e?e:i.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:i.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:i.ClampToEdgeWrapping,this.wrapT=void 0!==n?n:i.ClampToEdgeWrapping,this.magFilter=void 0!==o?o:i.LinearFilter,this.minFilter=void 0!==a?a:i.LinearMipMapLinearFilter,this.anisotropy=void 0!==h?h:1,this.format=void 0!==s?s:i.RGBAFormat,this.type=void 0!==c?c:i.UnsignedByteType,this.offset=new i.Vector2(0,0),this.repeat=new i.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.version=0,this.onUpdate=null},i.Texture.DEFAULT_IMAGE=void 0,i.Texture.DEFAULT_MAPPING=i.UVMapping,i.Texture.prototype={constructor:i.Texture,set needsUpdate(e){e===!0&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this},toJSON:function(e){function t(e){var t;return void 0!==e.toDataURL?t=e:(t=document.createElement("canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height)),t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];var r={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy};if(void 0!==this.image){var n=this.image;void 0===n.uuid&&(n.uuid=i.Math.generateUUID()),void 0===e.images[n.uuid]&&(e.images[n.uuid]={uuid:n.uuid,url:t(n)}),r.image=n.uuid}return e.textures[this.uuid]=r,r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===i.UVMapping){if(e.multiply(this.repeat),e.add(this.offset),e.x<0||e.x>1)switch(this.wrapS){case i.RepeatWrapping:e.x=e.x-Math.floor(e.x);break;case i.ClampToEdgeWrapping:e.x=e.x<0?0:1;break;case i.MirroredRepeatWrapping:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case i.RepeatWrapping:e.y=e.y-Math.floor(e.y);break;case i.ClampToEdgeWrapping:e.y=e.y<0?0:1;break;case i.MirroredRepeatWrapping:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}},i.EventDispatcher.prototype.apply(i.Texture.prototype),i.TextureIdCount=0,i.CanvasTexture=function(e,t,r,n,o,a,s,c,h){i.Texture.call(this,e,t,r,n,o,a,s,c,h),this.needsUpdate=!0},i.CanvasTexture.prototype=Object.create(i.Texture.prototype),i.CanvasTexture.prototype.constructor=i.CanvasTexture,i.CubeTexture=function(e,t,r,n,o,a,s,c,h){t=void 0!==t?t:i.CubeReflectionMapping,i.Texture.call(this,e,t,r,n,o,a,s,c,h),this.images=e,this.flipY=!1},i.CubeTexture.prototype=Object.create(i.Texture.prototype),i.CubeTexture.prototype.constructor=i.CubeTexture,i.CubeTexture.prototype.copy=function(e){return i.Texture.prototype.copy.call(this,e),this.images=e.images,this},i.CompressedTexture=function(e,t,r,n,o,a,s,c,h,u,l){i.Texture.call(this,null,a,s,c,h,u,n,o,l),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1},i.CompressedTexture.prototype=Object.create(i.Texture.prototype),i.CompressedTexture.prototype.constructor=i.CompressedTexture,i.DataTexture=function(e,t,r,n,o,a,s,c,h,u,l){i.Texture.call(this,null,a,s,c,h,u,n,o,l),this.image={data:e,width:t,height:r},this.magFilter=void 0!==h?h:i.NearestFilter,this.minFilter=void 0!==u?u:i.NearestFilter,this.flipY=!1,this.generateMipmaps=!1},i.DataTexture.prototype=Object.create(i.Texture.prototype),i.DataTexture.prototype.constructor=i.DataTexture,i.VideoTexture=function(e,t,r,n,o,a,s,c,h){function u(){requestAnimationFrame(u),e.readyState===e.HAVE_ENOUGH_DATA&&(l.needsUpdate=!0)}i.Texture.call(this,e,t,r,n,o,a,s,c,h),this.generateMipmaps=!1;var l=this;u()},i.VideoTexture.prototype=Object.create(i.Texture.prototype),i.VideoTexture.prototype.constructor=i.VideoTexture,i.Group=function(){i.Object3D.call(this),this.type="Group"},i.Group.prototype=Object.create(i.Object3D.prototype),i.Group.prototype.constructor=i.Group,i.Points=function(e,t){i.Object3D.call(this),this.type="Points",this.geometry=void 0!==e?e:new i.Geometry,this.material=void 0!==t?t:new i.PointsMaterial({color:16777215*Math.random()})},i.Points.prototype=Object.create(i.Object3D.prototype),i.Points.prototype.constructor=i.Points,i.Points.prototype.raycast=function(){var e=new i.Matrix4,t=new i.Ray;return function(r,n){function o(e,i){var o=t.distanceSqToPoint(e);if(u>o){var s=t.closestPointToPoint(e);s.applyMatrix4(a.matrixWorld);var c=r.ray.origin.distanceTo(s);if(c<r.near||c>r.far)return;n.push({distance:c,distanceToRay:Math.sqrt(o),point:s.clone(),index:i,face:null,object:a})}}var a=this,s=a.geometry,c=r.params.Points.threshold;if(e.getInverse(this.matrixWorld),t.copy(r.ray).applyMatrix4(e),null===s.boundingBox||t.isIntersectionBox(s.boundingBox)!==!1){var h=c/((this.scale.x+this.scale.y+this.scale.z)/3),u=h*h,l=new i.Vector3;if(s instanceof i.BufferGeometry){var p=s.index,f=s.attributes,d=f.position.array;if(null!==p)for(var m=p.array,v=0,g=m.length;g>v;v++){var y=m[v];l.fromArray(d,3*y),o(l,y)}else for(var v=0,b=d.length/3;b>v;v++)l.fromArray(d,3*v),o(l,v)}else for(var x=s.vertices,v=0,b=x.length;b>v;v++)o(x[v],v)}}}(),i.Points.prototype.clone=function(){return new this.constructor(this.geometry,this.material).copy(this)},i.PointCloud=function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new i.Points(e,t)},i.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new i.Points(e,t)},i.Line=function(e,t,r){return 1===r?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new i.LineSegments(e,t)):(i.Object3D.call(this),this.type="Line",this.geometry=void 0!==e?e:new i.Geometry,void(this.material=void 0!==t?t:new i.LineBasicMaterial({color:16777215*Math.random()})))},i.Line.prototype=Object.create(i.Object3D.prototype),i.Line.prototype.constructor=i.Line,i.Line.prototype.raycast=function(){var e=new i.Matrix4,t=new i.Ray,r=new i.Sphere;return function(n,o){var a=n.linePrecision,s=a*a,c=this.geometry;if(null===c.boundingSphere&&c.computeBoundingSphere(),r.copy(c.boundingSphere),r.applyMatrix4(this.matrixWorld),n.ray.isIntersectionSphere(r)!==!1){e.getInverse(this.matrixWorld),t.copy(n.ray).applyMatrix4(e);var h=new i.Vector3,u=new i.Vector3,l=new i.Vector3,p=new i.Vector3,f=this instanceof i.LineSegments?2:1;if(c instanceof i.BufferGeometry){var d=c.index,m=c.attributes;if(null!==d)for(var v=d.array,g=m.position.array,y=0,b=v.length-1;b>y;y+=f){var x=v[y],w=v[y+1];h.fromArray(g,3*x),u.fromArray(g,3*w);var _=t.distanceSqToSegment(h,u,p,l);if(!(_>s)){p.applyMatrix4(this.matrixWorld);var S=n.ray.origin.distanceTo(p);S<n.near||S>n.far||o.push({distance:S,point:l.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else for(var g=m.position.array,y=0,b=g.length/3-1;b>y;y+=f){h.fromArray(g,3*y),u.fromArray(g,3*y+3);var _=t.distanceSqToSegment(h,u,p,l);if(!(_>s)){p.applyMatrix4(this.matrixWorld);var S=n.ray.origin.distanceTo(p);S<n.near||S>n.far||o.push({distance:S,point:l.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}else if(c instanceof i.Geometry)for(var M=c.vertices,T=M.length,y=0;T-1>y;y+=f){var _=t.distanceSqToSegment(M[y],M[y+1],p,l);if(!(_>s)){p.applyMatrix4(this.matrixWorld);var S=n.ray.origin.distanceTo(p);S<n.near||S>n.far||o.push({distance:S,point:l.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}}}(),i.Line.prototype.clone=function(){return new this.constructor(this.geometry,this.material).copy(this)},i.LineStrip=0,i.LinePieces=1,i.LineSegments=function(e,t){i.Line.call(this,e,t),this.type="LineSegments"},i.LineSegments.prototype=Object.create(i.Line.prototype),i.LineSegments.prototype.constructor=i.LineSegments,i.Mesh=function(e,t){i.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new i.Geometry,this.material=void 0!==t?t:new i.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},i.Mesh.prototype=Object.create(i.Object3D.prototype),i.Mesh.prototype.constructor=i.Mesh,i.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1,this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,t=this.geometry.morphTargets.length;t>e;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}},i.Mesh.prototype.getMorphTargetIndexByName=function(e){return void 0!==this.morphTargetDictionary[e]?this.morphTargetDictionary[e]:(console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0."),0)},i.Mesh.prototype.raycast=function(){function e(e,t,r,n,o,a,s){return i.Triangle.barycoordFromPoint(e,t,r,n,v),o.multiplyScalar(v.x),a.multiplyScalar(v.y),s.multiplyScalar(v.z),o.add(a).add(s),o.clone()}function t(e,t,r,n,o,a,s){var c,h=e.material;if(c=h.side===i.BackSide?r.intersectTriangle(a,o,n,!0,s):r.intersectTriangle(n,o,a,h.side!==i.DoubleSide,s),null===c)return null;y.copy(s),y.applyMatrix4(e.matrixWorld);var u=t.ray.origin.distanceTo(y);return u<t.near||u>t.far?null:{distance:u,point:y.clone(),object:e}}function r(r,n,o,a,u,l,p,v){s.fromArray(a,3*l),c.fromArray(a,3*p),h.fromArray(a,3*v);var y=t(r,n,o,s,c,h,g);return y&&(u&&(f.fromArray(u,2*l),d.fromArray(u,2*p),m.fromArray(u,2*v),y.uv=e(g,s,c,h,f,d,m)),y.face=new i.Face3(l,p,v,i.Triangle.normal(s,c,h)),y.faceIndex=l),y}var n=new i.Matrix4,o=new i.Ray,a=new i.Sphere,s=new i.Vector3,c=new i.Vector3,h=new i.Vector3,u=new i.Vector3,l=new i.Vector3,p=new i.Vector3,f=new i.Vector2,d=new i.Vector2,m=new i.Vector2,v=new i.Vector3,g=new i.Vector3,y=new i.Vector3;return function(v,y){var b=this.geometry,x=this.material;if(void 0!==x){null===b.boundingSphere&&b.computeBoundingSphere();var w=this.matrixWorld;if(a.copy(b.boundingSphere),a.applyMatrix4(w),v.ray.isIntersectionSphere(a)!==!1&&(n.getInverse(w),o.copy(v.ray).applyMatrix4(n),null===b.boundingBox||o.isIntersectionBox(b.boundingBox)!==!1)){var _,S;if(b instanceof i.BufferGeometry){var M,T,E,C=b.index,A=b.attributes,k=A.position.array;if(void 0!==A.uv&&(_=A.uv.array),null!==C)for(var L=C.array,P=0,R=L.length;R>P;P+=3)M=L[P],T=L[P+1],E=L[P+2],S=r(this,v,o,k,_,M,T,E),S&&(S.faceIndex=Math.floor(P/3),y.push(S));else for(var P=0,R=k.length;R>P;P+=9)M=P/3,T=M+1,E=M+2,S=r(this,v,o,k,_,M,T,E),S&&(S.index=M,y.push(S))}else if(b instanceof i.Geometry){var D,O,V,F=x instanceof i.MeshFaceMaterial,U=F===!0?x.materials:null,N=b.vertices,j=b.faces,B=b.faceVertexUvs[0];B.length>0&&(_=B);for(var z=0,I=j.length;I>z;z++){var G=j[z],H=F===!0?U[G.materialIndex]:x;if(void 0!==H){if(D=N[G.a],O=N[G.b],V=N[G.c],H.morphTargets===!0){var W=b.morphTargets,X=this.morphTargetInfluences;s.set(0,0,0),c.set(0,0,0),h.set(0,0,0);for(var $=0,q=W.length;q>$;$++){var Y=X[$];if(0!==Y){var K=W[$].vertices;s.addScaledVector(u.subVectors(K[G.a],D),Y),c.addScaledVector(l.subVectors(K[G.b],O),Y),h.addScaledVector(p.subVectors(K[G.c],V),Y)}}s.add(D),c.add(O),h.add(V),D=s,O=c,V=h}if(S=t(this,v,o,D,O,V,g)){if(_){var Q=_[z];f.copy(Q[0]),d.copy(Q[1]),m.copy(Q[2]),S.uv=e(g,D,O,V,f,d,m)}S.face=G,S.faceIndex=z,y.push(S)}}}}}}}}(),i.Mesh.prototype.clone=function(){return new this.constructor(this.geometry,this.material).copy(this)},i.Bone=function(e){i.Object3D.call(this),this.type="Bone",this.skin=e},i.Bone.prototype=Object.create(i.Object3D.prototype),i.Bone.prototype.constructor=i.Bone,i.Bone.prototype.copy=function(e){return i.Object3D.prototype.copy.call(this,e),this.skin=e.skin,this},i.Skeleton=function(e,t,r){if(this.useVertexTexture=void 0!==r?r:!0,this.identityMatrix=new i.Matrix4,e=e||[],this.bones=e.slice(0),this.useVertexTexture){var n=Math.sqrt(4*this.bones.length);n=i.Math.nextPowerOfTwo(Math.ceil(n)),n=Math.max(n,4),this.boneTextureWidth=n,this.boneTextureHeight=n,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new i.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,i.RGBAFormat,i.FloatType)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var o=0,a=this.bones.length;a>o;o++)this.boneInverses.push(new i.Matrix4)}},i.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var e=0,t=this.bones.length;t>e;e++){var r=new i.Matrix4;this.bones[e]&&r.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(r)}},i.Skeleton.prototype.pose=function(){for(var e,t=0,r=this.bones.length;r>t;t++)e=this.bones[t],e&&e.matrixWorld.getInverse(this.boneInverses[t]);for(var t=0,r=this.bones.length;r>t;t++)e=this.bones[t],e&&(e.parent?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},i.Skeleton.prototype.update=function(){var e=new i.Matrix4;return function(){for(var t=0,r=this.bones.length;r>t;t++){var n=this.bones[t]?this.bones[t].matrixWorld:this.identityMatrix;e.multiplyMatrices(n,this.boneInverses[t]),e.flattenToArrayOffset(this.boneMatrices,16*t)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),i.Skeleton.prototype.clone=function(){return new i.Skeleton(this.bones,this.boneInverses,this.useVertexTexture)},i.SkinnedMesh=function(e,t,r){i.Mesh.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new i.Matrix4,this.bindMatrixInverse=new i.Matrix4;var n=[];if(this.geometry&&void 0!==this.geometry.bones){for(var o,a,s=0,c=this.geometry.bones.length;c>s;++s)a=this.geometry.bones[s],o=new i.Bone(this),n.push(o),o.name=a.name,o.position.fromArray(a.pos),o.quaternion.fromArray(a.rotq),void 0!==a.scl&&o.scale.fromArray(a.scl);for(var s=0,c=this.geometry.bones.length;c>s;++s)a=this.geometry.bones[s],-1!==a.parent&&null!==a.parent?n[a.parent].add(n[s]):this.add(n[s])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new i.Skeleton(n,void 0,r),this.matrixWorld)},i.SkinnedMesh.prototype=Object.create(i.Mesh.prototype),i.SkinnedMesh.prototype.constructor=i.SkinnedMesh,i.SkinnedMesh.prototype.bind=function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},i.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},i.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof i.Geometry)for(var e=0;e<this.geometry.skinIndices.length;e++){var t=this.geometry.skinWeights[e],r=1/t.lengthManhattan();r!==1/0?t.multiplyScalar(r):t.set(1)}},i.SkinnedMesh.prototype.updateMatrixWorld=function(e){i.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},i.SkinnedMesh.prototype.clone=function(){return new this.constructor(this.geometry,this.material,this.useVertexTexture).copy(this)},i.LOD=function(){i.Object3D.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}})},i.LOD.prototype=Object.create(i.Object3D.prototype),i.LOD.prototype.constructor=i.LOD,i.LOD.prototype.addLevel=function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var r=this.levels,n=0;n<r.length&&!(t<r[n].distance);n++);r.splice(n,0,{distance:t,object:e}),this.add(e)},i.LOD.prototype.getObjectForDistance=function(e){for(var t=this.levels,r=1,n=t.length;n>r&&!(e<t[r].distance);r++);return t[r-1].object},i.LOD.prototype.raycast=function(){var e=new i.Vector3;return function(t,r){e.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(e);this.getObjectForDistance(n).raycast(t,r)}}(),i.LOD.prototype.update=function(){var e=new i.Vector3,t=new i.Vector3;return function(r){var n=this.levels;if(n.length>1){e.setFromMatrixPosition(r.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);n[0].object.visible=!0;for(var o=1,a=n.length;a>o&&i>=n[o].distance;o++)n[o-1].object.visible=!1,n[o].object.visible=!0;for(;a>o;o++)n[o].object.visible=!1}}}(),i.LOD.prototype.copy=function(e){i.Object3D.prototype.copy.call(this,e,!1);for(var t=e.levels,r=0,n=t.length;n>r;r++){var o=t[r];this.addLevel(o.object.clone(),o.distance)}return this},i.LOD.prototype.toJSON=function(e){var t=i.Object3D.prototype.toJSON.call(this,e);t.object.levels=[];for(var r=this.levels,n=0,o=r.length;o>n;n++){var a=r[n];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t},i.Sprite=function(){var e=new Uint16Array([0,1,2,0,2,3]),t=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),r=new Float32Array([0,0,1,0,1,1,0,1]),n=new i.BufferGeometry;return n.setIndex(new i.BufferAttribute(e,1)),n.addAttribute("position",new i.BufferAttribute(t,3)),n.addAttribute("uv",new i.BufferAttribute(r,2)),function(e){i.Object3D.call(this),this.type="Sprite",this.geometry=n,this.material=void 0!==e?e:new i.SpriteMaterial}}(),i.Sprite.prototype=Object.create(i.Object3D.prototype),i.Sprite.prototype.constructor=i.Sprite,i.Sprite.prototype.raycast=function(){var e=new i.Vector3;return function(t,r){e.setFromMatrixPosition(this.matrixWorld);var n=t.ray.distanceSqToPoint(e),i=this.scale.x*this.scale.y;n>i||r.push({distance:Math.sqrt(n),point:this.position,face:null,object:this})}}(),i.Sprite.prototype.clone=function(){return new this.constructor(this.material).copy(this)},i.Particle=i.Sprite,i.LensFlare=function(e,t,r,n,o){i.Object3D.call(this),this.lensFlares=[],this.positionScreen=new i.Vector3,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,r,n,o)},i.LensFlare.prototype=Object.create(i.Object3D.prototype),i.LensFlare.prototype.constructor=i.LensFlare,i.LensFlare.prototype.add=function(e,t,r,n,o,a){void 0===t&&(t=-1),void 0===r&&(r=0),void 0===a&&(a=1),void 0===o&&(o=new i.Color(16777215)),void 0===n&&(n=i.NormalBlending),r=Math.min(r,Math.max(0,r)),this.lensFlares.push({texture:e,size:t,distance:r,x:0,y:0,z:0,scale:1,rotation:0,opacity:a,color:o,blending:n})},i.LensFlare.prototype.updateLensFlares=function(){var e,t,r=this.lensFlares.length,n=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(e=0;r>e;e++)t=this.lensFlares[e],t.x=this.positionScreen.x+n*t.distance,t.y=this.positionScreen.y+i*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)},i.LensFlare.prototype.copy=function(e){i.Object3D.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,r=e.lensFlares.length;r>t;t++)this.lensFlares.push(e.lensFlares[t]);return this},i.Scene=function(){i.Object3D.call(this),this.type="Scene",this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0},i.Scene.prototype=Object.create(i.Object3D.prototype),i.Scene.prototype.constructor=i.Scene,i.Scene.prototype.copy=function(e){return i.Object3D.prototype.copy.call(this,e),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},i.Fog=function(e,t,r){this.name="",this.color=new i.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==r?r:1e3},i.Fog.prototype.clone=function(){return new i.Fog(this.color.getHex(),this.near,this.far)},i.FogExp2=function(e,t){this.name="",this.color=new i.Color(e),this.density=void 0!==t?t:25e-5},i.FogExp2.prototype.clone=function(){return new i.FogExp2(this.color.getHex(),this.density)},i.ShaderChunk={},i.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n	diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",i.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n	uniform sampler2D alphaMap;\n\n#endif\n",i.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n	if ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n",i.ShaderChunk.aomap_fragment="#ifdef USE_AOMAP\n\n	totalAmbientLight *= ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n#endif\n",i.ShaderChunk.aomap_pars_fragment="#ifdef USE_AOMAP\n\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n\n#endif",i.ShaderChunk.begin_vertex="\nvec3 transformed = vec3( position );\n",i.ShaderChunk.beginnormal_vertex="\nvec3 objectNormal = vec3( normal );\n",i.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n\n\n\n	vec2 dHdxy_fwd() {\n\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n		return vec2( dBx, dBy );\n\n	}\n\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n\n		float fDet = dot( vSigmaX, R1 );\n\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n\n	}\n\n#endif\n",i.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n	diffuseColor.rgb *= vColor;\n\n#endif",i.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif\n",i.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif",i.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n	vColor.xyz = color.xyz;\n\n#endif",i.ShaderChunk.common="#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\n\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n\n	return normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n\n}\n\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n\n	return normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n	float distance = dot( planeNormal, point - pointOnPlane );\n\n	return - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n	return sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n\n	if ( decayExponent > 0.0 ) {\n\n	  return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n	}\n\n	return 1.0;\n\n}\n\nvec3 F_Schlick( in vec3 specularColor, in float dotLH ) {\n\n\n	float fresnel = exp2( ( -5.55437 * dotLH - 6.98316 ) * dotLH );\n\n	return ( 1.0 - specularColor ) * fresnel + specularColor;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* in float dotNL, in float dotNV */ ) {\n\n\n	return 0.25;\n\n}\n\nfloat D_BlinnPhong( in float shininess, in float dotNH ) {\n\n\n	return ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_BlinnPhong( in vec3 specularColor, in float shininess, in vec3 normal, in vec3 lightDir, in vec3 viewDir ) {\n\n	vec3 halfDir = normalize( lightDir + viewDir );\n\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotLH = saturate( dot( lightDir, halfDir ) );\n\n	vec3 F = F_Schlick( specularColor, dotLH );\n\n	float G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n	float D = D_BlinnPhong( shininess, dotNH );\n\n	return F * G * D;\n\n}\n\nvec3 inputToLinear( in vec3 a ) {\n\n	#ifdef GAMMA_INPUT\n\n		return pow( a, vec3( float( GAMMA_FACTOR ) ) );\n\n	#else\n\n		return a;\n\n	#endif\n\n}\n\nvec3 linearToOutput( in vec3 a ) {\n\n	#ifdef GAMMA_OUTPUT\n\n		return pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n\n	#else\n\n		return a;\n\n	#endif\n\n}\n",i.ShaderChunk.defaultnormal_vertex="#ifdef FLIP_SIDED\n\n	objectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n",i.ShaderChunk.displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n\n	transformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n\n#endif\n",i.ShaderChunk.displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n\n#endif\n",i.ShaderChunk.emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\n	vec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n	emissiveColor.rgb = inputToLinear( emissiveColor.rgb );\n\n	totalEmissiveLight *= emissiveColor.rgb;\n\n#endif\n",i.ShaderChunk.emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\n	uniform sampler2D emissiveMap;\n\n#endif\n",i.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n		#ifdef ENVMAP_MODE_REFLECTION\n\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n		#else\n\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n		#endif\n\n	#else\n\n		vec3 reflectVec = vReflect;\n\n	#endif\n\n	#ifdef DOUBLE_SIDED\n		float flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n	#else\n		float flipNormal = 1.0;\n	#endif\n\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n		vec4 envColor = texture2D( envMap, sampleUV );\n\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#endif\n\n	envColor.xyz = inputToLinear( envColor.xyz );\n\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_MIX )\n\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_ADD )\n\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n	#endif\n\n#endif\n",
i.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n	uniform float reflectivity;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		uniform float refractionRatio;\n\n	#else\n\n		varying vec3 vReflect;\n\n	#endif\n\n#endif\n",i.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	varying vec3 vReflect;\n\n	uniform float refractionRatio;\n\n#endif\n",i.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n	vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n	#ifdef ENVMAP_MODE_REFLECTION\n\n		vReflect = reflect( cameraToVertex, worldNormal );\n\n	#else\n\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n	#endif\n\n#endif\n",i.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n	#else\n\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n\n	#endif\n\n	#ifdef FOG_EXP2\n\n		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\n	#else\n\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n\n	#endif\n	\n	outgoingLight = mix( outgoingLight, fogColor, fogFactor );\n\n#endif",i.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n	uniform vec3 fogColor;\n\n	#ifdef FOG_EXP2\n\n		uniform float fogDensity;\n\n	#else\n\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n\n#endif",i.ShaderChunk.hemilight_fragment="#if MAX_HEMI_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec3 lightDir = hemisphereLightDirection[ i ];\n\n		float dotProduct = dot( normal, lightDir );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vec3 lightColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		totalAmbientLight += lightColor;\n\n	}\n\n#endif\n\n",i.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n	totalAmbientLight += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n#endif\n",i.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n\n#endif",i.ShaderChunk.lights_lambert_pars_vertex="#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n",i.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vec3( 0.0 );\n\n#endif\n\nvec3 normal = normalize( transformedNormal );\n\n#if MAX_POINT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec3 lightColor = pointLightColor[ i ];\n\n		vec3 lVector = pointLightPosition[ i ] - mvPosition.xyz;\n		vec3 lightDir = normalize( lVector );\n\n\n		float attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\n		float dotProduct = dot( normal, lightDir );\n\n		vLightFront += lightColor * attenuation * saturate( dotProduct );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec3 lightColor = spotLightColor[ i ];\n\n		vec3 lightPosition = spotLightPosition[ i ];\n		vec3 lVector = lightPosition - mvPosition.xyz;\n		vec3 lightDir = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], lightDir );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n\n			float attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n			attenuation *= spotEffect;\n\n\n			float dotProduct = dot( normal, lightDir );\n\n			vLightFront += lightColor * attenuation * saturate( dotProduct );\n\n			#ifdef DOUBLE_SIDED\n\n				vLightBack += lightColor * attenuation * saturate( - dotProduct );\n\n			#endif\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec3 lightColor = directionalLightColor[ i ];\n\n		vec3 lightDir = directionalLightDirection[ i ];\n\n\n		float dotProduct = dot( normal, lightDir );\n\n		vLightFront += lightColor * saturate( dotProduct );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += lightColor * saturate( - dotProduct );\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec3 lightDir = hemisphereLightDirection[ i ];\n\n\n		float dotProduct = dot( normal, lightDir );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		#ifdef DOUBLE_SIDED\n\n			float hemiDiffuseWeightBack = - 0.5 * dotProduct + 0.5;\n\n			vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n		#endif\n\n	}\n\n#endif\n",i.ShaderChunk.lights_phong_fragment="vec3 viewDir = normalize( vViewPosition );\n\nvec3 totalDiffuseLight = vec3( 0.0 );\nvec3 totalSpecularLight = vec3( 0.0 );\n\n#if MAX_POINT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec3 lightColor = pointLightColor[ i ];\n\n		vec3 lightPosition = pointLightPosition[ i ];\n		vec3 lVector = lightPosition + vViewPosition.xyz;\n		vec3 lightDir = normalize( lVector );\n\n\n		float attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n\n		float cosineTerm = saturate( dot( normal, lightDir ) );\n\n		totalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n\n		vec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n		totalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec3 lightColor = spotLightColor[ i ];\n\n		vec3 lightPosition = spotLightPosition[ i ];\n		vec3 lVector = lightPosition + vViewPosition.xyz;\n		vec3 lightDir = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], lightDir );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\n\n\n			float attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n			attenuation *= spotEffect;\n\n\n			float cosineTerm = saturate( dot( normal, lightDir ) );\n\n			totalDiffuseLight += lightColor * attenuation * cosineTerm;\n\n\n			vec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n			totalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec3 lightColor = directionalLightColor[ i ];\n\n		vec3 lightDir = directionalLightDirection[ i ];\n\n\n		float cosineTerm = saturate( dot( normal, lightDir ) );\n\n		totalDiffuseLight += lightColor * cosineTerm;\n\n\n		vec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\n\n		totalSpecularLight += brdf * specularStrength * lightColor * cosineTerm;\n\n	}\n\n#endif\n",i.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n	varying vec3 vNormal;\n\n#endif\n",i.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n\n#endif\n",i.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\n\n	vWorldPosition = worldPosition.xyz;\n\n#endif\n",i.ShaderChunk.linear_to_gamma_fragment="\n	outgoingLight = linearToOutput( outgoingLight );\n",i.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",i.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n	uniform float logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n#endif\n",i.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n	uniform float logDepthBufFC;\n\n#endif",i.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n	gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		vFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n	#endif\n\n#endif",i.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n	vec4 texelColor = texture2D( map, vUv );\n\n	texelColor.xyz = inputToLinear( texelColor.xyz );\n\n	diffuseColor *= texelColor;\n\n#endif\n",i.ShaderChunk.map_pars_fragment="#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",i.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n	diffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\n#endif\n",i.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n	uniform vec4 offsetRepeat;\n	uniform sampler2D map;\n\n#endif\n",i.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n#endif\n",i.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n	#ifndef USE_MORPHNORMALS\n\n	uniform float morphTargetInfluences[ 8 ];\n\n	#else\n\n	uniform float morphTargetInfluences[ 4 ];\n\n	#endif\n\n#endif",i.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n	#ifndef USE_MORPHNORMALS\n\n	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n	#endif\n\n#endif\n",i.ShaderChunk.normal_phong_fragment="#ifndef FLAT_SHADED\n\n	vec3 normal = normalize( vNormal );\n\n	#ifdef DOUBLE_SIDED\n\n		normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n	#endif\n\n#else\n\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n",i.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n\n\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n\n	}\n\n#endif\n",i.ShaderChunk.project_vertex="#ifdef USE_SKINNING\n\n	vec4 mvPosition = modelViewMatrix * skinned;\n\n#else\n\n	vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n",i.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n	for ( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		float texelSizeY =  1.0 / shadowMapSize[ i ].y;\n\n		float shadow = 0.0;\n\n#if defined( POINT_LIGHT_SHADOWS )\n\n		bool isPointLight = shadowDarkness[ i ] < 0.0;\n\n		if ( isPointLight ) {\n\n			float realShadowDarkness = abs( shadowDarkness[ i ] );\n\n			vec3 lightToPosition = vShadowCoord[ i ].xyz;\n\n	#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n			vec3 bd3D = normalize( lightToPosition );\n			float dp = length( lightToPosition );\n\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D, texelSizeY ) ), shadowBias[ i ], shadow );\n\n\n	#if defined( SHADOWMAP_TYPE_PCF )\n			const float Dr = 1.25;\n	#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			const float Dr = 2.25;\n	#endif\n\n			float os = Dr *  2.0 * texelSizeY;\n\n			const vec3 Gsd = vec3( - 1, 0, 1 );\n\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zzz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zxz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xxz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xzz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zzx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zxx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xxx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xzx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zzy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zxy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xxy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xzy * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zyz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xyz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.zyx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.xyx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yzz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yxz * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yxx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D + Gsd.yzx * os, texelSizeY ) ), shadowBias[ i ], shadow );\n\n			shadow *= realShadowDarkness * ( 1.0 / 21.0 );\n\n	#else \n			vec3 bd3D = normalize( lightToPosition );\n			float dp = length( lightToPosition );\n\n			adjustShadowValue1K( dp, texture2D( shadowMap[ i ], cubeToUV( bd3D, texelSizeY ) ), shadowBias[ i ], shadow );\n\n			shadow *= realShadowDarkness;\n\n	#endif\n\n		} else {\n\n#endif \n			float texelSizeX =  1.0 / shadowMapSize[ i ].x;\n\n			vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n\n			bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n			bool inFrustum = all( inFrustumVec );\n\n			bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n			bool frustumTest = all( frustumTestVec );\n\n			if ( frustumTest ) {\n\n	#if defined( SHADOWMAP_TYPE_PCF )\n\n\n				/*\n					for ( float y = -1.25; y <= 1.25; y += 1.25 )\n						for ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n							vec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n							float fDepth = unpackDepth( rgbaDepth );\n							if ( fDepth < shadowCoord.z )\n								shadow += 1.0;\n					}\n					shadow /= 9.0;\n				*/\n\n				shadowCoord.z += shadowBias[ i ];\n\n				const float ShadowDelta = 1.0 / 9.0;\n\n				float xPixelOffset = texelSizeX;\n				float yPixelOffset = texelSizeY;\n\n				float dx0 = - 1.25 * xPixelOffset;\n				float dy0 = - 1.25 * yPixelOffset;\n				float dx1 = 1.25 * xPixelOffset;\n				float dy1 = 1.25 * yPixelOffset;\n\n				float fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += ShadowDelta;\n\n				shadow *= shadowDarkness[ i ];\n\n	#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\n				shadowCoord.z += shadowBias[ i ];\n\n				float xPixelOffset = texelSizeX;\n				float yPixelOffset = texelSizeY;\n\n				float dx0 = - 1.0 * xPixelOffset;\n				float dy0 = - 1.0 * yPixelOffset;\n				float dx1 = 1.0 * xPixelOffset;\n				float dy1 = 1.0 * yPixelOffset;\n\n				mat3 shadowKernel;\n				mat3 depthKernel;\n\n				depthKernel[ 0 ][ 0 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				depthKernel[ 0 ][ 1 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				depthKernel[ 0 ][ 2 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				depthKernel[ 1 ][ 0 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				depthKernel[ 1 ][ 1 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				depthKernel[ 1 ][ 2 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				depthKernel[ 2 ][ 0 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				depthKernel[ 2 ][ 1 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				depthKernel[ 2 ][ 2 ] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n				vec3 shadowZ = vec3( shadowCoord.z );\n				shadowKernel[ 0 ] = vec3( lessThan( depthKernel[ 0 ], shadowZ ) );\n				shadowKernel[ 0 ] *= vec3( 0.25 );\n\n				shadowKernel[ 1 ] = vec3( lessThan( depthKernel[ 1 ], shadowZ ) );\n				shadowKernel[ 1 ] *= vec3( 0.25 );\n\n				shadowKernel[ 2 ] = vec3( lessThan( depthKernel[ 2 ], shadowZ ) );\n				shadowKernel[ 2 ] *= vec3( 0.25 );\n\n				vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[ i ].xy );\n\n				shadowKernel[ 0 ] = mix( shadowKernel[ 1 ], shadowKernel[ 0 ], fractionalCoord.x );\n				shadowKernel[ 1 ] = mix( shadowKernel[ 2 ], shadowKernel[ 1 ], fractionalCoord.x );\n\n				vec4 shadowValues;\n				shadowValues.x = mix( shadowKernel[ 0 ][ 1 ], shadowKernel[ 0 ][ 0 ], fractionalCoord.y );\n				shadowValues.y = mix( shadowKernel[ 0 ][ 2 ], shadowKernel[ 0 ][ 1 ], fractionalCoord.y );\n				shadowValues.z = mix( shadowKernel[ 1 ][ 1 ], shadowKernel[ 1 ][ 0 ], fractionalCoord.y );\n				shadowValues.w = mix( shadowKernel[ 1 ][ 2 ], shadowKernel[ 1 ][ 1 ], fractionalCoord.y );\n\n				shadow = dot( shadowValues, vec4( 1.0 ) ) * shadowDarkness[ i ];\n\n	#else \n				shadowCoord.z += shadowBias[ i ];\n\n				vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n				float fDepth = unpackDepth( rgbaDepth );\n\n				if ( fDepth < shadowCoord.z )\n					shadow = shadowDarkness[ i ];\n\n	#endif\n\n			}\n\n#ifdef SHADOWMAP_DEBUG\n\n			if ( inFrustum ) {\n\n				if ( i == 0 ) {\n\n					outgoingLight *= vec3( 1.0, 0.5, 0.0 );\n\n				} else if ( i == 1 ) {\n\n					outgoingLight *= vec3( 0.0, 1.0, 0.8 );\n\n				} else {\n\n					outgoingLight *= vec3( 0.0, 0.5, 1.0 );\n\n				}\n\n			}\n\n#endif\n\n#if defined( POINT_LIGHT_SHADOWS )\n\n		}\n\n#endif\n\n		shadowMask = shadowMask * vec3( 1.0 - shadow );\n\n	}\n\n#endif\n",i.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n	uniform sampler2D shadowMap[ MAX_SHADOWS ];\n	uniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform float shadowBias[ MAX_SHADOWS ];\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n	float unpackDepth( const in vec4 rgba_depth ) {\n\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		float depth = dot( rgba_depth, bit_shift );\n		return depth;\n\n	}\n\n	#if defined(POINT_LIGHT_SHADOWS)\n\n\n		void adjustShadowValue1K( const float testDepth, const vec4 textureData, const float bias, inout float shadowValue ) {\n\n			const vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n			if ( testDepth >= dot( textureData, bitSh ) * 1000.0 + bias )\n				shadowValue += 1.0;\n\n		}\n\n\n		vec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\n			vec3 absV = abs( v );\n\n\n			float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n			absV *= scaleToCube;\n\n\n			v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\n\n			vec2 planar = v.xy;\n\n			float almostATexel = 1.5 * texelSizeY;\n			float almostOne = 1.0 - almostATexel;\n\n			if ( absV.z >= almostOne ) {\n\n				if ( v.z > 0.0 )\n					planar.x = 4.0 - v.x;\n\n			} else if ( absV.x >= almostOne ) {\n\n				float signX = sign( v.x );\n				planar.x = v.z * signX + 2.0 * signX;\n\n			} else if ( absV.y >= almostOne ) {\n\n				float signY = sign( v.y );\n				planar.x = v.x + 2.0 * signY + 2.0;\n				planar.y = v.z * signY - 2.0;\n\n			}\n\n\n			return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n		}\n\n	#endif\n\n#endif\n",i.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform mat4 shadowMatrix[ MAX_SHADOWS ];\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n#endif",i.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n	for ( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n			vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n	}\n\n#endif",i.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",i.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n\n	#ifdef BONE_TEXTURE\n\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n\n			y = dy * ( y + 0.5 );\n\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n			mat4 bone = mat4( v1, v2, v3, v4 );\n\n			return bone;\n\n		}\n\n	#else\n\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n\n		}\n\n	#endif\n\n#endif\n",i.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n\n#endif\n",i.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n#endif\n",i.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n\n#else\n\n	specularStrength = 1.0;\n\n#endif",i.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n	uniform sampler2D specularMap;\n\n#endif",i.ShaderChunk.uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n	varying vec2 vUv2;\n\n#endif",i.ShaderChunk.uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n	attribute vec2 uv2;\n	varying vec2 vUv2;\n\n#endif",i.ShaderChunk.uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n	vUv2 = uv2;\n\n#endif",i.ShaderChunk.uv_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n	varying vec2 vUv;\n\n#endif",i.ShaderChunk.uv_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n\n#endif\n",i.ShaderChunk.uv_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\n\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",i.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n	#ifdef USE_SKINNING\n\n		vec4 worldPosition = modelMatrix * skinned;\n\n	#else\n\n		vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\n	#endif\n\n#endif\n",i.UniformsUtils={merge:function(e){for(var t={},r=0;r<e.length;r++){var n=this.clone(e[r]);for(var i in n)t[i]=n[i]}return t},clone:function(e){var t={};for(var r in e){t[r]={};for(var n in e[r]){var o=e[r][n];o instanceof i.Color||o instanceof i.Vector2||o instanceof i.Vector3||o instanceof i.Vector4||o instanceof i.Matrix3||o instanceof i.Matrix4||o instanceof i.Texture?t[r][n]=o.clone():Array.isArray(o)?t[r][n]=o.slice():t[r][n]=o}}return t}},i.UniformsLib={common:{diffuse:{type:"c",value:new i.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new i.Vector4(0,0,1,1)},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98}},aomap:{aoMap:{type:"t",value:null},aoMapIntensity:{type:"f",value:1}},lightmap:{lightMap:{type:"t",value:null},lightMapIntensity:{type:"f",value:1}},emissivemap:{emissiveMap:{type:"t",value:null}},bumpmap:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new i.Vector2(1,1)}},displacementmap:{displacementMap:{type:"t",value:null},displacementScale:{type:"f",value:1},displacementBias:{type:"f",value:0}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new i.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},pointLightDecay:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{
type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]},spotLightDecay:{type:"fv1",value:[]}},points:{psColor:{type:"c",value:new i.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new i.Vector4(0,0,1,1)},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new i.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},i.ShaderLib={basic:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.aomap,i.UniformsLib.fog,i.UniformsLib.shadowmap]),vertexShader:[i.ShaderChunk.common,i.ShaderChunk.uv_pars_vertex,i.ShaderChunk.uv2_pars_vertex,i.ShaderChunk.envmap_pars_vertex,i.ShaderChunk.color_pars_vertex,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.skinning_pars_vertex,i.ShaderChunk.shadowmap_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.uv_vertex,i.ShaderChunk.uv2_vertex,i.ShaderChunk.color_vertex,i.ShaderChunk.skinbase_vertex,"	#ifdef USE_ENVMAP",i.ShaderChunk.beginnormal_vertex,i.ShaderChunk.morphnormal_vertex,i.ShaderChunk.skinnormal_vertex,i.ShaderChunk.defaultnormal_vertex,"	#endif",i.ShaderChunk.begin_vertex,i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.skinning_vertex,i.ShaderChunk.project_vertex,i.ShaderChunk.logdepthbuf_vertex,i.ShaderChunk.worldpos_vertex,i.ShaderChunk.envmap_vertex,i.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;",i.ShaderChunk.common,i.ShaderChunk.color_pars_fragment,i.ShaderChunk.uv_pars_fragment,i.ShaderChunk.uv2_pars_fragment,i.ShaderChunk.map_pars_fragment,i.ShaderChunk.alphamap_pars_fragment,i.ShaderChunk.aomap_pars_fragment,i.ShaderChunk.envmap_pars_fragment,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.shadowmap_pars_fragment,i.ShaderChunk.specularmap_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( diffuse, opacity );","	vec3 totalAmbientLight = vec3( 1.0 );","	vec3 shadowMask = vec3( 1.0 );",i.ShaderChunk.logdepthbuf_fragment,i.ShaderChunk.map_fragment,i.ShaderChunk.color_fragment,i.ShaderChunk.alphamap_fragment,i.ShaderChunk.alphatest_fragment,i.ShaderChunk.specularmap_fragment,i.ShaderChunk.aomap_fragment,i.ShaderChunk.shadowmap_fragment,"	outgoingLight = diffuseColor.rgb * totalAmbientLight * shadowMask;",i.ShaderChunk.envmap_fragment,i.ShaderChunk.linear_to_gamma_fragment,i.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},lambert:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.fog,i.UniformsLib.lights,i.UniformsLib.shadowmap,{emissive:{type:"c",value:new i.Color(0)}}]),vertexShader:["#define LAMBERT","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",i.ShaderChunk.common,i.ShaderChunk.uv_pars_vertex,i.ShaderChunk.uv2_pars_vertex,i.ShaderChunk.envmap_pars_vertex,i.ShaderChunk.lights_lambert_pars_vertex,i.ShaderChunk.color_pars_vertex,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.skinning_pars_vertex,i.ShaderChunk.shadowmap_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.uv_vertex,i.ShaderChunk.uv2_vertex,i.ShaderChunk.color_vertex,i.ShaderChunk.beginnormal_vertex,i.ShaderChunk.morphnormal_vertex,i.ShaderChunk.skinbase_vertex,i.ShaderChunk.skinnormal_vertex,i.ShaderChunk.defaultnormal_vertex,i.ShaderChunk.begin_vertex,i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.skinning_vertex,i.ShaderChunk.project_vertex,i.ShaderChunk.logdepthbuf_vertex,i.ShaderChunk.worldpos_vertex,i.ShaderChunk.envmap_vertex,i.ShaderChunk.lights_lambert_vertex,i.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform vec3 emissive;","uniform float opacity;","uniform vec3 ambientLightColor;","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",i.ShaderChunk.common,i.ShaderChunk.color_pars_fragment,i.ShaderChunk.uv_pars_fragment,i.ShaderChunk.uv2_pars_fragment,i.ShaderChunk.map_pars_fragment,i.ShaderChunk.alphamap_pars_fragment,i.ShaderChunk.envmap_pars_fragment,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.shadowmap_pars_fragment,i.ShaderChunk.specularmap_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( diffuse, opacity );","	vec3 totalAmbientLight = ambientLightColor;","	vec3 shadowMask = vec3( 1.0 );",i.ShaderChunk.logdepthbuf_fragment,i.ShaderChunk.map_fragment,i.ShaderChunk.color_fragment,i.ShaderChunk.alphamap_fragment,i.ShaderChunk.alphatest_fragment,i.ShaderChunk.specularmap_fragment,i.ShaderChunk.shadowmap_fragment,"	#ifdef DOUBLE_SIDED","		if ( gl_FrontFacing )","			outgoingLight += diffuseColor.rgb * ( vLightFront * shadowMask + totalAmbientLight ) + emissive;","		else","			outgoingLight += diffuseColor.rgb * ( vLightBack * shadowMask + totalAmbientLight ) + emissive;","	#else","		outgoingLight += diffuseColor.rgb * ( vLightFront * shadowMask + totalAmbientLight ) + emissive;","	#endif",i.ShaderChunk.envmap_fragment,i.ShaderChunk.linear_to_gamma_fragment,i.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},phong:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.aomap,i.UniformsLib.lightmap,i.UniformsLib.emissivemap,i.UniformsLib.bumpmap,i.UniformsLib.normalmap,i.UniformsLib.displacementmap,i.UniformsLib.fog,i.UniformsLib.lights,i.UniformsLib.shadowmap,{emissive:{type:"c",value:new i.Color(0)},specular:{type:"c",value:new i.Color(1118481)},shininess:{type:"f",value:30}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","#ifndef FLAT_SHADED","	varying vec3 vNormal;","#endif",i.ShaderChunk.common,i.ShaderChunk.uv_pars_vertex,i.ShaderChunk.uv2_pars_vertex,i.ShaderChunk.displacementmap_pars_vertex,i.ShaderChunk.envmap_pars_vertex,i.ShaderChunk.lights_phong_pars_vertex,i.ShaderChunk.color_pars_vertex,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.skinning_pars_vertex,i.ShaderChunk.shadowmap_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.uv_vertex,i.ShaderChunk.uv2_vertex,i.ShaderChunk.color_vertex,i.ShaderChunk.beginnormal_vertex,i.ShaderChunk.morphnormal_vertex,i.ShaderChunk.skinbase_vertex,i.ShaderChunk.skinnormal_vertex,i.ShaderChunk.defaultnormal_vertex,"#ifndef FLAT_SHADED","	vNormal = normalize( transformedNormal );","#endif",i.ShaderChunk.begin_vertex,i.ShaderChunk.displacementmap_vertex,i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.skinning_vertex,i.ShaderChunk.project_vertex,i.ShaderChunk.logdepthbuf_vertex,"	vViewPosition = - mvPosition.xyz;",i.ShaderChunk.worldpos_vertex,i.ShaderChunk.envmap_vertex,i.ShaderChunk.lights_phong_vertex,i.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define PHONG","uniform vec3 diffuse;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;","uniform float opacity;",i.ShaderChunk.common,i.ShaderChunk.color_pars_fragment,i.ShaderChunk.uv_pars_fragment,i.ShaderChunk.uv2_pars_fragment,i.ShaderChunk.map_pars_fragment,i.ShaderChunk.alphamap_pars_fragment,i.ShaderChunk.aomap_pars_fragment,i.ShaderChunk.lightmap_pars_fragment,i.ShaderChunk.emissivemap_pars_fragment,i.ShaderChunk.envmap_pars_fragment,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.lights_phong_pars_fragment,i.ShaderChunk.shadowmap_pars_fragment,i.ShaderChunk.bumpmap_pars_fragment,i.ShaderChunk.normalmap_pars_fragment,i.ShaderChunk.specularmap_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( diffuse, opacity );","	vec3 totalAmbientLight = ambientLightColor;","	vec3 totalEmissiveLight = emissive;","	vec3 shadowMask = vec3( 1.0 );",i.ShaderChunk.logdepthbuf_fragment,i.ShaderChunk.map_fragment,i.ShaderChunk.color_fragment,i.ShaderChunk.alphamap_fragment,i.ShaderChunk.alphatest_fragment,i.ShaderChunk.specularmap_fragment,i.ShaderChunk.normal_phong_fragment,i.ShaderChunk.lightmap_fragment,i.ShaderChunk.hemilight_fragment,i.ShaderChunk.aomap_fragment,i.ShaderChunk.emissivemap_fragment,i.ShaderChunk.lights_phong_fragment,i.ShaderChunk.shadowmap_fragment,"totalDiffuseLight *= shadowMask;","totalSpecularLight *= shadowMask;","#ifdef METAL","	outgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) * specular + totalSpecularLight + totalEmissiveLight;","#else","	outgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) + totalSpecularLight + totalEmissiveLight;","#endif",i.ShaderChunk.envmap_fragment,i.ShaderChunk.linear_to_gamma_fragment,i.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},points:{uniforms:i.UniformsUtils.merge([i.UniformsLib.points,i.UniformsLib.shadowmap]),vertexShader:["uniform float size;","uniform float scale;",i.ShaderChunk.common,i.ShaderChunk.color_pars_vertex,i.ShaderChunk.shadowmap_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.color_vertex,"	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	#ifdef USE_SIZEATTENUATION","		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );","	#else","		gl_PointSize = size;","	#endif","	gl_Position = projectionMatrix * mvPosition;",i.ShaderChunk.logdepthbuf_vertex,i.ShaderChunk.worldpos_vertex,i.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;","uniform float opacity;",i.ShaderChunk.common,i.ShaderChunk.color_pars_fragment,i.ShaderChunk.map_particle_pars_fragment,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.shadowmap_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( psColor, opacity );","	vec3 shadowMask = vec3( 1.0 );",i.ShaderChunk.logdepthbuf_fragment,i.ShaderChunk.map_particle_fragment,i.ShaderChunk.color_fragment,i.ShaderChunk.alphatest_fragment,i.ShaderChunk.shadowmap_fragment,"	outgoingLight = diffuseColor.rgb * shadowMask;",i.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},dashed:{uniforms:i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;","attribute float lineDistance;","varying float vLineDistance;",i.ShaderChunk.common,i.ShaderChunk.color_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.color_vertex,"	vLineDistance = scale * lineDistance;","	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	gl_Position = projectionMatrix * mvPosition;",i.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform float dashSize;","uniform float totalSize;","varying float vLineDistance;",i.ShaderChunk.common,i.ShaderChunk.color_pars_fragment,i.ShaderChunk.fog_pars_fragment,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	if ( mod( vLineDistance, totalSize ) > dashSize ) {","		discard;","	}","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( diffuse, opacity );",i.ShaderChunk.logdepthbuf_fragment,i.ShaderChunk.color_fragment,"	outgoingLight = diffuseColor.rgb;",i.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[i.ShaderChunk.common,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.begin_vertex,i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.project_vertex,i.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","uniform float opacity;",i.ShaderChunk.common,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",i.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		float depth = gl_FragDepthEXT / gl_FragCoord.w;","	#else","		float depth = gl_FragCoord.z / gl_FragCoord.w;","	#endif","	float color = 1.0 - smoothstep( mNear, mFar, depth );","	gl_FragColor = vec4( vec3( color ), opacity );","}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",i.ShaderChunk.common,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vNormal = normalize( normalMatrix * normal );",i.ShaderChunk.begin_vertex,i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.project_vertex,i.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vNormal;",i.ShaderChunk.common,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",i.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",i.ShaderChunk.common,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vWorldPosition = transformDirection( position, modelMatrix );","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",i.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;","uniform float tFlip;","varying vec3 vWorldPosition;",i.ShaderChunk.common,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",i.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",i.ShaderChunk.common,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vWorldPosition = transformDirection( position, modelMatrix );","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",i.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","uniform float tFlip;","varying vec3 vWorldPosition;",i.ShaderChunk.common,i.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","vec3 direction = normalize( vWorldPosition );","vec2 sampleUV;","sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );","sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","gl_FragColor = texture2D( tEquirect, sampleUV );",i.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[i.ShaderChunk.common,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.skinning_pars_vertex,i.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",i.ShaderChunk.skinbase_vertex,i.ShaderChunk.begin_vertex,i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.skinning_vertex,i.ShaderChunk.project_vertex,i.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[i.ShaderChunk.common,i.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {","	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );","	res -= res.xxyz * bit_mask;","	return res;","}","void main() {",i.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );","	#else","		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );","	#endif","}"].join("\n")},distanceRGBA:{uniforms:{lightPos:{type:"v3",value:new i.Vector3(0,0,0)}},vertexShader:["varying vec4 vWorldPosition;",i.ShaderChunk.common,i.ShaderChunk.morphtarget_pars_vertex,i.ShaderChunk.skinning_pars_vertex,"void main() {",i.ShaderChunk.skinbase_vertex,i.ShaderChunk.begin_vertex,i.ShaderChunk.morphtarget_vertex,i.ShaderChunk.skinning_vertex,i.ShaderChunk.project_vertex,i.ShaderChunk.worldpos_vertex,"vWorldPosition = worldPosition;","}"].join("\n"),fragmentShader:["uniform vec3 lightPos;","varying vec4 vWorldPosition;",i.ShaderChunk.common,"vec4 pack1K ( float depth ) {","   depth /= 1000.0;","   const vec4 bitSh = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","	const vec4 bitMsk = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","	vec4 res = fract( depth * bitSh );","	res -= res.xxyz * bitMsk;","	return res; ","}","float unpack1K ( vec4 color ) {","	const vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );","	return dot( color, bitSh ) * 1000.0;","}","void main () {","	gl_FragColor = pack1K( length( vWorldPosition.xyz - lightPos.xyz ) );","}"].join("\n")}},i.WebGLRenderer=function(e){function t(e,t,r,n){ae===!0&&(e*=n,t*=n,r*=n),je.clearColor(e,t,r,n)}function r(){He.init(),je.viewport(Te,Ee,Ce,Ae),t(ce.r,ce.g,ce.b,he)}function n(){be=null,Se=null,_e="",we=-1,Ve=!0,He.reset()}function o(e){e.preventDefault(),n(),r(),We.clear()}function a(e){var t=e.target;t.removeEventListener("dispose",a),h(t),Ue.textures--}function s(e){var t=e.target;t.removeEventListener("dispose",s),u(t),Ue.textures--}function c(e){var t=e.target;t.removeEventListener("dispose",c),l(t)}function h(e){var t=We.get(e);if(e.image&&t.__image__webglTextureCube)je.deleteTexture(t.__image__webglTextureCube);else{if(void 0===t.__webglInit)return;je.deleteTexture(t.__webglTexture)}We["delete"](e)}function u(e){var t=We.get(e),r=We.get(e.texture);if(e&&void 0!==r.__webglTexture){if(je.deleteTexture(r.__webglTexture),e instanceof i.WebGLRenderTargetCube)for(var n=0;6>n;n++)je.deleteFramebuffer(t.__webglFramebuffer[n]),je.deleteRenderbuffer(t.__webglRenderbuffer[n]);else je.deleteFramebuffer(t.__webglFramebuffer),je.deleteRenderbuffer(t.__webglRenderbuffer);We["delete"](e.texture),We["delete"](e)}}function l(e){p(e),We["delete"](e)}function p(e){var t=We.get(e).program;e.program=void 0,void 0!==t&&$e.releaseProgram(t)}function f(e,t,r,n){var o;if(r instanceof i.InstancedBufferGeometry&&(o=Ie.get("ANGLE_instanced_arrays"),null===o))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===n&&(n=0),He.initAttributes();var a=r.attributes,s=t.getAttributes(),c=e.defaultAttributeValues;for(var h in s){var u=s[h];if(u>=0){var l=a[h];if(void 0!==l){var p=l.itemSize,f=Xe.getAttributeBuffer(l);if(l instanceof i.InterleavedBufferAttribute){var d=l.data,m=d.stride,v=l.offset;d instanceof i.InstancedInterleavedBuffer?(He.enableAttributeAndDivisor(u,d.meshPerAttribute,o),void 0===r.maxInstancedCount&&(r.maxInstancedCount=d.meshPerAttribute*d.count)):He.enableAttribute(u),je.bindBuffer(je.ARRAY_BUFFER,f),je.vertexAttribPointer(u,p,je.FLOAT,!1,m*d.array.BYTES_PER_ELEMENT,(n*m+v)*d.array.BYTES_PER_ELEMENT)}else l instanceof i.InstancedBufferAttribute?(He.enableAttributeAndDivisor(u,l.meshPerAttribute,o),void 0===r.maxInstancedCount&&(r.maxInstancedCount=l.meshPerAttribute*l.count)):He.enableAttribute(u),je.bindBuffer(je.ARRAY_BUFFER,f),je.vertexAttribPointer(u,p,je.FLOAT,!1,0,n*p*4)}else if(void 0!==c){var g=c[h];if(void 0!==g)switch(g.length){case 2:je.vertexAttrib2fv(u,g);break;case 3:je.vertexAttrib3fv(u,g);break;case 4:je.vertexAttrib4fv(u,g);break;default:je.vertexAttrib1fv(u,g)}}}}He.disableUnusedAttributes()}function d(e,t){return t[0]-e[0]}function m(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function v(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function g(e,t,r,n,i){var o,a;r.transparent?(o=fe,a=++de):(o=le,a=++pe);var s=o[a];void 0!==s?(s.id=e.id,s.object=e,s.geometry=t,s.material=r,s.z=De.z,s.group=i):(s={id:e.id,object:e,geometry:t,material:r,z:De.z,group:i},o.push(s))}function y(e,t){if(e.visible!==!1){if(0!==(e.channels.mask&t.channels.mask))if(e instanceof i.Light)ue.push(e);else if(e instanceof i.Sprite)ve.push(e);else if(e instanceof i.LensFlare)ge.push(e);else if(e instanceof i.ImmediateRenderObject)ye.sortObjects===!0&&(De.setFromMatrixPosition(e.matrixWorld),De.applyProjection(Re)),g(e,null,e.material,De.z,null);else if((e instanceof i.Mesh||e instanceof i.Line||e instanceof i.Points)&&(e instanceof i.SkinnedMesh&&e.skeleton.update(),e.frustumCulled===!1||Pe.intersectsObject(e)===!0)){var r=e.material;if(r.visible===!0){ye.sortObjects===!0&&(De.setFromMatrixPosition(e.matrixWorld),De.applyProjection(Re));var n=Xe.update(e);if(r instanceof i.MeshFaceMaterial)for(var o=n.groups,a=r.materials,s=0,c=o.length;c>s;s++){var h=o[s],u=a[h.materialIndex];u.visible===!0&&g(e,n,u,De.z,h)}else g(e,n,r,De.z,null)}}for(var l=e.children,s=0,c=l.length;c>s;s++)y(l[s],t)}}function b(e,t,r,n,o){for(var a=0,s=e.length;s>a;a++){var c=e[a],h=c.object,u=c.geometry,l=void 0===o?c.material:o,p=c.group;if(h.modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,h.matrixWorld),h.normalMatrix.getNormalMatrix(h.modelViewMatrix),h instanceof i.ImmediateRenderObject){w(l);var f=S(t,r,n,l,h);_e="",h.render(function(e){ye.renderBufferImmediate(e,f,l)})}else ye.renderBufferDirect(t,r,n,u,l,h,p)}}function x(e,t,r,n){var o=We.get(e),a=$e.getParameters(e,t,r,n),s=$e.getProgramCode(e,a),h=o.program,u=!0;if(void 0===h)e.addEventListener("dispose",c);else if(h.code!==s)p(e);else{if(void 0!==a.shaderID)return;u=!1}if(u){if(a.shaderID){var l=i.ShaderLib[a.shaderID];o.__webglShader={name:e.type,uniforms:i.UniformsUtils.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else o.__webglShader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.__webglShader=o.__webglShader,h=$e.acquireProgram(e,a,s),o.program=h,e.program=h}var f=h.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var d=0;d<ye.maxMorphTargets;d++)f["morphTarget"+d]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals)for(e.numSupportedMorphNormals=0,d=0;d<ye.maxMorphNormals;d++)f["morphNormal"+d]>=0&&e.numSupportedMorphNormals++;o.uniformsList=[];var m=o.program.getUniforms();for(var v in o.__webglShader.uniforms){var g=m[v];g&&o.uniformsList.push([o.__webglShader.uniforms[v],g])}}function w(e){_(e),e.transparent===!0?He.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha):He.setBlending(i.NoBlending),He.setDepthFunc(e.depthFunc),He.setDepthTest(e.depthTest),He.setDepthWrite(e.depthWrite),He.setColorWrite(e.colorWrite),He.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function _(e){e.side!==i.DoubleSide?He.enable(je.CULL_FACE):He.disable(je.CULL_FACE),He.setFlipSided(e.side===i.BackSide)}function S(e,t,r,n,o){Me=0;var a=We.get(n);(n.needsUpdate||!a.program)&&(x(n,t,r,o),n.needsUpdate=!1);var s=!1,c=!1,h=!1,u=a.program,l=u.getUniforms(),p=a.__webglShader.uniforms;if(u.id!==be&&(je.useProgram(u.program),be=u.id,s=!0,c=!0,h=!0),n.id!==we&&(-1===we&&(h=!0),we=n.id,c=!0),(s||e!==Se)&&(je.uniformMatrix4fv(l.projectionMatrix,!1,e.projectionMatrix.elements),Ge.logarithmicDepthBuffer&&je.uniform1f(l.logDepthBufFC,2/(Math.log(e.far+1)/Math.LN2)),e!==Se&&(Se=e),(n instanceof i.ShaderMaterial||n instanceof i.MeshPhongMaterial||n.envMap)&&void 0!==l.cameraPosition&&(De.setFromMatrixPosition(e.matrixWorld),je.uniform3f(l.cameraPosition,De.x,De.y,De.z)),(n instanceof i.MeshPhongMaterial||n instanceof i.MeshLambertMaterial||n instanceof i.MeshBasicMaterial||n instanceof i.ShaderMaterial||n.skinning)&&void 0!==l.viewMatrix&&je.uniformMatrix4fv(l.viewMatrix,!1,e.matrixWorldInverse.elements)),n.skinning)if(o.bindMatrix&&void 0!==l.bindMatrix&&je.uniformMatrix4fv(l.bindMatrix,!1,o.bindMatrix.elements),o.bindMatrixInverse&&void 0!==l.bindMatrixInverse&&je.uniformMatrix4fv(l.bindMatrixInverse,!1,o.bindMatrixInverse.elements),Ge.floatVertexTextures&&o.skeleton&&o.skeleton.useVertexTexture){if(void 0!==l.boneTexture){var f=O();je.uniform1i(l.boneTexture,f),ye.setTexture(o.skeleton.boneTexture,f)}void 0!==l.boneTextureWidth&&je.uniform1i(l.boneTextureWidth,o.skeleton.boneTextureWidth),void 0!==l.boneTextureHeight&&je.uniform1i(l.boneTextureHeight,o.skeleton.boneTextureHeight)}else o.skeleton&&o.skeleton.boneMatrices&&void 0!==l.boneGlobalMatrices&&je.uniformMatrix4fv(l.boneGlobalMatrices,!1,o.skeleton.boneMatrices);return c&&(r&&n.fog&&A(p,r),(n instanceof i.MeshPhongMaterial||n instanceof i.MeshLambertMaterial||n.lights)&&(Ve&&(h=!0,U(t,e),Ve=!1),h?(L(p,Fe),P(p,!0)):P(p,!1)),(n instanceof i.MeshBasicMaterial||n instanceof i.MeshLambertMaterial||n instanceof i.MeshPhongMaterial)&&M(p,n),n instanceof i.LineBasicMaterial?T(p,n):n instanceof i.LineDashedMaterial?(T(p,n),E(p,n)):n instanceof i.PointsMaterial?C(p,n):n instanceof i.MeshPhongMaterial?k(p,n):n instanceof i.MeshDepthMaterial?(p.mNear.value=e.near,p.mFar.value=e.far,p.opacity.value=n.opacity):n instanceof i.MeshNormalMaterial&&(p.opacity.value=n.opacity),o.receiveShadow&&!n._shadowPass&&R(p,t,e),V(a.uniformsList)),D(l,o),void 0!==l.modelMatrix&&je.uniformMatrix4fv(l.modelMatrix,!1,o.matrixWorld.elements),u}function M(e,t){e.opacity.value=t.opacity,e.diffuse.value=t.color,t.emissive&&(e.emissive.value=t.emissive),e.map.value=t.map,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var r;if(t.map?r=t.map:t.specularMap?r=t.specularMap:t.displacementMap?r=t.displacementMap:t.normalMap?r=t.normalMap:t.bumpMap?r=t.bumpMap:t.alphaMap?r=t.alphaMap:t.emissiveMap&&(r=t.emissiveMap),void 0!==r){r instanceof i.WebGLRenderTarget&&(r=r.texture);var n=r.offset,o=r.repeat;e.offsetRepeat.value.set(n.x,n.y,o.x,o.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap instanceof i.WebGLRenderTargetCube?1:-1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio}function T(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function E(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function C(e,t){if(e.psColor.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size,e.scale.value=Q.height/2,e.map.value=t.map,null!==t.map){var r=t.map.offset,n=t.map.repeat;e.offsetRepeat.value.set(r.x,r.y,n.x,n.y)}}function A(e,t){e.fogColor.value=t.color,t instanceof i.Fog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t instanceof i.FogExp2&&(e.fogDensity.value=t.density)}function k(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function L(e,t){e.ambientLightColor.value=t.ambient,e.directionalLightColor.value=t.directional.colors,e.directionalLightDirection.value=t.directional.positions,e.pointLightColor.value=t.point.colors,e.pointLightPosition.value=t.point.positions,e.pointLightDistance.value=t.point.distances,e.pointLightDecay.value=t.point.decays,e.spotLightColor.value=t.spot.colors,e.spotLightPosition.value=t.spot.positions,e.spotLightDistance.value=t.spot.distances,e.spotLightDirection.value=t.spot.directions,e.spotLightAngleCos.value=t.spot.anglesCos,e.spotLightExponent.value=t.spot.exponents,e.spotLightDecay.value=t.spot.decays,e.hemisphereLightSkyColor.value=t.hemi.skyColors,e.hemisphereLightGroundColor.value=t.hemi.groundColors,e.hemisphereLightDirection.value=t.hemi.positions}function P(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLightColor.needsUpdate=t,e.directionalLightDirection.needsUpdate=t,e.pointLightColor.needsUpdate=t,e.pointLightPosition.needsUpdate=t,e.pointLightDistance.needsUpdate=t,e.pointLightDecay.needsUpdate=t,e.spotLightColor.needsUpdate=t,e.spotLightPosition.needsUpdate=t,e.spotLightDistance.needsUpdate=t,e.spotLightDirection.needsUpdate=t,e.spotLightAngleCos.needsUpdate=t,e.spotLightExponent.needsUpdate=t,e.spotLightDecay.needsUpdate=t,e.hemisphereLightSkyColor.needsUpdate=t,e.hemisphereLightGroundColor.needsUpdate=t,e.hemisphereLightDirection.needsUpdate=t}function R(e,t,r){if(e.shadowMatrix)for(var n=0,o=0,a=t.length;a>o;o++){var s=t[o];if(s.castShadow===!0&&(s instanceof i.PointLight||s instanceof i.SpotLight||s instanceof i.DirectionalLight)){var c=s.shadow;s instanceof i.PointLight?(De.setFromMatrixPosition(s.matrixWorld).negate(),c.matrix.identity().setPosition(De),e.shadowDarkness.value[n]=-c.darkness):e.shadowDarkness.value[n]=c.darkness,e.shadowMatrix.value[n]=c.matrix,e.shadowMap.value[n]=c.map,e.shadowMapSize.value[n]=c.mapSize,e.shadowBias.value[n]=c.bias,n++}}}function D(e,t){je.uniformMatrix4fv(e.modelViewMatrix,!1,t.modelViewMatrix.elements),e.normalMatrix&&je.uniformMatrix3fv(e.normalMatrix,!1,t.normalMatrix.elements)}function O(){var e=Me;return e>=Ge.maxTextures&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+Ge.maxTextures),Me+=1,e}function V(e){for(var t,r,n=0,o=e.length;o>n;n++){var a=e[n][0];if(a.needsUpdate!==!1){var s=a.type,c=a.value,h=e[n][1];switch(s){case"1i":je.uniform1i(h,c);break;case"1f":je.uniform1f(h,c);break;case"2f":je.uniform2f(h,c[0],c[1]);break;case"3f":je.uniform3f(h,c[0],c[1],c[2]);break;case"4f":je.uniform4f(h,c[0],c[1],c[2],c[3]);break;case"1iv":je.uniform1iv(h,c);break;case"3iv":je.uniform3iv(h,c);break;case"1fv":je.uniform1fv(h,c);break;case"2fv":je.uniform2fv(h,c);break;case"3fv":je.uniform3fv(h,c);break;case"4fv":je.uniform4fv(h,c);break;case"Matrix3fv":je.uniformMatrix3fv(h,!1,c);break;case"Matrix4fv":je.uniformMatrix4fv(h,!1,c);break;case"i":je.uniform1i(h,c);break;case"f":je.uniform1f(h,c);break;case"v2":je.uniform2f(h,c.x,c.y);break;case"v3":je.uniform3f(h,c.x,c.y,c.z);break;case"v4":je.uniform4f(h,c.x,c.y,c.z,c.w);break;case"c":je.uniform3f(h,c.r,c.g,c.b);break;case"iv1":je.uniform1iv(h,c);break;case"iv":je.uniform3iv(h,c);break;case"fv1":je.uniform1fv(h,c);break;case"fv":je.uniform3fv(h,c);break;case"v2v":void 0===a._array&&(a._array=new Float32Array(2*c.length));for(var u=0,l=0,p=c.length;p>u;u++,l+=2)a._array[l+0]=c[u].x,a._array[l+1]=c[u].y;je.uniform2fv(h,a._array);break;case"v3v":void 0===a._array&&(a._array=new Float32Array(3*c.length));for(var u=0,f=0,p=c.length;p>u;u++,f+=3)a._array[f+0]=c[u].x,a._array[f+1]=c[u].y,a._array[f+2]=c[u].z;je.uniform3fv(h,a._array);break;case"v4v":void 0===a._array&&(a._array=new Float32Array(4*c.length));for(var u=0,d=0,p=c.length;p>u;u++,d+=4)a._array[d+0]=c[u].x,a._array[d+1]=c[u].y,a._array[d+2]=c[u].z,a._array[d+3]=c[u].w;je.uniform4fv(h,a._array);break;case"m3":je.uniformMatrix3fv(h,!1,c.elements);break;case"m3v":void 0===a._array&&(a._array=new Float32Array(9*c.length));for(var u=0,p=c.length;p>u;u++)c[u].flattenToArrayOffset(a._array,9*u);je.uniformMatrix3fv(h,!1,a._array);break;case"m4":je.uniformMatrix4fv(h,!1,c.elements);break;case"m4v":void 0===a._array&&(a._array=new Float32Array(16*c.length));for(var u=0,p=c.length;p>u;u++)c[u].flattenToArrayOffset(a._array,16*u);je.uniformMatrix4fv(h,!1,a._array);break;case"t":if(t=c,r=O(),je.uniform1i(h,r),!t)continue;t instanceof i.CubeTexture||Array.isArray(t.image)&&6===t.image.length?H(t,r):t instanceof i.WebGLRenderTargetCube?W(t.texture,r):t instanceof i.WebGLRenderTarget?ye.setTexture(t.texture,r):ye.setTexture(t,r);break;case"tv":void 0===a._array&&(a._array=[]);for(var u=0,p=a.value.length;p>u;u++)a._array[u]=O();je.uniform1iv(h,a._array);for(var u=0,p=a.value.length;p>u;u++)t=a.value[u],
r=a._array[u],t&&(t instanceof i.CubeTexture||t.image instanceof Array&&6===t.image.length?H(t,r):t instanceof i.WebGLRenderTarget?ye.setTexture(t.texture,r):t instanceof i.WebGLRenderTargetCube?W(t.texture,r):ye.setTexture(t,r));break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+s)}}}}function F(e,t,r,n){e[t+0]=r.r*n,e[t+1]=r.g*n,e[t+2]=r.b*n}function U(e,t){var r,n,o,a,s,c,h,u,l=0,p=0,f=0,d=Fe,m=t.matrixWorldInverse,v=d.directional.colors,g=d.directional.positions,y=d.point.colors,b=d.point.positions,x=d.point.distances,w=d.point.decays,_=d.spot.colors,S=d.spot.positions,M=d.spot.distances,T=d.spot.directions,E=d.spot.anglesCos,C=d.spot.exponents,A=d.spot.decays,k=d.hemi.skyColors,L=d.hemi.groundColors,P=d.hemi.positions,R=0,D=0,O=0,V=0,U=0,N=0,j=0,B=0,z=0,I=0,G=0,H=0;for(r=0,n=e.length;n>r;r++)if(o=e[r],a=o.color,h=o.intensity,u=o.distance,o instanceof i.AmbientLight){if(!o.visible)continue;l+=a.r,p+=a.g,f+=a.b}else if(o instanceof i.DirectionalLight){if(U+=1,!o.visible)continue;Oe.setFromMatrixPosition(o.matrixWorld),De.setFromMatrixPosition(o.target.matrixWorld),Oe.sub(De),Oe.transformDirection(m),z=3*R,g[z+0]=Oe.x,g[z+1]=Oe.y,g[z+2]=Oe.z,F(v,z,a,h),R+=1}else if(o instanceof i.PointLight){if(N+=1,!o.visible)continue;I=3*D,F(y,I,a,h),De.setFromMatrixPosition(o.matrixWorld),De.applyMatrix4(m),b[I+0]=De.x,b[I+1]=De.y,b[I+2]=De.z,x[D]=u,w[D]=0===o.distance?0:o.decay,D+=1}else if(o instanceof i.SpotLight){if(j+=1,!o.visible)continue;G=3*O,F(_,G,a,h),Oe.setFromMatrixPosition(o.matrixWorld),De.copy(Oe).applyMatrix4(m),S[G+0]=De.x,S[G+1]=De.y,S[G+2]=De.z,M[O]=u,De.setFromMatrixPosition(o.target.matrixWorld),Oe.sub(De),Oe.transformDirection(m),T[G+0]=Oe.x,T[G+1]=Oe.y,T[G+2]=Oe.z,E[O]=Math.cos(o.angle),C[O]=o.exponent,A[O]=0===o.distance?0:o.decay,O+=1}else if(o instanceof i.HemisphereLight){if(B+=1,!o.visible)continue;Oe.setFromMatrixPosition(o.matrixWorld),Oe.transformDirection(m),H=3*V,P[H+0]=Oe.x,P[H+1]=Oe.y,P[H+2]=Oe.z,s=o.color,c=o.groundColor,F(k,H,s,h),F(L,H,c,h),V+=1}for(r=3*R,n=Math.max(v.length,3*U);n>r;r++)v[r]=0;for(r=3*D,n=Math.max(y.length,3*N);n>r;r++)y[r]=0;for(r=3*O,n=Math.max(_.length,3*j);n>r;r++)_[r]=0;for(r=3*V,n=Math.max(k.length,3*B);n>r;r++)k[r]=0;for(r=3*V,n=Math.max(L.length,3*B);n>r;r++)L[r]=0;d.directional.length=R,d.point.length=D,d.spot.length=O,d.hemi.length=V,d.ambient[0]=l,d.ambient[1]=p,d.ambient[2]=f}function N(e,t,r){var n;if(r?(je.texParameteri(e,je.TEXTURE_WRAP_S,K(t.wrapS)),je.texParameteri(e,je.TEXTURE_WRAP_T,K(t.wrapT)),je.texParameteri(e,je.TEXTURE_MAG_FILTER,K(t.magFilter)),je.texParameteri(e,je.TEXTURE_MIN_FILTER,K(t.minFilter))):(je.texParameteri(e,je.TEXTURE_WRAP_S,je.CLAMP_TO_EDGE),je.texParameteri(e,je.TEXTURE_WRAP_T,je.CLAMP_TO_EDGE),(t.wrapS!==i.ClampToEdgeWrapping||t.wrapT!==i.ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",t),je.texParameteri(e,je.TEXTURE_MAG_FILTER,Y(t.magFilter)),je.texParameteri(e,je.TEXTURE_MIN_FILTER,Y(t.minFilter)),t.minFilter!==i.NearestFilter&&t.minFilter!==i.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",t)),n=Ie.get("EXT_texture_filter_anisotropic")){if(t.type===i.FloatType&&null===Ie.get("OES_texture_float_linear"))return;if(t.type===i.HalfFloatType&&null===Ie.get("OES_texture_half_float_linear"))return;(t.anisotropy>1||We.get(t).__currentAnisotropy)&&(je.texParameterf(e,n.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,ye.getMaxAnisotropy())),We.get(t).__currentAnisotropy=t.anisotropy)}}function j(e,t,r){void 0===e.__webglInit&&(e.__webglInit=!0,t.addEventListener("dispose",a),e.__webglTexture=je.createTexture(),Ue.textures++),He.activeTexture(je.TEXTURE0+r),He.bindTexture(je.TEXTURE_2D,e.__webglTexture),je.pixelStorei(je.UNPACK_FLIP_Y_WEBGL,t.flipY),je.pixelStorei(je.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),je.pixelStorei(je.UNPACK_ALIGNMENT,t.unpackAlignment),t.image=B(t.image,Ge.maxTextureSize),I(t)&&z(t.image)===!1&&(t.image=G(t.image));var n=t.image,o=z(n),s=K(t.format),c=K(t.type);N(je.TEXTURE_2D,t,o);var h,u=t.mipmaps;if(t instanceof i.DataTexture)if(u.length>0&&o){for(var l=0,p=u.length;p>l;l++)h=u[l],He.texImage2D(je.TEXTURE_2D,l,s,h.width,h.height,0,s,c,h.data);t.generateMipmaps=!1}else He.texImage2D(je.TEXTURE_2D,0,s,n.width,n.height,0,s,c,n.data);else if(t instanceof i.CompressedTexture)for(var l=0,p=u.length;p>l;l++)h=u[l],t.format!==i.RGBAFormat&&t.format!==i.RGBFormat?He.getCompressedTextureFormats().indexOf(s)>-1?He.compressedTexImage2D(je.TEXTURE_2D,l,s,h.width,h.height,0,h.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):He.texImage2D(je.TEXTURE_2D,l,s,h.width,h.height,0,s,c,h.data);else if(u.length>0&&o){for(var l=0,p=u.length;p>l;l++)h=u[l],He.texImage2D(je.TEXTURE_2D,l,s,s,c,h);t.generateMipmaps=!1}else He.texImage2D(je.TEXTURE_2D,0,s,s,c,t.image);t.generateMipmaps&&o&&je.generateMipmap(je.TEXTURE_2D),e.__version=t.version,t.onUpdate&&t.onUpdate(t)}function B(e,t){if(e.width>t||e.height>t){var r=t/Math.max(e.width,e.height),n=document.createElement("canvas");n.width=Math.floor(e.width*r),n.height=Math.floor(e.height*r);var i=n.getContext("2d");return i.drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+n.width+"x"+n.height,e),n}return e}function z(e){return i.Math.isPowerOfTwo(e.width)&&i.Math.isPowerOfTwo(e.height)}function I(e){return e.wrapS!==i.ClampToEdgeWrapping||e.wrapT!==i.ClampToEdgeWrapping?!0:e.minFilter!==i.NearestFilter&&e.minFilter!==i.LinearFilter?!0:!1}function G(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=document.createElement("canvas");t.width=i.Math.nearestPowerOfTwo(e.width),t.height=i.Math.nearestPowerOfTwo(e.height);var r=t.getContext("2d");return r.drawImage(e,0,0,t.width,t.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e),t}return e}function H(e,t){var r=We.get(e);if(6===e.image.length)if(e.version>0&&r.__version!==e.version){r.__image__webglTextureCube||(e.addEventListener("dispose",a),r.__image__webglTextureCube=je.createTexture(),Ue.textures++),He.activeTexture(je.TEXTURE0+t),He.bindTexture(je.TEXTURE_CUBE_MAP,r.__image__webglTextureCube),je.pixelStorei(je.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var n=e instanceof i.CompressedTexture,o=e.image[0]instanceof i.DataTexture,s=[],c=0;6>c;c++)!ye.autoScaleCubemaps||n||o?s[c]=o?e.image[c].image:e.image[c]:s[c]=B(e.image[c],Ge.maxCubemapSize);var h=s[0],u=z(h),l=K(e.format),p=K(e.type);N(je.TEXTURE_CUBE_MAP,e,u);for(var c=0;6>c;c++)if(n)for(var f,d=s[c].mipmaps,m=0,v=d.length;v>m;m++)f=d[m],e.format!==i.RGBAFormat&&e.format!==i.RGBFormat?He.getCompressedTextureFormats().indexOf(l)>-1?He.compressedTexImage2D(je.TEXTURE_CUBE_MAP_POSITIVE_X+c,m,l,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()"):He.texImage2D(je.TEXTURE_CUBE_MAP_POSITIVE_X+c,m,l,f.width,f.height,0,l,p,f.data);else o?He.texImage2D(je.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,l,s[c].width,s[c].height,0,l,p,s[c].data):He.texImage2D(je.TEXTURE_CUBE_MAP_POSITIVE_X+c,0,l,l,p,s[c]);e.generateMipmaps&&u&&je.generateMipmap(je.TEXTURE_CUBE_MAP),r.__version=e.version,e.onUpdate&&e.onUpdate(e)}else He.activeTexture(je.TEXTURE0+t),He.bindTexture(je.TEXTURE_CUBE_MAP,r.__image__webglTextureCube)}function W(e,t){He.activeTexture(je.TEXTURE0+t),He.bindTexture(je.TEXTURE_CUBE_MAP,We.get(e).__webglTexture)}function X(e,t,r){je.bindFramebuffer(je.FRAMEBUFFER,e),je.framebufferTexture2D(je.FRAMEBUFFER,je.COLOR_ATTACHMENT0,r,We.get(t.texture).__webglTexture,0)}function $(e,t){je.bindRenderbuffer(je.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(je.renderbufferStorage(je.RENDERBUFFER,je.DEPTH_COMPONENT16,t.width,t.height),je.framebufferRenderbuffer(je.FRAMEBUFFER,je.DEPTH_ATTACHMENT,je.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(je.renderbufferStorage(je.RENDERBUFFER,je.DEPTH_STENCIL,t.width,t.height),je.framebufferRenderbuffer(je.FRAMEBUFFER,je.DEPTH_STENCIL_ATTACHMENT,je.RENDERBUFFER,e)):je.renderbufferStorage(je.RENDERBUFFER,je.RGBA4,t.width,t.height)}function q(e){var t=e instanceof i.WebGLRenderTargetCube?je.TEXTURE_CUBE_MAP:je.TEXTURE_2D,r=We.get(e.texture).__webglTexture;He.bindTexture(t,r),je.generateMipmap(t),He.bindTexture(t,null)}function Y(e){return e===i.NearestFilter||e===i.NearestMipMapNearestFilter||e===i.NearestMipMapLinearFilter?je.NEAREST:je.LINEAR}function K(e){var t;if(e===i.RepeatWrapping)return je.REPEAT;if(e===i.ClampToEdgeWrapping)return je.CLAMP_TO_EDGE;if(e===i.MirroredRepeatWrapping)return je.MIRRORED_REPEAT;if(e===i.NearestFilter)return je.NEAREST;if(e===i.NearestMipMapNearestFilter)return je.NEAREST_MIPMAP_NEAREST;if(e===i.NearestMipMapLinearFilter)return je.NEAREST_MIPMAP_LINEAR;if(e===i.LinearFilter)return je.LINEAR;if(e===i.LinearMipMapNearestFilter)return je.LINEAR_MIPMAP_NEAREST;if(e===i.LinearMipMapLinearFilter)return je.LINEAR_MIPMAP_LINEAR;if(e===i.UnsignedByteType)return je.UNSIGNED_BYTE;if(e===i.UnsignedShort4444Type)return je.UNSIGNED_SHORT_4_4_4_4;if(e===i.UnsignedShort5551Type)return je.UNSIGNED_SHORT_5_5_5_1;if(e===i.UnsignedShort565Type)return je.UNSIGNED_SHORT_5_6_5;if(e===i.ByteType)return je.BYTE;if(e===i.ShortType)return je.SHORT;if(e===i.UnsignedShortType)return je.UNSIGNED_SHORT;if(e===i.IntType)return je.INT;if(e===i.UnsignedIntType)return je.UNSIGNED_INT;if(e===i.FloatType)return je.FLOAT;if(t=Ie.get("OES_texture_half_float"),null!==t&&e===i.HalfFloatType)return t.HALF_FLOAT_OES;if(e===i.AlphaFormat)return je.ALPHA;if(e===i.RGBFormat)return je.RGB;if(e===i.RGBAFormat)return je.RGBA;if(e===i.LuminanceFormat)return je.LUMINANCE;if(e===i.LuminanceAlphaFormat)return je.LUMINANCE_ALPHA;if(e===i.AddEquation)return je.FUNC_ADD;if(e===i.SubtractEquation)return je.FUNC_SUBTRACT;if(e===i.ReverseSubtractEquation)return je.FUNC_REVERSE_SUBTRACT;if(e===i.ZeroFactor)return je.ZERO;if(e===i.OneFactor)return je.ONE;if(e===i.SrcColorFactor)return je.SRC_COLOR;if(e===i.OneMinusSrcColorFactor)return je.ONE_MINUS_SRC_COLOR;if(e===i.SrcAlphaFactor)return je.SRC_ALPHA;if(e===i.OneMinusSrcAlphaFactor)return je.ONE_MINUS_SRC_ALPHA;if(e===i.DstAlphaFactor)return je.DST_ALPHA;if(e===i.OneMinusDstAlphaFactor)return je.ONE_MINUS_DST_ALPHA;if(e===i.DstColorFactor)return je.DST_COLOR;if(e===i.OneMinusDstColorFactor)return je.ONE_MINUS_DST_COLOR;if(e===i.SrcAlphaSaturateFactor)return je.SRC_ALPHA_SATURATE;if(t=Ie.get("WEBGL_compressed_texture_s3tc"),null!==t){if(e===i.RGB_S3TC_DXT1_Format)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===i.RGBA_S3TC_DXT1_Format)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===i.RGBA_S3TC_DXT3_Format)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===i.RGBA_S3TC_DXT5_Format)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t=Ie.get("WEBGL_compressed_texture_pvrtc"),null!==t){if(e===i.RGB_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===i.RGB_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===i.RGBA_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===i.RGBA_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t=Ie.get("EXT_blend_minmax"),null!==t){if(e===i.MinEquation)return t.MIN_EXT;if(e===i.MaxEquation)return t.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",i.REVISION),e=e||{};var Q=void 0!==e.canvas?e.canvas:document.createElement("canvas"),Z=void 0!==e.context?e.context:null,J=Q.width,ee=Q.height,te=1,re=void 0!==e.alpha?e.alpha:!1,ne=void 0!==e.depth?e.depth:!0,ie=void 0!==e.stencil?e.stencil:!0,oe=void 0!==e.antialias?e.antialias:!1,ae=void 0!==e.premultipliedAlpha?e.premultipliedAlpha:!0,se=void 0!==e.preserveDrawingBuffer?e.preserveDrawingBuffer:!1,ce=new i.Color(0),he=0,ue=[],le=[],pe=-1,fe=[],de=-1,me=new Float32Array(8),ve=[],ge=[];this.domElement=Q,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0;var ye=this,be=null,xe=null,we=-1,_e="",Se=null,Me=0,Te=0,Ee=0,Ce=Q.width,Ae=Q.height,ke=0,Le=0,Pe=new i.Frustum,Re=new i.Matrix4,De=new i.Vector3,Oe=new i.Vector3,Ve=!0,Fe={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[],decays:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[],decays:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},Ue={geometries:0,textures:0},Ne={calls:0,vertices:0,faces:0,points:0};this.info={render:Ne,memory:Ue,programs:null};var je;try{var Be={alpha:re,depth:ne,stencil:ie,antialias:oe,premultipliedAlpha:ae,preserveDrawingBuffer:se};if(je=Z||Q.getContext("webgl",Be)||Q.getContext("experimental-webgl",Be),null===je)throw null!==Q.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";Q.addEventListener("webglcontextlost",o,!1)}catch(ze){console.error("THREE.WebGLRenderer: "+ze)}var Ie=new i.WebGLExtensions(je);Ie.get("OES_texture_float"),Ie.get("OES_texture_float_linear"),Ie.get("OES_texture_half_float"),Ie.get("OES_texture_half_float_linear"),Ie.get("OES_standard_derivatives"),Ie.get("ANGLE_instanced_arrays"),Ie.get("OES_element_index_uint")&&(i.BufferGeometry.MaxIndex=4294967296);var Ge=new i.WebGLCapabilities(je,Ie,e),He=new i.WebGLState(je,Ie,K),We=new i.WebGLProperties,Xe=new i.WebGLObjects(je,We,this.info),$e=new i.WebGLPrograms(this,Ge);this.info.programs=$e.programs;var qe=new i.WebGLBufferRenderer(je,Ie,Ne),Ye=new i.WebGLIndexedBufferRenderer(je,Ie,Ne);r(),this.context=je,this.capabilities=Ge,this.extensions=Ie,this.state=He;var Ke=new i.WebGLShadowMap(this,ue,Xe);this.shadowMap=Ke;var Qe=new i.SpritePlugin(this,ve),Ze=new i.LensFlarePlugin(this,ge);this.getContext=function(){return je},this.getContextAttributes=function(){return je.getContextAttributes()},this.forceContextLoss=function(){Ie.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){var e;return function(){if(void 0!==e)return e;var t=Ie.get("EXT_texture_filter_anisotropic");return e=null!==t?je.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}}(),this.getPrecision=function(){return Ge.precision},this.getPixelRatio=function(){return te},this.setPixelRatio=function(e){void 0!==e&&(te=e)},this.getSize=function(){return{width:J,height:ee}},this.setSize=function(e,t,r){J=e,ee=t,Q.width=e*te,Q.height=t*te,r!==!1&&(Q.style.width=e+"px",Q.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,r,n){Te=e*te,Ee=t*te,Ce=r*te,Ae=n*te,je.viewport(Te,Ee,Ce,Ae)},this.getViewport=function(e){e.x=Te/te,e.y=Ee/te,e.z=Ce/te,e.w=Ae/te},this.setScissor=function(e,t,r,n){je.scissor(e*te,t*te,r*te,n*te)},this.enableScissorTest=function(e){He.setScissorTest(e)},this.getClearColor=function(){return ce},this.setClearColor=function(e,r){ce.set(e),he=void 0!==r?r:1,t(ce.r,ce.g,ce.b,he)},this.getClearAlpha=function(){return he},this.setClearAlpha=function(e){he=e,t(ce.r,ce.g,ce.b,he)},this.clear=function(e,t,r){var n=0;(void 0===e||e)&&(n|=je.COLOR_BUFFER_BIT),(void 0===t||t)&&(n|=je.DEPTH_BUFFER_BIT),(void 0===r||r)&&(n|=je.STENCIL_BUFFER_BIT),je.clear(n)},this.clearColor=function(){je.clear(je.COLOR_BUFFER_BIT)},this.clearDepth=function(){je.clear(je.DEPTH_BUFFER_BIT)},this.clearStencil=function(){je.clear(je.STENCIL_BUFFER_BIT)},this.clearTarget=function(e,t,r,n){this.setRenderTarget(e),this.clear(t,r,n)},this.resetGLState=n,this.dispose=function(){Q.removeEventListener("webglcontextlost",o,!1)},this.renderBufferImmediate=function(e,t,r){He.initAttributes();var n=We.get(e);e.hasPositions&&!n.position&&(n.position=je.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=je.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=je.createBuffer()),e.hasColors&&!n.color&&(n.color=je.createBuffer());var o=t.getAttributes();if(e.hasPositions&&(je.bindBuffer(je.ARRAY_BUFFER,n.position),je.bufferData(je.ARRAY_BUFFER,e.positionArray,je.DYNAMIC_DRAW),He.enableAttribute(o.position),je.vertexAttribPointer(o.position,3,je.FLOAT,!1,0,0)),e.hasNormals){if(je.bindBuffer(je.ARRAY_BUFFER,n.normal),"MeshPhongMaterial"!==r.type&&r.shading===i.FlatShading)for(var a=0,s=3*e.count;s>a;a+=9){var c=e.normalArray,h=(c[a+0]+c[a+3]+c[a+6])/3,u=(c[a+1]+c[a+4]+c[a+7])/3,l=(c[a+2]+c[a+5]+c[a+8])/3;c[a+0]=h,c[a+1]=u,c[a+2]=l,c[a+3]=h,c[a+4]=u,c[a+5]=l,c[a+6]=h,c[a+7]=u,c[a+8]=l}je.bufferData(je.ARRAY_BUFFER,e.normalArray,je.DYNAMIC_DRAW),He.enableAttribute(o.normal),je.vertexAttribPointer(o.normal,3,je.FLOAT,!1,0,0)}e.hasUvs&&r.map&&(je.bindBuffer(je.ARRAY_BUFFER,n.uv),je.bufferData(je.ARRAY_BUFFER,e.uvArray,je.DYNAMIC_DRAW),He.enableAttribute(o.uv),je.vertexAttribPointer(o.uv,2,je.FLOAT,!1,0,0)),e.hasColors&&r.vertexColors!==i.NoColors&&(je.bindBuffer(je.ARRAY_BUFFER,n.color),je.bufferData(je.ARRAY_BUFFER,e.colorArray,je.DYNAMIC_DRAW),He.enableAttribute(o.color),je.vertexAttribPointer(o.color,3,je.FLOAT,!1,0,0)),He.disableUnusedAttributes(),je.drawArrays(je.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,r,n,o,a,s){w(o);var c=S(e,t,r,o,a),h=!1,u=n.id+"_"+c.id+"_"+o.wireframe;u!==_e&&(_e=u,h=!0);var l=a.morphTargetInfluences;if(void 0!==l){for(var p=[],m=0,v=l.length;v>m;m++){var g=l[m];p.push([g,m])}p.sort(d),p.length>8&&(p.length=8);for(var y=n.morphAttributes,m=0,v=p.length;v>m;m++){var g=p[m];if(me[m]=g[0],0!==g[0]){var b=g[1];o.morphTargets===!0&&y.position&&n.addAttribute("morphTarget"+m,y.position[b]),o.morphNormals===!0&&y.normal&&n.addAttribute("morphNormal"+m,y.normal[b])}else o.morphTargets===!0&&n.removeAttribute("morphTarget"+m),o.morphNormals===!0&&n.removeAttribute("morphNormal"+m)}var x=c.getUniforms();null!==x.morphTargetInfluences&&je.uniform1fv(x.morphTargetInfluences,me),h=!0}var b=n.index,_=n.attributes.position;o.wireframe===!0&&(b=Xe.getWireframeAttribute(n));var M;null!==b?(M=Ye,M.setIndex(b)):M=qe,h&&(f(o,c,n),null!==b&&je.bindBuffer(je.ELEMENT_ARRAY_BUFFER,Xe.getAttributeBuffer(b)));var T=0,E=1/0;null!==b?E=b.count:void 0!==_&&(E=_.count);var C=n.drawRange.start,A=n.drawRange.count,k=null!==s?s.start:0,L=null!==s?s.count:1/0,P=Math.max(T,C,k),R=Math.min(T+E,C+A,k+L)-1,D=Math.max(0,R-P+1);if(a instanceof i.Mesh)o.wireframe===!0?(He.setLineWidth(o.wireframeLinewidth*te),M.setMode(je.LINES)):M.setMode(je.TRIANGLES),n instanceof i.InstancedBufferGeometry&&n.maxInstancedCount>0?M.renderInstances(n):M.render(P,D);else if(a instanceof i.Line){var O=o.linewidth;void 0===O&&(O=1),He.setLineWidth(O*te),a instanceof i.LineSegments?M.setMode(je.LINES):M.setMode(je.LINE_STRIP),M.render(P,D)}else a instanceof i.Points&&(M.setMode(je.POINTS),M.render(P,D))},this.render=function(e,t,r,n){if(t instanceof i.Camera==!1)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");var o=e.fog;if(_e="",we=-1,Se=null,Ve=!0,e.autoUpdate===!0&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),Re.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Pe.setFromMatrix(Re),ue.length=0,pe=-1,de=-1,ve.length=0,ge.length=0,y(e,t),le.length=pe+1,fe.length=de+1,ye.sortObjects===!0&&(le.sort(m),fe.sort(v)),Ke.render(e),Ne.calls=0,Ne.vertices=0,Ne.faces=0,Ne.points=0,this.setRenderTarget(r),(this.autoClear||n)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),e.overrideMaterial){var a=e.overrideMaterial;b(le,t,ue,o,a),b(fe,t,ue,o,a)}else He.setBlending(i.NoBlending),b(le,t,ue,o),b(fe,t,ue,o);if(Qe.render(e,t),Ze.render(e,t,ke,Le),r){var s=r.texture,c=z(r);s.generateMipmaps&&c&&s.minFilter!==i.NearestFilter&&s.minFilter!==i.LinearFilter&&q(r)}He.setDepthTest(!0),He.setDepthWrite(!0),He.setColorWrite(!0)},this.setFaceCulling=function(e,t){e===i.CullFaceNone?He.disable(je.CULL_FACE):(t===i.FrontFaceDirectionCW?je.frontFace(je.CW):je.frontFace(je.CCW),e===i.CullFaceBack?je.cullFace(je.BACK):e===i.CullFaceFront?je.cullFace(je.FRONT):je.cullFace(je.FRONT_AND_BACK),He.enable(je.CULL_FACE))},this.setTexture=function(e,t){var r=We.get(e);if(e.version>0&&r.__version!==e.version){var n=e.image;return void 0===n?void console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",e):n.complete===!1?void console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e):void j(r,e,t)}He.activeTexture(je.TEXTURE0+t),He.bindTexture(je.TEXTURE_2D,r.__webglTexture)},this.setRenderTarget=function(e){var t=e instanceof i.WebGLRenderTargetCube;if(e&&void 0===We.get(e).__webglFramebuffer){var r=We.get(e),n=We.get(e.texture);void 0===e.depthBuffer&&(e.depthBuffer=!0),void 0===e.stencilBuffer&&(e.stencilBuffer=!0),e.addEventListener("dispose",s),n.__webglTexture=je.createTexture(),Ue.textures++;var o=z(e),a=K(e.texture.format),c=K(e.texture.type);if(t){r.__webglFramebuffer=[],r.__webglRenderbuffer=[],He.bindTexture(je.TEXTURE_CUBE_MAP,n.__webglTexture),N(je.TEXTURE_CUBE_MAP,e.texture,o);for(var h=0;6>h;h++)r.__webglFramebuffer[h]=je.createFramebuffer(),r.__webglRenderbuffer[h]=je.createRenderbuffer(),He.texImage2D(je.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,a,e.width,e.height,0,a,c,null),X(r.__webglFramebuffer[h],e,je.TEXTURE_CUBE_MAP_POSITIVE_X+h),$(r.__webglRenderbuffer[h],e);e.texture.generateMipmaps&&o&&je.generateMipmap(je.TEXTURE_CUBE_MAP)}else r.__webglFramebuffer=je.createFramebuffer(),e.shareDepthFrom?r.__webglRenderbuffer=e.shareDepthFrom.__webglRenderbuffer:r.__webglRenderbuffer=je.createRenderbuffer(),He.bindTexture(je.TEXTURE_2D,n.__webglTexture),N(je.TEXTURE_2D,e.texture,o),He.texImage2D(je.TEXTURE_2D,0,a,e.width,e.height,0,a,c,null),X(r.__webglFramebuffer,e,je.TEXTURE_2D),e.shareDepthFrom?e.depthBuffer&&!e.stencilBuffer?je.framebufferRenderbuffer(je.FRAMEBUFFER,je.DEPTH_ATTACHMENT,je.RENDERBUFFER,r.__webglRenderbuffer):e.depthBuffer&&e.stencilBuffer&&je.framebufferRenderbuffer(je.FRAMEBUFFER,je.DEPTH_STENCIL_ATTACHMENT,je.RENDERBUFFER,r.__webglRenderbuffer):$(r.__webglRenderbuffer,e),e.texture.generateMipmaps&&o&&je.generateMipmap(je.TEXTURE_2D);t?He.bindTexture(je.TEXTURE_CUBE_MAP,null):He.bindTexture(je.TEXTURE_2D,null),je.bindRenderbuffer(je.RENDERBUFFER,null),je.bindFramebuffer(je.FRAMEBUFFER,null)}var u,l,p,f,d;if(e){var r=We.get(e);u=t?r.__webglFramebuffer[e.activeCubeFace]:r.__webglFramebuffer,l=e.width,p=e.height,f=0,d=0}else u=null,l=Ce,p=Ae,f=Te,d=Ee;if(u!==xe&&(je.bindFramebuffer(je.FRAMEBUFFER,u),je.viewport(f,d,l,p),xe=u),t){var n=We.get(e.texture);je.framebufferTexture2D(je.FRAMEBUFFER,je.COLOR_ATTACHMENT0,je.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,n.__webglTexture,0)}ke=l,Le=p},this.readRenderTargetPixels=function(e,t,r,n,o,a){if(e instanceof i.WebGLRenderTarget==!1)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var s=We.get(e).__webglFramebuffer;if(s){var c=!1;s!==xe&&(je.bindFramebuffer(je.FRAMEBUFFER,s),c=!0);try{var h=e.texture;if(h.format!==i.RGBAFormat&&K(h.format)!==je.getParameter(je.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(h.type===i.UnsignedByteType||K(h.type)===je.getParameter(je.IMPLEMENTATION_COLOR_READ_TYPE)||h.type===i.FloatType&&Ie.get("WEBGL_color_buffer_float")||h.type===i.HalfFloatType&&Ie.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");je.checkFramebufferStatus(je.FRAMEBUFFER)===je.FRAMEBUFFER_COMPLETE?je.readPixels(t,r,n,o,K(h.format),K(h.type),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{c&&je.bindFramebuffer(je.FRAMEBUFFER,xe)}}},this.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),Ie.get("OES_texture_float")},this.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),Ie.get("OES_texture_half_float")},this.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),Ie.get("OES_standard_derivatives")},this.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),Ie.get("WEBGL_compressed_texture_s3tc")},this.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),Ie.get("WEBGL_compressed_texture_pvrtc")},this.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),Ie.get("EXT_blend_minmax")},this.supportsVertexTextures=function(){return Ge.vertexTextures},this.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),Ie.get("ANGLE_instanced_arrays")},this.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},this.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},this.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},this.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Object.defineProperties(this,{shadowMapEnabled:{get:function(){return Ke.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),Ke.enabled=e}},shadowMapType:{get:function(){return Ke.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),Ke.type=e}},shadowMapCullFace:{get:function(){return Ke.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),Ke.cullFace=e}},shadowMapDebug:{get:function(){return Ke.debug},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapDebug is now .shadowMap.debug."),Ke.debug=e}}})},i.WebGLRenderTarget=function(e,t,r){this.uuid=i.Math.generateUUID(),this.width=e,this.height=t,r=r||{},void 0===r.minFilter&&(r.minFilter=i.LinearFilter),this.texture=new i.Texture(void 0,void 0,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy),this.depthBuffer=void 0!==r.depthBuffer?r.depthBuffer:!0,this.stencilBuffer=void 0!==r.stencilBuffer?r.stencilBuffer:!0,this.shareDepthFrom=void 0!==r.shareDepthFrom?r.shareDepthFrom:null},i.WebGLRenderTarget.prototype={constructor:i.WebGLRenderTarget,get wrapS(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set wrapS(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e},get wrapT(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set wrapT(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e},get magFilter(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set magFilter(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e},get minFilter(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set minFilter(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e},get anisotropy(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set anisotropy(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e},get offset(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set offset(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e},get repeat(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set repeat(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e},get format(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set format(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e},get type(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set type(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e},get generateMipmaps(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set generateMipmaps(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e},setSize:function(e,t){(this.width!==e||this.height!==t)&&(this.width=e,this.height=t,this.dispose())},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.shareDepthFrom=e.shareDepthFrom,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},i.EventDispatcher.prototype.apply(i.WebGLRenderTarget.prototype),i.WebGLRenderTargetCube=function(e,t,r){i.WebGLRenderTarget.call(this,e,t,r),this.activeCubeFace=0},i.WebGLRenderTargetCube.prototype=Object.create(i.WebGLRenderTarget.prototype),i.WebGLRenderTargetCube.prototype.constructor=i.WebGLRenderTargetCube,i.WebGLBufferRenderer=function(e,t,r){function n(e){s=e}function o(t,n){e.drawArrays(s,t,n),r.calls++,r.vertices+=n,s===e.TRIANGLES&&(r.faces+=n/3)}function a(e){var r=t.get("ANGLE_instanced_arrays");if(null===r)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var n=e.attributes.position;n instanceof i.InterleavedBufferAttribute?r.drawArraysInstancedANGLE(s,0,n.data.count,e.maxInstancedCount):r.drawArraysInstancedANGLE(s,0,n.count,e.maxInstancedCount)}var s;this.setMode=n,this.render=o,this.renderInstances=a},i.WebGLIndexedBufferRenderer=function(e,t,r){function n(e){s=e}function i(r){r.array instanceof Uint32Array&&t.get("OES_element_index_uint")?(c=e.UNSIGNED_INT,h=4):(c=e.UNSIGNED_SHORT,h=2)}function o(t,n){e.drawElements(s,n,c,t*h),r.calls++,r.vertices+=n,s===e.TRIANGLES&&(r.faces+=n/3)}function a(e){var r=t.get("ANGLE_instanced_arrays");if(null===r)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var n=e.index;r.drawElementsInstancedANGLE(s,n.array.length,c,0,e.maxInstancedCount)}var s,c,h;this.setMode=n,this.setIndex=i,this.render=o,this.renderInstances=a},i.WebGLExtensions=function(e){var t={};this.get=function(r){if(void 0!==t[r])return t[r];var n;switch(r){case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(r)}return null===n&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),t[r]=n,n}},i.WebGLCapabilities=function(e,t,r){function n(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}this.getMaxPrecision=n,this.precision=void 0!==r.precision?r.precision:"highp",this.logarithmicDepthBuffer=void 0!==r.logarithmicDepthBuffer?r.logarithmicDepthBuffer:!1,this.maxTextures=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.maxVertexTextures=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.maxCubemapSize=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),this.maxAttributes=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.maxVertexUniforms=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),this.maxVaryings=e.getParameter(e.MAX_VARYING_VECTORS),this.maxFragmentUniforms=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),this.vertexTextures=this.maxVertexTextures>0,this.floatFragmentTextures=!!t.get("OES_texture_float"),this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures;var i=n(this.precision);i!==this.precision&&(console.warn("THREE.WebGLRenderer:",this.precision,"not supported, using",i,"instead."),this.precision=i),this.logarithmicDepthBuffer&&(this.logarithmicDepthBuffer=!!t.get("EXT_frag_depth"))},i.WebGLGeometries=function(e,t,r){function n(e){var t=e.geometry;if(void 0!==u[t.id])return u[t.id];t.addEventListener("dispose",o);var n;return t instanceof i.BufferGeometry?n=t:t instanceof i.Geometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new i.BufferGeometry).setFromObject(e)),n=t._bufferGeometry),u[t.id]=n,r.memory.geometries++,n}function o(e){var n=e.target,i=u[n.id];c(i.attributes),n.removeEventListener("dispose",o),delete u[n.id];var a=t.get(n);a.wireframe&&s(a.wireframe),r.memory.geometries--}function a(e){return e instanceof i.InterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer}function s(t){var r=a(t);void 0!==r&&(e.deleteBuffer(r),h(t))}function c(e){for(var t in e)s(e[t])}function h(e){e instanceof i.InterleavedBufferAttribute?t["delete"](e.data):t["delete"](e)}var u={};this.get=n},i.WebGLObjects=function(e,t,r){function n(t){var r=l.get(t);t.geometry instanceof i.Geometry&&r.updateFromObject(t);var n=r.index,a=r.attributes;null!==n&&o(n,e.ELEMENT_ARRAY_BUFFER);for(var s in a)o(a[s],e.ARRAY_BUFFER);var c=r.morphAttributes;for(var s in c)for(var h=c[s],u=0,p=h.length;p>u;u++)o(h[u],e.ARRAY_BUFFER);return r}function o(e,r){var n=e instanceof i.InterleavedBufferAttribute?e.data:e,o=t.get(n);void 0===o.__webglBuffer?a(o,n,r):o.version!==n.version&&s(o,n,r)}function a(t,r,n){t.__webglBuffer=e.createBuffer(),e.bindBuffer(n,t.__webglBuffer);var i=r.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW;e.bufferData(n,r.array,i),t.version=r.version}function s(t,r,n){e.bindBuffer(n,t.__webglBuffer),r.dynamic===!1||-1===r.updateRange.count?e.bufferSubData(n,0,r.array):0===r.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(n,r.updateRange.offset*r.array.BYTES_PER_ELEMENT,r.array.subarray(r.updateRange.offset,r.updateRange.offset+r.updateRange.count)),r.updateRange.count=0),t.version=r.version}function c(e){return e instanceof i.InterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer}function h(r){var n=t.get(r);if(void 0!==n.wireframe)return n.wireframe;var a=[],s=r.index,c=r.attributes,h=c.position;if(null!==s)for(var l={},p=s.array,f=0,d=p.length;d>f;f+=3){var m=p[f+0],v=p[f+1],g=p[f+2];u(l,m,v)&&a.push(m,v),u(l,v,g)&&a.push(v,g),u(l,g,m)&&a.push(g,m)}else for(var p=c.position.array,f=0,d=p.length/3-1;d>f;f+=3){var m=f+0,v=f+1,g=f+2;a.push(m,v,v,g,g,m)}var y=h.count>65535?Uint32Array:Uint16Array,b=new i.BufferAttribute(new y(a),1);return o(b,e.ELEMENT_ARRAY_BUFFER),n.wireframe=b,b}function u(e,t,r){if(t>r){var n=t;t=r,r=n}var i=e[t];return void 0===i?(e[t]=[r],!0):-1===i.indexOf(r)?(i.push(r),!0):!1}var l=new i.WebGLGeometries(e,t,r);this.getAttributeBuffer=c,this.getWireframeAttribute=h,this.update=n},i.WebGLProgram=function(){function e(e){var t=[];for(var r in e){var n=e[r];n!==!1&&t.push("#define "+r+" "+n)}return t.join("\n")}function t(e,t,r){for(var n={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),o=0;i>o;o++){var a=e.getActiveUniform(t,o),s=a.name,c=e.getUniformLocation(t,s),h=s.lastIndexOf("[0]");-1!==h&&h===s.length-3&&(n[s.substr(0,h)]=c),n[s]=c}return n}function r(e,t,r){for(var n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;i>o;o++){var a=e.getActiveAttrib(t,o),s=a.name;n[s]=e.getAttribLocation(t,s)}return n}function n(e){return""!==e}var o=0;return function(a,s,c,h){var u=a.context,l=c.defines,p=c.__webglShader.vertexShader,f=c.__webglShader.fragmentShader,d="SHADOWMAP_TYPE_BASIC";h.shadowMapType===i.PCFShadowMap?d="SHADOWMAP_TYPE_PCF":h.shadowMapType===i.PCFSoftShadowMap&&(d="SHADOWMAP_TYPE_PCF_SOFT");var m="ENVMAP_TYPE_CUBE",v="ENVMAP_MODE_REFLECTION",g="ENVMAP_BLENDING_MULTIPLY";if(h.envMap){switch(c.envMap.mapping){case i.CubeReflectionMapping:case i.CubeRefractionMapping:m="ENVMAP_TYPE_CUBE";break;case i.EquirectangularReflectionMapping:case i.EquirectangularRefractionMapping:m="ENVMAP_TYPE_EQUIREC";break;case i.SphericalReflectionMapping:m="ENVMAP_TYPE_SPHERE"}switch(c.envMap.mapping){case i.CubeRefractionMapping:case i.EquirectangularRefractionMapping:v="ENVMAP_MODE_REFRACTION"}switch(c.combine){case i.MultiplyOperation:g="ENVMAP_BLENDING_MULTIPLY";break;case i.MixOperation:g="ENVMAP_BLENDING_MIX";break;case i.AddOperation:g="ENVMAP_BLENDING_ADD"}}var y,b,x=a.gammaFactor>0?a.gammaFactor:1,w=e(l),_=u.createProgram();c instanceof i.RawShaderMaterial?(y="",b=""):(y=["precision "+h.precision+" float;","precision "+h.precision+" int;","#define SHADER_NAME "+c.__webglShader.name,w,h.supportsVertexTextures?"#define VERTEX_TEXTURES":"",a.gammaInput?"#define GAMMA_INPUT":"",a.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+x,"#define MAX_DIR_LIGHTS "+h.maxDirLights,"#define MAX_POINT_LIGHTS "+h.maxPointLights,"#define MAX_SPOT_LIGHTS "+h.maxSpotLights,"#define MAX_HEMI_LIGHTS "+h.maxHemiLights,"#define MAX_SHADOWS "+h.maxShadows,"#define MAX_BONES "+h.maxBones,h.map?"#define USE_MAP":"",h.envMap?"#define USE_ENVMAP":"",h.envMap?"#define "+v:"",h.lightMap?"#define USE_LIGHTMAP":"",h.aoMap?"#define USE_AOMAP":"",h.emissiveMap?"#define USE_EMISSIVEMAP":"",h.bumpMap?"#define USE_BUMPMAP":"",h.normalMap?"#define USE_NORMALMAP":"",h.displacementMap&&h.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",h.specularMap?"#define USE_SPECULARMAP":"",h.alphaMap?"#define USE_ALPHAMAP":"",h.vertexColors?"#define USE_COLOR":"",h.flatShading?"#define FLAT_SHADED":"",h.skinning?"#define USE_SKINNING":"",h.useVertexTexture?"#define BONE_TEXTURE":"",h.morphTargets?"#define USE_MORPHTARGETS":"",h.morphNormals&&h.flatShading===!1?"#define USE_MORPHNORMALS":"",h.doubleSided?"#define DOUBLE_SIDED":"",h.flipSided?"#define FLIP_SIDED":"",h.shadowMapEnabled?"#define USE_SHADOWMAP":"",h.shadowMapEnabled?"#define "+d:"",h.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",h.pointLightShadows>0?"#define POINT_LIGHT_SHADOWS":"",h.sizeAttenuation?"#define USE_SIZEATTENUATION":"",h.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",h.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(n).join("\n"),b=[h.bumpMap||h.normalMap||h.flatShading||c.derivatives?"#extension GL_OES_standard_derivatives : enable":"",h.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"","precision "+h.precision+" float;","precision "+h.precision+" int;","#define SHADER_NAME "+c.__webglShader.name,w,"#define MAX_DIR_LIGHTS "+h.maxDirLights,"#define MAX_POINT_LIGHTS "+h.maxPointLights,"#define MAX_SPOT_LIGHTS "+h.maxSpotLights,"#define MAX_HEMI_LIGHTS "+h.maxHemiLights,"#define MAX_SHADOWS "+h.maxShadows,h.alphaTest?"#define ALPHATEST "+h.alphaTest:"",a.gammaInput?"#define GAMMA_INPUT":"",a.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+x,h.useFog&&h.fog?"#define USE_FOG":"",h.useFog&&h.fogExp?"#define FOG_EXP2":"",h.map?"#define USE_MAP":"",h.envMap?"#define USE_ENVMAP":"",h.envMap?"#define "+m:"",h.envMap?"#define "+v:"",h.envMap?"#define "+g:"",h.lightMap?"#define USE_LIGHTMAP":"",h.aoMap?"#define USE_AOMAP":"",h.emissiveMap?"#define USE_EMISSIVEMAP":"",h.bumpMap?"#define USE_BUMPMAP":"",h.normalMap?"#define USE_NORMALMAP":"",h.specularMap?"#define USE_SPECULARMAP":"",h.alphaMap?"#define USE_ALPHAMAP":"",h.vertexColors?"#define USE_COLOR":"",h.flatShading?"#define FLAT_SHADED":"",h.metal?"#define METAL":"",h.doubleSided?"#define DOUBLE_SIDED":"",h.flipSided?"#define FLIP_SIDED":"",h.shadowMapEnabled?"#define USE_SHADOWMAP":"",h.shadowMapEnabled?"#define "+d:"",h.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",h.pointLightShadows>0?"#define POINT_LIGHT_SHADOWS":"",h.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",h.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","\n"].filter(n).join("\n"));var S=y+p,M=b+f,T=i.WebGLShader(u,u.VERTEX_SHADER,S),E=i.WebGLShader(u,u.FRAGMENT_SHADER,M);u.attachShader(_,T),u.attachShader(_,E),void 0!==c.index0AttributeName?u.bindAttribLocation(_,0,c.index0AttributeName):h.morphTargets===!0&&u.bindAttribLocation(_,0,"position"),u.linkProgram(_);var C=u.getProgramInfoLog(_),A=u.getShaderInfoLog(T),k=u.getShaderInfoLog(E),L=!0,P=!0;u.getProgramParameter(_,u.LINK_STATUS)===!1?(L=!1,console.error("THREE.WebGLProgram: shader error: ",u.getError(),"gl.VALIDATE_STATUS",u.getProgramParameter(_,u.VALIDATE_STATUS),"gl.getProgramInfoLog",C,A,k)):""!==C?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",C):(""===A||""===k)&&(P=!1),P&&(this.diagnostics={runnable:L,material:c,programLog:C,vertexShader:{log:A,prefix:y},fragmentShader:{log:k,prefix:b}}),u.deleteShader(T),u.deleteShader(E);var R;this.getUniforms=function(){return void 0===R&&(R=t(u,_)),R};var D;return this.getAttributes=function(){return void 0===D&&(D=r(u,_)),D},this.destroy=function(){u.deleteProgram(_),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=o++,this.code=s,this.usedTimes=1,this.program=_,this.vertexShader=T,this.fragmentShader=E,this}}(),i.WebGLPrograms=function(e,t){function r(e){if(t.floatVertexTextures&&e&&e.skeleton&&e.skeleton.useVertexTexture)return 1024;var r=t.maxVertexUniforms,n=Math.floor((r-20)/4),o=n;return void 0!==e&&e instanceof i.SkinnedMesh&&(o=Math.min(e.skeleton.bones.length,o),o<e.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+e.skeleton.bones.length+", this GPU supports just "+o+" (try OpenGL instead of ANGLE)")),o}function n(e){for(var t=0,r=0,n=0,o=0,a=0,s=e.length;s>a;a++){var c=e[a];c.visible!==!1&&(c instanceof i.DirectionalLight&&t++,c instanceof i.PointLight&&r++,c instanceof i.SpotLight&&n++,c instanceof i.HemisphereLight&&o++)}return{directional:t,point:r,spot:n,hemi:o}}function o(e){for(var t=0,r=0,n=0,o=e.length;o>n;n++){var a=e[n];a.castShadow&&((a instanceof i.SpotLight||a instanceof i.DirectionalLight)&&t++,a instanceof i.PointLight&&(t++,r++))}return{maxShadows:t,pointLightShadows:r}}var a=[],s={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},c=["precision","supportsVertexTextures","map","envMap","envMapMode","lightMap","aoMap","emissiveMap","bumpMap","normalMap","displacementMap","specularMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","maxDirLights","maxPointLights","maxSpotLights","maxHemiLights","maxShadows","shadowMapEnabled","pointLightShadows","shadowMapType","shadowMapDebug","alphaTest","metal","doubleSided","flipSided"];this.getParameters=function(a,c,h,u){var l=s[a.type],p=n(c),f=o(c),d=r(u),m=e.getPrecision();null!==a.precision&&(m=t.getMaxPrecision(a.precision),m!==a.precision&&console.warn("THREE.WebGLRenderer.initMaterial:",a.precision,"not supported, using",m,"instead."));var v={shaderID:l,precision:m,supportsVertexTextures:t.vertexTextures,map:!!a.map,envMap:!!a.envMap,envMapMode:a.envMap&&a.envMap.mapping,lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,displacementMap:!!a.displacementMap,specularMap:!!a.specularMap,alphaMap:!!a.alphaMap,combine:a.combine,vertexColors:a.vertexColors,fog:h,useFog:a.fog,fogExp:h instanceof i.FogExp2,flatShading:a.shading===i.FlatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:t.logarithmicDepthBuffer,skinning:a.skinning,maxBones:d,useVertexTexture:t.floatVertexTextures&&u&&u.skeleton&&u.skeleton.useVertexTexture,morphTargets:a.morphTargets,morphNormals:a.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,maxDirLights:p.directional,maxPointLights:p.point,maxSpotLights:p.spot,maxHemiLights:p.hemi,maxShadows:f.maxShadows,pointLightShadows:f.pointLightShadows,shadowMapEnabled:e.shadowMap.enabled&&u.receiveShadow&&f.maxShadows>0,shadowMapType:e.shadowMap.type,shadowMapDebug:e.shadowMap.debug,alphaTest:a.alphaTest,metal:a.metal,doubleSided:a.side===i.DoubleSide,flipSided:a.side===i.BackSide};return v},this.getProgramCode=function(e,t){var r=[];if(t.shaderID?r.push(t.shaderID):(r.push(e.fragmentShader),r.push(e.vertexShader)),void 0!==e.defines)for(var n in e.defines)r.push(n),r.push(e.defines[n]);for(var i=0;i<c.length;i++){var o=c[i];r.push(o),r.push(t[o])}return r.join()},this.acquireProgram=function(t,r,n){for(var o,s=0,c=a.length;c>s;s++){var h=a[s];if(h.code===n){o=h,++o.usedTimes;break}}return void 0===o&&(o=new i.WebGLProgram(e,n,t,r),a.push(o)),o},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=a.indexOf(e);a[t]=a[a.length-1],a.pop(),e.destroy()}},this.programs=a},i.WebGLProperties=function(){var e={};this.get=function(t){var r=t.uuid,n=e[r];return void 0===n&&(n={},e[r]=n),n},this["delete"]=function(t){delete e[t.uuid]},this.clear=function(){e={}}},i.WebGLShader=function(){function e(e){for(var t=e.split("\n"),r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join("\n")}return function(t,r,n){var i=t.createShader(r);return t.shaderSource(i,n),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",r===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(i),e(n)),i}}(),i.WebGLShadowMap=function(e,t,r){function n(e,t,r,n){var o=e.geometry,a=null,s=v,c=e.customDepthMaterial;if(r&&(s=g,c=e.customDistanceMaterial),c)a=c;else{var h=void 0!==o.morphTargets&&o.morphTargets.length>0&&t.morphTargets,u=e instanceof i.SkinnedMesh&&t.skinning,l=0;h&&(l|=f),u&&(l|=d),a=s[l]}return a.visible=t.visible,a.wireframe=t.wireframe,a.wireframeLinewidth=t.wireframeLinewidth,r&&void 0!==a.uniforms.lightPos&&a.uniforms.lightPos.value.copy(n),a}function o(e,t){if(e.visible!==!1){if((e instanceof i.Mesh||e instanceof i.Line||e instanceof i.Points)&&e.castShadow&&(e.frustumCulled===!1||c.intersectsObject(e)===!0)){var r=e.material;r.visible===!0&&(e.modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),p.push(e))}for(var n=e.children,a=0,s=n.length;s>a;a++)o(n[a],t)}}for(var a=e.context,s=e.state,c=new i.Frustum,h=new i.Matrix4,u=(new i.Vector3,new i.Vector3,new i.Vector3),l=new i.Vector3,p=[],f=1,d=2,m=(f|d)+1,v=new Array(m),g=new Array(m),y=[new i.Vector3(1,0,0),new i.Vector3(-1,0,0),new i.Vector3(0,0,1),new i.Vector3(0,0,-1),new i.Vector3(0,1,0),new i.Vector3(0,-1,0)],b=[new i.Vector3(0,1,0),new i.Vector3(0,1,0),new i.Vector3(0,1,0),new i.Vector3(0,1,0),new i.Vector3(0,0,1),new i.Vector3(0,0,-1)],x=[new i.Vector4,new i.Vector4,new i.Vector4,new i.Vector4,new i.Vector4,new i.Vector4],w=new i.Vector4,_=i.ShaderLib.depthRGBA,S=i.UniformsUtils.clone(_.uniforms),M=i.ShaderLib.distanceRGBA,T=i.UniformsUtils.clone(M.uniforms),E=0;E!==m;++E){var C=0!==(E&f),A=0!==(E&d),k=new i.ShaderMaterial({uniforms:S,vertexShader:_.vertexShader,fragmentShader:_.fragmentShader,morphTargets:C,skinning:A});k._shadowPass=!0,v[E]=k;var L=new i.ShaderMaterial({uniforms:T,vertexShader:M.vertexShader,fragmentShader:M.fragmentShader,morphTargets:C,skinning:A});L._shadowPass=!0,g[E]=L}var P=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=i.PCFShadowMap,this.cullFace=i.CullFaceFront,this.render=function(f){var d,m;if(P.enabled!==!1&&(P.autoUpdate!==!1||P.needsUpdate!==!1)){a.clearColor(1,1,1,1),s.disable(a.BLEND),s.enable(a.CULL_FACE),a.frontFace(a.CCW),a.cullFace(P.cullFace===i.CullFaceFront?a.FRONT:a.BACK),s.setDepthTest(!0),e.getViewport(w);for(var v=0,g=t.length;g>v;v++){var _=t[v];if(_.castShadow===!0){var S=_.shadow,M=S.camera,T=S.mapSize;if(_ instanceof i.PointLight){d=6,m=!0;var E=T.x/4,C=T.y/2;x[0].set(2*E,C,E,C),x[1].set(0,C,E,C),x[2].set(3*E,C,E,C),x[3].set(E,C,E,C),x[4].set(3*E,0,E,C),x[5].set(E,0,E,C)}else d=1,m=!1;if(null===S.map){var A=i.LinearFilter;P.type===i.PCFSoftShadowMap&&(A=i.NearestFilter);var k={minFilter:A,magFilter:A,format:i.RGBAFormat};S.map=new i.WebGLRenderTarget(T.x,T.y,k),S.matrix=new i.Matrix4,_ instanceof i.SpotLight&&(M.aspect=T.x/T.y),M.updateProjectionMatrix()}var L=S.map,R=S.matrix;l.setFromMatrixPosition(_.matrixWorld),M.position.copy(l),e.setRenderTarget(L),e.clear();for(var D=0;d>D;D++){if(m){u.copy(M.position),u.add(y[D]),M.up.copy(b[D]),M.lookAt(u);var O=x[D];e.setViewport(O.x,O.y,O.z,O.w)}else u.setFromMatrixPosition(_.target.matrixWorld),M.lookAt(u);M.updateMatrixWorld(),M.matrixWorldInverse.getInverse(M.matrixWorld),R.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),R.multiply(M.projectionMatrix),R.multiply(M.matrixWorldInverse),h.multiplyMatrices(M.projectionMatrix,M.matrixWorldInverse),c.setFromMatrix(h),p.length=0,o(f,M);for(var V=0,F=p.length;F>V;V++){var U=p[V],N=r.update(U),j=U.material;if(j instanceof i.MeshFaceMaterial)for(var B=N.groups,z=j.materials,I=0,G=B.length;G>I;I++){var H=B[I],W=z[H.materialIndex];if(W.visible===!0){var X=n(U,W,m,l);e.renderBufferDirect(M,t,null,N,X,U,H)}}else{var X=n(U,j,m,l);e.renderBufferDirect(M,t,null,N,X,U,null)}}}e.resetGLState()}}e.setViewport(w.x,w.y,w.z,w.w);var $=e.getClearColor(),q=e.getClearAlpha();e.setClearColor($,q),s.enable(a.BLEND),P.cullFace===i.CullFaceFront&&a.cullFace(a.BACK),e.resetGLState(),P.needsUpdate=!1}}},i.WebGLState=function(e,t,r){var n=this,o=new Uint8Array(16),a=new Uint8Array(16),s=new Uint8Array(16),c={},h=null,u=null,l=null,p=null,f=null,d=null,m=null,v=null,g=null,y=null,b=null,x=null,w=null,_=null,S=null,M=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),T=void 0,E={};this.init=function(){e.clearColor(0,0,0,1),e.clearDepth(1),e.clearStencil(0),this.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.frontFace(e.CCW),e.cullFace(e.BACK),this.enable(e.CULL_FACE),this.enable(e.BLEND),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA)},this.initAttributes=function(){for(var e=0,t=o.length;t>e;e++)o[e]=0},this.enableAttribute=function(r){if(o[r]=1,0===a[r]&&(e.enableVertexAttribArray(r),a[r]=1),0!==s[r]){var n=t.get("ANGLE_instanced_arrays");n.vertexAttribDivisorANGLE(r,0),s[r]=0}},this.enableAttributeAndDivisor=function(t,r,n){o[t]=1,0===a[t]&&(e.enableVertexAttribArray(t),a[t]=1),s[t]!==r&&(n.vertexAttribDivisorANGLE(t,r),s[t]=r)},this.disableUnusedAttributes=function(){for(var t=0,r=a.length;r>t;t++)a[t]!==o[t]&&(e.disableVertexAttribArray(t),a[t]=0)},this.enable=function(t){c[t]!==!0&&(e.enable(t),c[t]=!0)},this.disable=function(t){c[t]!==!1&&(e.disable(t),c[t]=!1)},this.getCompressedTextureFormats=function(){if(null===h&&(h=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")))for(var r=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),n=0;n<r.length;n++)h.push(r[n]);return h},this.setBlending=function(t,n,o,a,s,c,h){t!==u&&(t===i.NoBlending?this.disable(e.BLEND):t===i.AdditiveBlending?(this.enable(e.BLEND),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):t===i.SubtractiveBlending?(this.enable(e.BLEND),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):t===i.MultiplyBlending?(this.enable(e.BLEND),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):t===i.CustomBlending?this.enable(e.BLEND):(this.enable(e.BLEND),e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),u=t),t===i.CustomBlending?(s=s||n,c=c||o,h=h||a,(n!==l||s!==d)&&(e.blendEquationSeparate(r(n),r(s)),l=n,d=s),(o!==p||a!==f||c!==m||h!==v)&&(e.blendFuncSeparate(r(o),r(a),r(c),r(h)),p=o,f=a,m=c,v=h)):(l=null,p=null,f=null,d=null,m=null,v=null)},this.setDepthFunc=function(t){if(g!==t){if(t)switch(t){case i.NeverDepth:e.depthFunc(e.NEVER);break;case i.AlwaysDepth:e.depthFunc(e.ALWAYS);break;case i.LessDepth:e.depthFunc(e.LESS);break;case i.LessEqualDepth:e.depthFunc(e.LEQUAL);break;case i.EqualDepth:e.depthFunc(e.EQUAL);break;case i.GreaterEqualDepth:e.depthFunc(e.GEQUAL);break;case i.GreaterDepth:e.depthFunc(e.GREATER);break;case i.NotEqualDepth:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);g=t}},this.setDepthTest=function(t){t?this.enable(e.DEPTH_TEST):this.disable(e.DEPTH_TEST)},this.setDepthWrite=function(t){y!==t&&(e.depthMask(t),y=t)},this.setColorWrite=function(t){b!==t&&(e.colorMask(t,t,t,t),b=t)},this.setFlipSided=function(t){x!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),x=t)},this.setLineWidth=function(t){t!==w&&(e.lineWidth(t),w=t)},this.setPolygonOffset=function(t,r,n){t?this.enable(e.POLYGON_OFFSET_FILL):this.disable(e.POLYGON_OFFSET_FILL),!t||_===r&&S===n||(e.polygonOffset(r,n),_=r,S=n)},this.setScissorTest=function(t){t?this.enable(e.SCISSOR_TEST):this.disable(e.SCISSOR_TEST)},this.activeTexture=function(t){void 0===t&&(t=e.TEXTURE0+M-1),T!==t&&(e.activeTexture(t),T=t)},this.bindTexture=function(t,r){void 0===T&&n.activeTexture();var i=E[T];void 0===i&&(i={type:void 0,texture:void 0},E[T]=i),(i.type!==t||i.texture!==r)&&(e.bindTexture(t,r),i.type=t,i.texture=r)},this.compressedTexImage2D=function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error(t)}},this.texImage2D=function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error(t)}},this.reset=function(){for(var t=0;t<a.length;t++)1===a[t]&&(e.disableVertexAttribArray(t),a[t]=0);c={},h=null,u=null,y=null,b=null,x=null}},i.LensFlarePlugin=function(e,t){function r(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),t=new Uint16Array([0,1,2,0,2,3]);o=f.createBuffer(),a=f.createBuffer(),f.bindBuffer(f.ARRAY_BUFFER,o),f.bufferData(f.ARRAY_BUFFER,e,f.STATIC_DRAW),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,a),f.bufferData(f.ELEMENT_ARRAY_BUFFER,t,f.STATIC_DRAW),l=f.createTexture(),p=f.createTexture(),d.bindTexture(f.TEXTURE_2D,l),f.texImage2D(f.TEXTURE_2D,0,f.RGB,16,16,0,f.RGB,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),d.bindTexture(f.TEXTURE_2D,p),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,16,16,0,f.RGBA,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),u=f.getParameter(f.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;var r;r=u?{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")}:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},s=n(r),c={vertex:f.getAttribLocation(s,"position"),uv:f.getAttribLocation(s,"uv")},h={renderType:f.getUniformLocation(s,"renderType"),map:f.getUniformLocation(s,"map"),occlusionMap:f.getUniformLocation(s,"occlusionMap"),opacity:f.getUniformLocation(s,"opacity"),color:f.getUniformLocation(s,"color"),scale:f.getUniformLocation(s,"scale"),rotation:f.getUniformLocation(s,"rotation"),screenPosition:f.getUniformLocation(s,"screenPosition")}}function n(t){var r=f.createProgram(),n=f.createShader(f.FRAGMENT_SHADER),i=f.createShader(f.VERTEX_SHADER),o="precision "+e.getPrecision()+" float;\n";return f.shaderSource(n,o+t.fragmentShader),f.shaderSource(i,o+t.vertexShader),f.compileShader(n),f.compileShader(i),f.attachShader(r,n),f.attachShader(r,i),f.linkProgram(r),r}var o,a,s,c,h,u,l,p,f=e.context,d=e.state;this.render=function(n,m,v,g){if(0!==t.length){var y=new i.Vector3,b=g/v,x=.5*v,w=.5*g,_=16/g,S=new i.Vector2(_*b,_),M=new i.Vector3(1,1,0),T=new i.Vector2(1,1);void 0===s&&r(),f.useProgram(s),d.initAttributes(),d.enableAttribute(c.vertex),d.enableAttribute(c.uv),d.disableUnusedAttributes(),f.uniform1i(h.occlusionMap,0),f.uniform1i(h.map,1),f.bindBuffer(f.ARRAY_BUFFER,o),f.vertexAttribPointer(c.vertex,2,f.FLOAT,!1,16,0),f.vertexAttribPointer(c.uv,2,f.FLOAT,!1,16,8),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,a),d.disable(f.CULL_FACE),f.depthMask(!1);for(var E=0,C=t.length;C>E;E++){_=16/g,S.set(_*b,_);var A=t[E];if(y.set(A.matrixWorld.elements[12],A.matrixWorld.elements[13],A.matrixWorld.elements[14]),y.applyMatrix4(m.matrixWorldInverse),y.applyProjection(m.projectionMatrix),M.copy(y),T.x=M.x*x+x,T.y=M.y*w+w,u||T.x>0&&T.x<v&&T.y>0&&T.y<g){d.activeTexture(f.TEXTURE0),d.bindTexture(f.TEXTURE_2D,null),d.activeTexture(f.TEXTURE1),d.bindTexture(f.TEXTURE_2D,l),f.copyTexImage2D(f.TEXTURE_2D,0,f.RGB,T.x-8,T.y-8,16,16,0),f.uniform1i(h.renderType,0),f.uniform2f(h.scale,S.x,S.y),f.uniform3f(h.screenPosition,M.x,M.y,M.z),d.disable(f.BLEND),d.enable(f.DEPTH_TEST),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0),d.activeTexture(f.TEXTURE0),d.bindTexture(f.TEXTURE_2D,p),f.copyTexImage2D(f.TEXTURE_2D,0,f.RGBA,T.x-8,T.y-8,16,16,0),f.uniform1i(h.renderType,1),d.disable(f.DEPTH_TEST),d.activeTexture(f.TEXTURE1),d.bindTexture(f.TEXTURE_2D,l),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0),A.positionScreen.copy(M),A.customUpdateCallback?A.customUpdateCallback(A):A.updateLensFlares(),f.uniform1i(h.renderType,2),d.enable(f.BLEND);for(var k=0,L=A.lensFlares.length;L>k;k++){var P=A.lensFlares[k];P.opacity>.001&&P.scale>.001&&(M.x=P.x,M.y=P.y,M.z=P.z,_=P.size*P.scale/g,S.x=_*b,S.y=_,f.uniform3f(h.screenPosition,M.x,M.y,M.z),f.uniform2f(h.scale,S.x,S.y),f.uniform1f(h.rotation,P.rotation),f.uniform1f(h.opacity,P.opacity),f.uniform3f(h.color,P.color.r,P.color.g,P.color.b),d.setBlending(P.blending,P.blendEquation,P.blendSrc,P.blendDst),e.setTexture(P.texture,1),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0))}}}d.enable(f.CULL_FACE),d.enable(f.DEPTH_TEST),f.depthMask(!0),e.resetGLState()}}},i.SpritePlugin=function(e,t){function r(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),t=new Uint16Array([0,1,2,0,2,3]);a=p.createBuffer(),s=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,a),p.bufferData(p.ARRAY_BUFFER,e,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,s),
p.bufferData(p.ELEMENT_ARRAY_BUFFER,t,p.STATIC_DRAW),c=n(),h={position:p.getAttribLocation(c,"position"),uv:p.getAttribLocation(c,"uv")},u={uvOffset:p.getUniformLocation(c,"uvOffset"),uvScale:p.getUniformLocation(c,"uvScale"),rotation:p.getUniformLocation(c,"rotation"),scale:p.getUniformLocation(c,"scale"),color:p.getUniformLocation(c,"color"),map:p.getUniformLocation(c,"map"),opacity:p.getUniformLocation(c,"opacity"),modelViewMatrix:p.getUniformLocation(c,"modelViewMatrix"),projectionMatrix:p.getUniformLocation(c,"projectionMatrix"),fogType:p.getUniformLocation(c,"fogType"),fogDensity:p.getUniformLocation(c,"fogDensity"),fogNear:p.getUniformLocation(c,"fogNear"),fogFar:p.getUniformLocation(c,"fogFar"),fogColor:p.getUniformLocation(c,"fogColor"),alphaTest:p.getUniformLocation(c,"alphaTest")};var r=document.createElement("canvas");r.width=8,r.height=8;var o=r.getContext("2d");o.fillStyle="white",o.fillRect(0,0,8,8),l=new i.Texture(r),l.needsUpdate=!0}function n(){var t=p.createProgram(),r=p.createShader(p.VERTEX_SHADER),n=p.createShader(p.FRAGMENT_SHADER);return p.shaderSource(r,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),p.shaderSource(n,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),p.compileShader(r),p.compileShader(n),p.attachShader(t,r),p.attachShader(t,n),p.linkProgram(t),t}function o(e,t){return e.z!==t.z?t.z-e.z:t.id-e.id}var a,s,c,h,u,l,p=e.context,f=e.state,d=new i.Vector3,m=new i.Quaternion,v=new i.Vector3;this.render=function(n,g){if(0!==t.length){void 0===c&&r(),p.useProgram(c),f.initAttributes(),f.enableAttribute(h.position),f.enableAttribute(h.uv),f.disableUnusedAttributes(),f.disable(p.CULL_FACE),f.enable(p.BLEND),p.bindBuffer(p.ARRAY_BUFFER,a),p.vertexAttribPointer(h.position,2,p.FLOAT,!1,16,0),p.vertexAttribPointer(h.uv,2,p.FLOAT,!1,16,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,s),p.uniformMatrix4fv(u.projectionMatrix,!1,g.projectionMatrix.elements),f.activeTexture(p.TEXTURE0),p.uniform1i(u.map,0);var y=0,b=0,x=n.fog;x?(p.uniform3f(u.fogColor,x.color.r,x.color.g,x.color.b),x instanceof i.Fog?(p.uniform1f(u.fogNear,x.near),p.uniform1f(u.fogFar,x.far),p.uniform1i(u.fogType,1),y=1,b=1):x instanceof i.FogExp2&&(p.uniform1f(u.fogDensity,x.density),p.uniform1i(u.fogType,2),y=2,b=2)):(p.uniform1i(u.fogType,0),y=0,b=0);for(var w=0,_=t.length;_>w;w++){var S=t[w];S.modelViewMatrix.multiplyMatrices(g.matrixWorldInverse,S.matrixWorld),S.z=-S.modelViewMatrix.elements[14]}t.sort(o);for(var M=[],w=0,_=t.length;_>w;w++){var S=t[w],T=S.material;p.uniform1f(u.alphaTest,T.alphaTest),p.uniformMatrix4fv(u.modelViewMatrix,!1,S.modelViewMatrix.elements),S.matrixWorld.decompose(d,m,v),M[0]=v.x,M[1]=v.y;var E=0;n.fog&&T.fog&&(E=b),y!==E&&(p.uniform1i(u.fogType,E),y=E),null!==T.map?(p.uniform2f(u.uvOffset,T.map.offset.x,T.map.offset.y),p.uniform2f(u.uvScale,T.map.repeat.x,T.map.repeat.y)):(p.uniform2f(u.uvOffset,0,0),p.uniform2f(u.uvScale,1,1)),p.uniform1f(u.opacity,T.opacity),p.uniform3f(u.color,T.color.r,T.color.g,T.color.b),p.uniform1f(u.rotation,T.rotation),p.uniform2fv(u.scale,M),f.setBlending(T.blending,T.blendEquation,T.blendSrc,T.blendDst),f.setDepthTest(T.depthTest),f.setDepthWrite(T.depthWrite),T.map&&T.map.image&&T.map.image.width?e.setTexture(T.map,0):e.setTexture(l,0),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0)}f.enable(p.CULL_FACE),e.resetGLState()}}},i.CurveUtils={tangentQuadraticBezier:function(e,t,r,n){return 2*(1-e)*(r-t)+2*e*(n-r)},tangentCubicBezier:function(e,t,r,n,i){return-3*t*(1-e)*(1-e)+3*r*(1-e)*(1-e)-6*e*r*(1-e)+6*e*n*(1-e)-3*e*e*n+3*e*e*i},tangentSpline:function(e,t,r,n,i){var o=6*e*e-6*e,a=3*e*e-4*e+1,s=-6*e*e+6*e,c=3*e*e-2*e;return o+a+s+c},interpolate:function(e,t,r,n,i){var o=.5*(r-e),a=.5*(n-t),s=i*i,c=i*s;return(2*t-2*r+o+a)*c+(-3*t+3*r-2*o-a)*s+o*i+t}},i.GeometryUtils={merge:function(e,t,r){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var n;t instanceof i.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),n=t.matrix,t=t.geometry),e.merge(t,n,r)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},i.ImageUtils={crossOrigin:void 0,loadTexture:function(e,t,r,n){console.warn("THREE.ImageUtils.loadTexture is being deprecated. Use THREE.TextureLoader() instead.");var o=new i.TextureLoader;o.setCrossOrigin(this.crossOrigin);var a=o.load(e,r,void 0,n);return t&&(a.mapping=t),a},loadTextureCube:function(e,t,r,n){console.warn("THREE.ImageUtils.loadTextureCube is being deprecated. Use THREE.CubeTextureLoader() instead.");var o=new i.CubeTextureLoader;o.setCrossOrigin(this.crossOrigin);var a=o.load(e,r,void 0,n);return t&&(a.mapping=t),a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},i.SceneUtils={createMultiMaterialObject:function(e,t){for(var r=new i.Group,n=0,o=t.length;o>n;n++)r.add(new i.Mesh(e,t[n]));return r},detach:function(e,t,r){e.applyMatrix(t.matrixWorld),t.remove(e),r.add(e)},attach:function(e,t,r){var n=new i.Matrix4;n.getInverse(r.matrixWorld),e.applyMatrix(n),t.remove(e),r.add(e)}},i.ShapeUtils={area:function(e){for(var t=e.length,r=0,n=t-1,i=0;t>i;n=i++)r+=e[n].x*e[i].y-e[i].x*e[n].y;return.5*r},triangulate:function(){function e(e,t,r,n,i,o){var a,s,c,h,u,l,p,f,d;if(s=e[o[t]].x,c=e[o[t]].y,h=e[o[r]].x,u=e[o[r]].y,l=e[o[n]].x,p=e[o[n]].y,Number.EPSILON>(h-s)*(p-c)-(u-c)*(l-s))return!1;var m,v,g,y,b,x,w,_,S,M,T,E,C,A,k;for(m=l-h,v=p-u,g=s-l,y=c-p,b=h-s,x=u-c,a=0;i>a;a++)if(f=e[o[a]].x,d=e[o[a]].y,!(f===s&&d===c||f===h&&d===u||f===l&&d===p)&&(w=f-s,_=d-c,S=f-h,M=d-u,T=f-l,E=d-p,k=m*M-v*S,C=b*_-x*w,A=g*E-y*T,k>=-Number.EPSILON&&A>=-Number.EPSILON&&C>=-Number.EPSILON))return!1;return!0}return function(t,r){var n=t.length;if(3>n)return null;var o,a,s,c=[],h=[],u=[];if(i.ShapeUtils.area(t)>0)for(a=0;n>a;a++)h[a]=a;else for(a=0;n>a;a++)h[a]=n-1-a;var l=n,p=2*l;for(a=l-1;l>2;){if(p--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),r?u:c;if(o=a,o>=l&&(o=0),a=o+1,a>=l&&(a=0),s=a+1,s>=l&&(s=0),e(t,o,a,s,l,h)){var f,d,m,v,g;for(f=h[o],d=h[a],m=h[s],c.push([t[f],t[d],t[m]]),u.push([h[o],h[a],h[s]]),v=a,g=a+1;l>g;v++,g++)h[v]=h[g];l--,p=2*l}}return r?u:c}}(),triangulateShape:function(e,t){function r(e,t,r){return e.x!==t.x?e.x<t.x?e.x<=r.x&&r.x<=t.x:t.x<=r.x&&r.x<=e.x:e.y<t.y?e.y<=r.y&&r.y<=t.y:t.y<=r.y&&r.y<=e.y}function n(e,t,n,i,o){var a=t.x-e.x,s=t.y-e.y,c=i.x-n.x,h=i.y-n.y,u=e.x-n.x,l=e.y-n.y,p=s*c-a*h,f=s*u-a*l;if(Math.abs(p)>Number.EPSILON){var d;if(p>0){if(0>f||f>p)return[];if(d=h*u-c*l,0>d||d>p)return[]}else{if(f>0||p>f)return[];if(d=h*u-c*l,d>0||p>d)return[]}if(0===d)return!o||0!==f&&f!==p?[e]:[];if(d===p)return!o||0!==f&&f!==p?[t]:[];if(0===f)return[n];if(f===p)return[i];var m=d/p;return[{x:e.x+m*a,y:e.y+m*s}]}if(0!==f||h*u!==c*l)return[];var v=0===a&&0===s,g=0===c&&0===h;if(v&&g)return e.x!==n.x||e.y!==n.y?[]:[e];if(v)return r(n,i,e)?[e]:[];if(g)return r(e,t,n)?[n]:[];var y,b,x,w,_,S,M,T;return 0!==a?(e.x<t.x?(y=e,x=e.x,b=t,w=t.x):(y=t,x=t.x,b=e,w=e.x),n.x<i.x?(_=n,M=n.x,S=i,T=i.x):(_=i,M=i.x,S=n,T=n.x)):(e.y<t.y?(y=e,x=e.y,b=t,w=t.y):(y=t,x=t.y,b=e,w=e.y),n.y<i.y?(_=n,M=n.y,S=i,T=i.y):(_=i,M=i.y,S=n,T=n.y)),M>=x?M>w?[]:w===M?o?[]:[_]:T>=w?[_,b]:[_,S]:x>T?[]:x===T?o?[]:[y]:T>=w?[y,b]:[y,S]}function o(e,t,r,n){var i=t.x-e.x,o=t.y-e.y,a=r.x-e.x,s=r.y-e.y,c=n.x-e.x,h=n.y-e.y,u=i*s-o*a,l=i*h-o*c;if(Math.abs(u)>Number.EPSILON){var p=c*s-h*a;return u>0?l>=0&&p>=0:l>=0||p>=0}return l>0}function a(e,t){function r(e,t){var r=y.length-1,n=e-1;0>n&&(n=r);var i=e+1;i>r&&(i=0);var a=o(y[e],y[n],y[i],s[t]);if(!a)return!1;var c=s.length-1,h=t-1;0>h&&(h=c);var u=t+1;return u>c&&(u=0),a=o(s[t],s[h],s[u],y[e]),a?!0:!1}function i(e,t){var r,i,o;for(r=0;r<y.length;r++)if(i=r+1,i%=y.length,o=n(e,t,y[r],y[i],!0),o.length>0)return!0;return!1}function a(e,r){var i,o,a,s,c;for(i=0;i<b.length;i++)for(o=t[b[i]],a=0;a<o.length;a++)if(s=a+1,s%=o.length,c=n(e,r,o[a],o[s],!0),c.length>0)return!0;return!1}for(var s,c,h,u,l,p,f,d,m,v,g,y=e.concat(),b=[],x=[],w=0,_=t.length;_>w;w++)b.push(w);for(var S=0,M=2*b.length;b.length>0;){if(M--,0>M){console.log("Infinite Loop! Holes left:"+b.length+", Probably Hole outside Shape!");break}for(h=S;h<y.length;h++){u=y[h],c=-1;for(var w=0;w<b.length;w++)if(p=b[w],f=u.x+":"+u.y+":"+p,void 0===x[f]){s=t[p];for(var T=0;T<s.length;T++)if(l=s[T],r(h,T)&&!i(u,l)&&!a(u,l)){c=T,b.splice(w,1),d=y.slice(0,h+1),m=y.slice(h),v=s.slice(c),g=s.slice(0,c+1),y=d.concat(v).concat(g).concat(m),S=h;break}if(c>=0)break;x[f]=!0}if(c>=0)break}}return y}for(var s,c,h,u,l,p,f={},d=e.concat(),m=0,v=t.length;v>m;m++)Array.prototype.push.apply(d,t[m]);for(s=0,c=d.length;c>s;s++)l=d[s].x+":"+d[s].y,void 0!==f[l]&&console.warn("THREE.Shape: Duplicate point",l),f[l]=s;var g=a(e,t),y=i.ShapeUtils.triangulate(g,!1);for(s=0,c=y.length;c>s;s++)for(u=y[s],h=0;3>h;h++)l=u[h].x+":"+u[h].y,p=f[l],void 0!==p&&(u[h]=p);return y.concat()},isClockWise:function(e){return i.ShapeUtils.area(e)<0},b2:function(){function e(e,t){var r=1-e;return r*r*t}function t(e,t){return 2*(1-e)*e*t}function r(e,t){return e*e*t}return function(n,i,o,a){return e(n,i)+t(n,o)+r(n,a)}}(),b3:function(){function e(e,t){var r=1-e;return r*r*r*t}function t(e,t){var r=1-e;return 3*r*r*e*t}function r(e,t){var r=1-e;return 3*r*e*e*t}function n(e,t){return e*e*e*t}return function(i,o,a,s,c){return e(i,o)+t(i,a)+r(i,s)+n(i,c)}}()},i.Audio=function(e){i.Object3D.call(this),this.type="Audio",this.context=e.context,this.source=this.context.createBufferSource(),this.source.onended=this.onEnded.bind(this),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.panner=this.context.createPanner(),this.panner.connect(this.gain),this.autoplay=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1},i.Audio.prototype=Object.create(i.Object3D.prototype),i.Audio.prototype.constructor=i.Audio,i.Audio.prototype.load=function(e){var t=this,r=new XMLHttpRequest;return r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(e){t.context.decodeAudioData(this.response,function(e){t.source.buffer=e,t.autoplay&&t.play()})},r.send(),this},i.Audio.prototype.play=function(){if(this.isPlaying===!0)return void console.warn("THREE.Audio: Audio is already playing.");var e=this.context.createBufferSource();e.buffer=this.source.buffer,e.loop=this.source.loop,e.onended=this.source.onended,e.start(0,this.startTime),e.playbackRate.value=this.playbackRate,this.isPlaying=!0,this.source=e,this.connect()},i.Audio.prototype.pause=function(){this.source.stop(),this.startTime=this.context.currentTime},i.Audio.prototype.stop=function(){this.source.stop(),this.startTime=0},i.Audio.prototype.connect=function(){void 0!==this.filter?(this.source.connect(this.filter),this.filter.connect(this.panner)):this.source.connect(this.panner)},i.Audio.prototype.disconnect=function(){void 0!==this.filter?(this.source.disconnect(this.filter),this.filter.disconnect(this.panner)):this.source.disconnect(this.panner)},i.Audio.prototype.setFilter=function(e){this.isPlaying===!0?(this.disconnect(),this.filter=e,this.connect()):this.filter=e},i.Audio.prototype.getFilter=function(){return this.filter},i.Audio.prototype.setPlaybackRate=function(e){this.playbackRate=e,this.isPlaying===!0&&(this.source.playbackRate.value=this.playbackRate)},i.Audio.prototype.getPlaybackRate=function(){return this.playbackRate},i.Audio.prototype.onEnded=function(){this.isPlaying=!1},i.Audio.prototype.setLoop=function(e){this.source.loop=e},i.Audio.prototype.getLoop=function(){return this.source.loop},i.Audio.prototype.setRefDistance=function(e){this.panner.refDistance=e},i.Audio.prototype.getRefDistance=function(){return this.panner.refDistance},i.Audio.prototype.setRolloffFactor=function(e){this.panner.rolloffFactor=e},i.Audio.prototype.getRolloffFactor=function(){return this.panner.rolloffFactor},i.Audio.prototype.setVolume=function(e){this.gain.gain.value=e},i.Audio.prototype.getVolume=function(){return this.gain.gain.value},i.Audio.prototype.updateMatrixWorld=function(){var e=new i.Vector3;return function(t){i.Object3D.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}(),i.AudioListener=function(){i.Object3D.call(this),this.type="AudioListener",this.context=new(window.AudioContext||window.webkitAudioContext)},i.AudioListener.prototype=Object.create(i.Object3D.prototype),i.AudioListener.prototype.constructor=i.AudioListener,i.AudioListener.prototype.updateMatrixWorld=function(){var e=new i.Vector3,t=new i.Quaternion,r=new i.Vector3,n=new i.Vector3;return function(o){i.Object3D.prototype.updateMatrixWorld.call(this,o);var a=this.context.listener,s=this.up;this.matrixWorld.decompose(e,t,r),n.set(0,0,-1).applyQuaternion(t),a.setPosition(e.x,e.y,e.z),a.setOrientation(n.x,n.y,n.z,s.x,s.y,s.z)}}(),i.Curve=function(){},i.Curve.prototype={constructor:i.Curve,getPoint:function(e){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},getPoints:function(e){e||(e=5);var t,r=[];for(t=0;e>=t;t++)r.push(this.getPoint(t/e));return r},getSpacedPoints:function(e){e||(e=5);var t,r=[];for(t=0;e>=t;t++)r.push(this.getPointAt(t/e));return r},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,r,n=[],i=this.getPoint(0),o=0;for(n.push(0),r=1;e>=r;r++)t=this.getPoint(r/e),o+=t.distanceTo(i),n.push(o),i=t;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var r,n=this.getLengths(),i=0,o=n.length;r=t?t:e*n[o-1];for(var a,s=0,c=o-1;c>=s;)if(i=Math.floor(s+(c-s)/2),a=n[i]-r,0>a)s=i+1;else{if(!(a>0)){c=i;break}c=i-1}if(i=c,n[i]===r){var h=i/(o-1);return h}var u=n[i],l=n[i+1],p=l-u,f=(r-u)/p,h=(i+f)/(o-1);return h},getTangent:function(e){var t=1e-4,r=e-t,n=e+t;0>r&&(r=0),n>1&&(n=1);var i=this.getPoint(r),o=this.getPoint(n),a=o.clone().sub(i);return a.normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)}},i.Curve.Utils=i.CurveUtils,i.Curve.create=function(e,t){return e.prototype=Object.create(i.Curve.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},i.CurvePath=function(){this.curves=[],this.autoClose=!1},i.CurvePath.prototype=Object.create(i.Curve.prototype),i.CurvePath.prototype.constructor=i.CurvePath,i.CurvePath.prototype.add=function(e){this.curves.push(e)},i.CurvePath.prototype.closePath=function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new i.LineCurve(t,e))},i.CurvePath.prototype.getPoint=function(e){for(var t=e*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=t){var i=r[n]-t,o=this.curves[n],a=1-i/o.getLength();return o.getPointAt(a)}n++}return null},i.CurvePath.prototype.getLength=function(){var e=this.getCurveLengths();return e[e.length-1]},i.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,r=0,n=this.curves.length;n>r;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e},i.CurvePath.prototype.createPointsGeometry=function(e){var t=this.getPoints(e,!0);return this.createGeometry(t)},i.CurvePath.prototype.createSpacedPointsGeometry=function(e){var t=this.getSpacedPoints(e,!0);return this.createGeometry(t)},i.CurvePath.prototype.createGeometry=function(e){for(var t=new i.Geometry,r=0,n=e.length;n>r;r++){var o=e[r];t.vertices.push(new i.Vector3(o.x,o.y,o.z||0))}return t},i.Path=function(e){i.CurvePath.call(this),this.actions=[],e&&this.fromPoints(e)},i.Path.prototype=Object.create(i.CurvePath.prototype),i.Path.prototype.constructor=i.Path,i.Path.prototype.fromPoints=function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;r>t;t++)this.lineTo(e[t].x,e[t].y)},i.Path.prototype.moveTo=function(e,t){this.actions.push({action:"moveTo",args:[e,t]})},i.Path.prototype.lineTo=function(e,t){var r=this.actions[this.actions.length-1].args,n=r[r.length-2],o=r[r.length-1],a=new i.LineCurve(new i.Vector2(n,o),new i.Vector2(e,t));this.curves.push(a),this.actions.push({action:"lineTo",args:[e,t]})},i.Path.prototype.quadraticCurveTo=function(e,t,r,n){var o=this.actions[this.actions.length-1].args,a=o[o.length-2],s=o[o.length-1],c=new i.QuadraticBezierCurve(new i.Vector2(a,s),new i.Vector2(e,t),new i.Vector2(r,n));this.curves.push(c),this.actions.push({action:"quadraticCurveTo",args:[e,t,r,n]})},i.Path.prototype.bezierCurveTo=function(e,t,r,n,o,a){var s=this.actions[this.actions.length-1].args,c=s[s.length-2],h=s[s.length-1],u=new i.CubicBezierCurve(new i.Vector2(c,h),new i.Vector2(e,t),new i.Vector2(r,n),new i.Vector2(o,a));this.curves.push(u),this.actions.push({action:"bezierCurveTo",args:[e,t,r,n,o,a]})},i.Path.prototype.splineThru=function(e){var t=Array.prototype.slice.call(arguments),r=this.actions[this.actions.length-1].args,n=r[r.length-2],o=r[r.length-1],a=[new i.Vector2(n,o)];Array.prototype.push.apply(a,e);var s=new i.SplineCurve(a);this.curves.push(s),this.actions.push({action:"splineThru",args:t})},i.Path.prototype.arc=function(e,t,r,n,i,o){var a=this.actions[this.actions.length-1].args,s=a[a.length-2],c=a[a.length-1];this.absarc(e+s,t+c,r,n,i,o)},i.Path.prototype.absarc=function(e,t,r,n,i,o){this.absellipse(e,t,r,r,n,i,o)},i.Path.prototype.ellipse=function(e,t,r,n,i,o,a,s){var c=this.actions[this.actions.length-1].args,h=c[c.length-2],u=c[c.length-1];this.absellipse(e+h,t+u,r,n,i,o,a,s)},i.Path.prototype.absellipse=function(e,t,r,n,o,a,s,c){var h=[e,t,r,n,o,a,s,c||0],u=new i.EllipseCurve(e,t,r,n,o,a,s,c);this.curves.push(u);var l=u.getPoint(1);h.push(l.x),h.push(l.y),this.actions.push({action:"ellipse",args:h})},i.Path.prototype.getSpacedPoints=function(e,t){e||(e=40);for(var r=[],n=0;e>n;n++)r.push(this.getPoint(n/e));return r},i.Path.prototype.getPoints=function(e,t){e=e||12;for(var r,n,o,a,s,c,h,u,l,p,f,d=i.ShapeUtils.b2,m=i.ShapeUtils.b3,v=[],g=0,y=this.actions.length;y>g;g++){var b=this.actions[g],x=b.action,w=b.args;switch(x){case"moveTo":v.push(new i.Vector2(w[0],w[1]));break;case"lineTo":v.push(new i.Vector2(w[0],w[1]));break;case"quadraticCurveTo":r=w[2],n=w[3],s=w[0],c=w[1],v.length>0?(l=v[v.length-1],h=l.x,u=l.y):(l=this.actions[g-1].args,h=l[l.length-2],u=l[l.length-1]);for(var _=1;e>=_;_++){var S=_/e;p=d(S,h,s,r),f=d(S,u,c,n),v.push(new i.Vector2(p,f))}break;case"bezierCurveTo":r=w[4],n=w[5],s=w[0],c=w[1],o=w[2],a=w[3],v.length>0?(l=v[v.length-1],h=l.x,u=l.y):(l=this.actions[g-1].args,h=l[l.length-2],u=l[l.length-1]);for(var _=1;e>=_;_++){var S=_/e;p=m(S,h,s,o,r),f=m(S,u,c,a,n),v.push(new i.Vector2(p,f))}break;case"splineThru":l=this.actions[g-1].args;var M=new i.Vector2(l[l.length-2],l[l.length-1]),T=[M],E=e*w[0].length;T=T.concat(w[0]);for(var C=new i.SplineCurve(T),_=1;E>=_;_++)v.push(C.getPointAt(_/E));break;case"arc":for(var A,k=w[0],L=w[1],P=w[2],R=w[3],D=w[4],O=!!w[5],V=D-R,F=2*e,_=1;F>=_;_++){var S=_/F;O||(S=1-S),A=R+S*V,p=k+P*Math.cos(A),f=L+P*Math.sin(A),v.push(new i.Vector2(p,f))}break;case"ellipse":var A,U,N,k=w[0],L=w[1],j=w[2],B=w[3],R=w[4],D=w[5],O=!!w[6],z=w[7],V=D-R,F=2*e;0!==z&&(U=Math.cos(z),N=Math.sin(z));for(var _=1;F>=_;_++){var S=_/F;if(O||(S=1-S),A=R+S*V,p=k+j*Math.cos(A),f=L+B*Math.sin(A),0!==z){var I=p,G=f;p=(I-k)*U-(G-L)*N+k,f=(I-k)*N+(G-L)*U+L}v.push(new i.Vector2(p,f))}}}var H=v[v.length-1];return Math.abs(H.x-v[0].x)<Number.EPSILON&&Math.abs(H.y-v[0].y)<Number.EPSILON&&v.splice(v.length-1,1),t&&v.push(v[0]),v},i.Path.prototype.toShapes=function(e,t){function r(e){for(var t=[],r=new i.Path,n=0,o=e.length;o>n;n++){var a=e[n],s=a.args,c=a.action;"moveTo"===c&&0!==r.actions.length&&(t.push(r),r=new i.Path),r[c].apply(r,s)}return 0!==r.actions.length&&t.push(r),t}function n(e){for(var t=[],r=0,n=e.length;n>r;r++){var o=e[r],a=new i.Shape;a.actions=o.actions,a.curves=o.curves,t.push(a)}return t}function o(e,t){for(var r=t.length,n=!1,i=r-1,o=0;r>o;i=o++){var a=t[i],s=t[o],c=s.x-a.x,h=s.y-a.y;if(Math.abs(h)>Number.EPSILON){if(0>h&&(a=t[o],c=-c,s=t[i],h=-h),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var u=h*(e.x-a.x)-c*(e.y-a.y);if(0===u)return!0;if(0>u)continue;n=!n}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return n}var a=i.ShapeUtils.isClockWise,s=r(this.actions);if(0===s.length)return[];if(t===!0)return n(s);var c,h,u,l=[];if(1===s.length)return h=s[0],u=new i.Shape,u.actions=h.actions,u.curves=h.curves,l.push(u),l;var p=!a(s[0].getPoints());p=e?!p:p;var f,d=[],m=[],v=[],g=0;m[g]=void 0,v[g]=[];for(var y=0,b=s.length;b>y;y++)h=s[y],f=h.getPoints(),c=a(f),c=e?!c:c,c?(!p&&m[g]&&g++,m[g]={s:new i.Shape,p:f},m[g].s.actions=h.actions,m[g].s.curves=h.curves,p&&g++,v[g]=[]):v[g].push({h:h,p:f[0]});if(!m[0])return n(s);if(m.length>1){for(var x=!1,w=[],_=0,S=m.length;S>_;_++)d[_]=[];for(var _=0,S=m.length;S>_;_++)for(var M=v[_],T=0;T<M.length;T++){for(var E=M[T],C=!0,A=0;A<m.length;A++)o(E.p,m[A].p)&&(_!==A&&w.push({froms:_,tos:A,hole:T}),C?(C=!1,d[A].push(E)):x=!0);C&&d[_].push(E)}w.length>0&&(x||(v=d))}for(var k,y=0,L=m.length;L>y;y++){u=m[y].s,l.push(u),k=v[y];for(var P=0,R=k.length;R>P;P++)u.holes.push(k[P].h)}return l},i.Shape=function(){i.Path.apply(this,arguments),this.holes=[]},i.Shape.prototype=Object.create(i.Path.prototype),i.Shape.prototype.constructor=i.Shape,i.Shape.prototype.extrude=function(e){return new i.ExtrudeGeometry(this,e)},i.Shape.prototype.makeGeometry=function(e){return new i.ShapeGeometry(this,e)},i.Shape.prototype.getPointsHoles=function(e){for(var t=[],r=0,n=this.holes.length;n>r;r++)t[r]=this.holes[r].getPoints(e);return t},i.Shape.prototype.extractAllPoints=function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},i.Shape.prototype.extractPoints=function(e){return this.extractAllPoints(e)},i.Shape.Utils=i.ShapeUtils,i.LineCurve=function(e,t){this.v1=e,this.v2=t},i.LineCurve.prototype=Object.create(i.Curve.prototype),i.LineCurve.prototype.constructor=i.LineCurve,i.LineCurve.prototype.getPoint=function(e){var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},i.LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},i.LineCurve.prototype.getTangent=function(e){var t=this.v2.clone().sub(this.v1);return t.normalize()},i.QuadraticBezierCurve=function(e,t,r){this.v0=e,this.v1=t,this.v2=r},i.QuadraticBezierCurve.prototype=Object.create(i.Curve.prototype),i.QuadraticBezierCurve.prototype.constructor=i.QuadraticBezierCurve,i.QuadraticBezierCurve.prototype.getPoint=function(e){var t=i.ShapeUtils.b2;return new i.Vector2(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y))},i.QuadraticBezierCurve.prototype.getTangent=function(e){var t=i.CurveUtils.tangentQuadraticBezier;return new i.Vector2(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y)).normalize()},i.CubicBezierCurve=function(e,t,r,n){this.v0=e,this.v1=t,this.v2=r,this.v3=n},i.CubicBezierCurve.prototype=Object.create(i.Curve.prototype),i.CubicBezierCurve.prototype.constructor=i.CubicBezierCurve,i.CubicBezierCurve.prototype.getPoint=function(e){var t=i.ShapeUtils.b3;return new i.Vector2(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},i.CubicBezierCurve.prototype.getTangent=function(e){var t=i.CurveUtils.tangentCubicBezier;return new i.Vector2(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},i.SplineCurve=function(e){this.points=void 0==e?[]:e},i.SplineCurve.prototype=Object.create(i.Curve.prototype),i.SplineCurve.prototype.constructor=i.SplineCurve,i.SplineCurve.prototype.getPoint=function(e){var t=this.points,r=(t.length-1)*e,n=Math.floor(r),o=r-n,a=t[0===n?n:n-1],s=t[n],c=t[n>t.length-2?t.length-1:n+1],h=t[n>t.length-3?t.length-1:n+2],u=i.CurveUtils.interpolate;return new i.Vector2(u(a.x,s.x,c.x,h.x,o),u(a.y,s.y,c.y,h.y,o))},i.EllipseCurve=function(e,t,r,n,i,o,a,s){this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=n,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s||0},i.EllipseCurve.prototype=Object.create(i.Curve.prototype),i.EllipseCurve.prototype.constructor=i.EllipseCurve,i.EllipseCurve.prototype.getPoint=function(e){var t=this.aEndAngle-this.aStartAngle;0>t&&(t+=2*Math.PI),t>2*Math.PI&&(t-=2*Math.PI);var r;r=this.aClockwise===!0?this.aEndAngle+(1-e)*(2*Math.PI-t):this.aStartAngle+e*t;var n=this.aX+this.xRadius*Math.cos(r),o=this.aY+this.yRadius*Math.sin(r);if(0!==this.aRotation){var a=Math.cos(this.aRotation),s=Math.sin(this.aRotation),c=n,h=o;n=(c-this.aX)*a-(h-this.aY)*s+this.aX,o=(c-this.aX)*s+(h-this.aY)*a+this.aY}return new i.Vector2(n,o)},i.ArcCurve=function(e,t,r,n,o,a){i.EllipseCurve.call(this,e,t,r,r,n,o,a)},i.ArcCurve.prototype=Object.create(i.EllipseCurve.prototype),i.ArcCurve.prototype.constructor=i.ArcCurve,i.LineCurve3=i.Curve.create(function(e,t){this.v1=e,this.v2=t},function(e){var t=new i.Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t}),i.QuadraticBezierCurve3=i.Curve.create(function(e,t,r){this.v0=e,this.v1=t,this.v2=r},function(e){var t=i.ShapeUtils.b2;return new i.Vector3(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y),t(e,this.v0.z,this.v1.z,this.v2.z))}),i.CubicBezierCurve3=i.Curve.create(function(e,t,r,n){this.v0=e,this.v1=t,this.v2=r,this.v3=n},function(e){var t=i.ShapeUtils.b3;return new i.Vector3(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),t(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),i.SplineCurve3=i.Curve.create(function(e){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=void 0==e?[]:e},function(e){var t=this.points,r=(t.length-1)*e,n=Math.floor(r),o=r-n,a=t[0==n?n:n-1],s=t[n],c=t[n>t.length-2?t.length-1:n+1],h=t[n>t.length-3?t.length-1:n+2],u=i.CurveUtils.interpolate;return new i.Vector3(u(a.x,s.x,c.x,h.x,o),u(a.y,s.y,c.y,h.y,o),u(a.z,s.z,c.z,h.z,o))}),i.CatmullRomCurve3=function(){function e(){}var t=new i.Vector3,r=new e,n=new e,o=new e;return e.prototype.init=function(e,t,r,n){this.c0=e,this.c1=r,this.c2=-3*e+3*t-2*r-n,this.c3=2*e-2*t+r+n},e.prototype.initNonuniformCatmullRom=function(e,t,r,n,i,o,a){var s=(t-e)/i-(r-e)/(i+o)+(r-t)/o,c=(r-t)/o-(n-t)/(o+a)+(n-r)/a;s*=o,c*=o,this.init(t,r,s,c)},e.prototype.initCatmullRom=function(e,t,r,n,i){this.init(t,r,i*(r-e),i*(n-t))},e.prototype.calc=function(e){var t=e*e,r=t*e;return this.c0+this.c1*e+this.c2*t+this.c3*r},i.Curve.create(function(e){this.points=e||[]},function(e){var a,s,c,h,u=this.points;h=u.length,2>h&&console.log("duh, you need at least 2 points"),a=(h-1)*e,s=Math.floor(a),c=a-s,0===c&&s===h-1&&(s=h-2,c=1);var l,p,f,d;if(0===s?(t.subVectors(u[0],u[1]).add(u[0]),l=t):l=u[s-1],p=u[s],f=u[s+1],h>s+2?d=u[s+2]:(t.subVectors(u[h-1],u[h-2]).add(u[h-2]),d=t),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var m="chordal"===this.type?.5:.25,v=Math.pow(l.distanceToSquared(p),m),g=Math.pow(p.distanceToSquared(f),m),y=Math.pow(f.distanceToSquared(d),m);1e-4>g&&(g=1),1e-4>v&&(v=g),1e-4>y&&(y=g),r.initNonuniformCatmullRom(l.x,p.x,f.x,d.x,v,g,y),n.initNonuniformCatmullRom(l.y,p.y,f.y,d.y,v,g,y),o.initNonuniformCatmullRom(l.z,p.z,f.z,d.z,v,g,y)}else if("catmullrom"===this.type){var b=void 0!==this.tension?this.tension:.5;r.initCatmullRom(l.x,p.x,f.x,d.x,b),n.initCatmullRom(l.y,p.y,f.y,d.y,b),o.initCatmullRom(l.z,p.z,f.z,d.z,b)}var x=new i.Vector3(r.calc(c),n.calc(c),o.calc(c));return x})}(),i.ClosedSplineCurve3=i.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t=this.points,r=(t.length-0)*e,n=Math.floor(r),o=r-n;n+=n>0?0:(Math.floor(Math.abs(n)/t.length)+1)*t.length;var a=t[(n-1)%t.length],s=t[n%t.length],c=t[(n+1)%t.length],h=t[(n+2)%t.length],u=i.CurveUtils.interpolate;return new i.Vector3(u(a.x,s.x,c.x,h.x,o),u(a.y,s.y,c.y,h.y,o),u(a.z,s.z,c.z,h.z,o))}),i.BoxGeometry=function(e,t,r,n,o,a){function s(e,t,r,n,o,a,s,h){var u,l,p,f=c.widthSegments,d=c.heightSegments,m=o/2,v=a/2,g=c.vertices.length;"x"===e&&"y"===t||"y"===e&&"x"===t?u="z":"x"===e&&"z"===t||"z"===e&&"x"===t?(u="y",d=c.depthSegments):("z"===e&&"y"===t||"y"===e&&"z"===t)&&(u="x",f=c.depthSegments);var y=f+1,b=d+1,x=o/f,w=a/d,_=new i.Vector3;for(_[u]=s>0?1:-1,p=0;b>p;p++)for(l=0;y>l;l++){var S=new i.Vector3;S[e]=(l*x-m)*r,S[t]=(p*w-v)*n,S[u]=s,c.vertices.push(S)}for(p=0;d>p;p++)for(l=0;f>l;l++){var M=l+y*p,T=l+y*(p+1),E=l+1+y*(p+1),C=l+1+y*p,A=new i.Vector2(l/f,1-p/d),k=new i.Vector2(l/f,1-(p+1)/d),L=new i.Vector2((l+1)/f,1-(p+1)/d),P=new i.Vector2((l+1)/f,1-p/d),R=new i.Face3(M+g,T+g,C+g);R.normal.copy(_),R.vertexNormals.push(_.clone(),_.clone(),_.clone()),R.materialIndex=h,c.faces.push(R),c.faceVertexUvs[0].push([A,k,P]),R=new i.Face3(T+g,E+g,C+g),R.normal.copy(_),R.vertexNormals.push(_.clone(),_.clone(),_.clone()),R.materialIndex=h,c.faces.push(R),c.faceVertexUvs[0].push([k.clone(),L,P.clone()])}}i.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:o,depthSegments:a},this.widthSegments=n||1,this.heightSegments=o||1,this.depthSegments=a||1;var c=this,h=e/2,u=t/2,l=r/2;s("z","y",-1,-1,r,t,h,0),s("z","y",1,-1,r,t,-h,1),s("x","z",1,1,e,r,u,2),s("x","z",1,-1,e,r,-u,3),s("x","y",1,-1,e,t,l,4),s("x","y",-1,-1,e,t,-l,5),this.mergeVertices()},i.BoxGeometry.prototype=Object.create(i.Geometry.prototype),i.BoxGeometry.prototype.constructor=i.BoxGeometry,i.BoxGeometry.prototype.clone=function(){var e=this.parameters;return new i.BoxGeometry(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)},i.CubeGeometry=i.BoxGeometry,i.CircleGeometry=function(e,t,r,n){i.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},this.fromBufferGeometry(new i.CircleBufferGeometry(e,t,r,n))},i.CircleGeometry.prototype=Object.create(i.Geometry.prototype),
i.CircleGeometry.prototype.constructor=i.CircleGeometry,i.CircleGeometry.prototype.clone=function(){var e=this.parameters;return new i.CircleGeometry(e.radius,e.segments,e.thetaStart,e.thetaLength)},i.CircleBufferGeometry=function(e,t,r,n){i.BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},e=e||50,t=void 0!==t?Math.max(3,t):8,r=void 0!==r?r:0,n=void 0!==n?n:2*Math.PI;var o=t+2,a=new Float32Array(3*o),s=new Float32Array(3*o),c=new Float32Array(2*o);s[2]=1,c[0]=.5,c[1]=.5;for(var h=0,u=3,l=2;t>=h;h++,u+=3,l+=2){var p=r+h/t*n;a[u]=e*Math.cos(p),a[u+1]=e*Math.sin(p),s[u+2]=1,c[l]=(a[u]/e+1)/2,c[l+1]=(a[u+1]/e+1)/2}for(var f=[],u=1;t>=u;u++)f.push(u,u+1,0);this.setIndex(new i.BufferAttribute(new Uint16Array(f),1)),this.addAttribute("position",new i.BufferAttribute(a,3)),this.addAttribute("normal",new i.BufferAttribute(s,3)),this.addAttribute("uv",new i.BufferAttribute(c,2)),this.boundingSphere=new i.Sphere(new i.Vector3,e)},i.CircleBufferGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.CircleBufferGeometry.prototype.constructor=i.CircleBufferGeometry,i.CircleBufferGeometry.prototype.clone=function(){var e=this.parameters;return new i.CircleBufferGeometry(e.radius,e.segments,e.thetaStart,e.thetaLength)},i.CylinderGeometry=function(e,t,r,n,o,a,s,c){i.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:o,openEnded:a,thetaStart:s,thetaLength:c},e=void 0!==e?e:20,t=void 0!==t?t:20,r=void 0!==r?r:100,n=n||8,o=o||1,a=void 0!==a?a:!1,s=void 0!==s?s:0,c=void 0!==c?c:2*Math.PI;var h,u,l=r/2,p=[],f=[];for(u=0;o>=u;u++){var d=[],m=[],v=u/o,g=v*(t-e)+e;for(h=0;n>=h;h++){var y=h/n,b=new i.Vector3;b.x=g*Math.sin(y*c+s),b.y=-v*r+l,b.z=g*Math.cos(y*c+s),this.vertices.push(b),d.push(this.vertices.length-1),m.push(new i.Vector2(y,1-v))}p.push(d),f.push(m)}var x,w,_=(t-e)/r;for(h=0;n>h;h++)for(0!==e?(x=this.vertices[p[0][h]].clone(),w=this.vertices[p[0][h+1]].clone()):(x=this.vertices[p[1][h]].clone(),w=this.vertices[p[1][h+1]].clone()),x.setY(Math.sqrt(x.x*x.x+x.z*x.z)*_).normalize(),w.setY(Math.sqrt(w.x*w.x+w.z*w.z)*_).normalize(),u=0;o>u;u++){var S=p[u][h],M=p[u+1][h],T=p[u+1][h+1],E=p[u][h+1],C=x.clone(),A=x.clone(),k=w.clone(),L=w.clone(),P=f[u][h].clone(),R=f[u+1][h].clone(),D=f[u+1][h+1].clone(),O=f[u][h+1].clone();this.faces.push(new i.Face3(S,M,E,[C,A,L])),this.faceVertexUvs[0].push([P,R,O]),this.faces.push(new i.Face3(M,T,E,[A.clone(),k,L.clone()])),this.faceVertexUvs[0].push([R.clone(),D,O.clone()])}if(a===!1&&e>0)for(this.vertices.push(new i.Vector3(0,l,0)),h=0;n>h;h++){var S=p[0][h],M=p[0][h+1],T=this.vertices.length-1,C=new i.Vector3(0,1,0),A=new i.Vector3(0,1,0),k=new i.Vector3(0,1,0),P=f[0][h].clone(),R=f[0][h+1].clone(),D=new i.Vector2(R.x,0);this.faces.push(new i.Face3(S,M,T,[C,A,k],void 0,1)),this.faceVertexUvs[0].push([P,R,D])}if(a===!1&&t>0)for(this.vertices.push(new i.Vector3(0,-l,0)),h=0;n>h;h++){var S=p[o][h+1],M=p[o][h],T=this.vertices.length-1,C=new i.Vector3(0,-1,0),A=new i.Vector3(0,-1,0),k=new i.Vector3(0,-1,0),P=f[o][h+1].clone(),R=f[o][h].clone(),D=new i.Vector2(R.x,1);this.faces.push(new i.Face3(S,M,T,[C,A,k],void 0,2)),this.faceVertexUvs[0].push([P,R,D])}this.computeFaceNormals()},i.CylinderGeometry.prototype=Object.create(i.Geometry.prototype),i.CylinderGeometry.prototype.constructor=i.CylinderGeometry,i.CylinderGeometry.prototype.clone=function(){var e=this.parameters;return new i.CylinderGeometry(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)},i.EdgesGeometry=function(e,t){function r(e,t){return e-t}i.BufferGeometry.call(this),t=void 0!==t?t:1;var n,o=Math.cos(i.Math.degToRad(t)),a=[0,0],s={},c=["a","b","c"];e instanceof i.BufferGeometry?(n=new i.Geometry,n.fromBufferGeometry(e)):n=e.clone(),n.mergeVertices(),n.computeFaceNormals();for(var h=n.vertices,u=n.faces,l=0,p=u.length;p>l;l++)for(var f=u[l],d=0;3>d;d++){a[0]=f[c[d]],a[1]=f[c[(d+1)%3]],a.sort(r);var m=a.toString();void 0===s[m]?s[m]={vert1:a[0],vert2:a[1],face1:l,face2:void 0}:s[m].face2=l}var v=[];for(var m in s){var g=s[m];if(void 0===g.face2||u[g.face1].normal.dot(u[g.face2].normal)<=o){var y=h[g.vert1];v.push(y.x),v.push(y.y),v.push(y.z),y=h[g.vert2],v.push(y.x),v.push(y.y),v.push(y.z)}}this.addAttribute("position",new i.BufferAttribute(new Float32Array(v),3))},i.EdgesGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.EdgesGeometry.prototype.constructor=i.EdgesGeometry,i.ExtrudeGeometry=function(e,t){return"undefined"==typeof e?void(e=[]):(i.Geometry.call(this),this.type="ExtrudeGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),void this.computeFaceNormals())},i.ExtrudeGeometry.prototype=Object.create(i.Geometry.prototype),i.ExtrudeGeometry.prototype.constructor=i.ExtrudeGeometry,i.ExtrudeGeometry.prototype.addShapeList=function(e,t){for(var r=e.length,n=0;r>n;n++){var i=e[n];this.addShape(i,t)}},i.ExtrudeGeometry.prototype.addShape=function(e,t){function r(e,t,r){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(r).add(e)}function n(e,t,r){var n,o,a=1,s=e.x-t.x,c=e.y-t.y,h=r.x-e.x,u=r.y-e.y,l=s*s+c*c,p=s*u-c*h;if(Math.abs(p)>Number.EPSILON){var f=Math.sqrt(l),d=Math.sqrt(h*h+u*u),m=t.x-c/f,v=t.y+s/f,g=r.x-u/d,y=r.y+h/d,b=((g-m)*u-(y-v)*h)/(s*u-c*h);n=m+s*b-e.x,o=v+c*b-e.y;var x=n*n+o*o;if(2>=x)return new i.Vector2(n,o);a=Math.sqrt(x/2)}else{var w=!1;s>Number.EPSILON?h>Number.EPSILON&&(w=!0):s<-Number.EPSILON?h<-Number.EPSILON&&(w=!0):Math.sign(c)===Math.sign(u)&&(w=!0),w?(n=-c,o=s,a=Math.sqrt(l)):(n=s,o=c,a=Math.sqrt(l/2))}return new i.Vector2(n/a,o/a)}function o(){if(x){var e=0,t=G*e;for(X=0;H>X;X++)I=V[X],h(I[2]+t,I[1]+t,I[0]+t);for(e=_+2*b,t=G*e,X=0;H>X;X++)I=V[X],h(I[0]+t,I[1]+t,I[2]+t)}else{for(X=0;H>X;X++)I=V[X],h(I[2],I[1],I[0]);for(X=0;H>X;X++)I=V[X],h(I[0]+G*_,I[1]+G*_,I[2]+G*_)}}function a(){var e=0;for(s(F,e),e+=F.length,C=0,A=D.length;A>C;C++)E=D[C],s(E,e),e+=E.length}function s(e,t){var r,n;for(X=e.length;--X>=0;){r=X,n=X-1,0>n&&(n=e.length-1);var i=0,o=_+2*b;for(i=0;o>i;i++){var a=G*i,s=G*(i+1),c=t+r+a,h=t+n+a,l=t+n+s,p=t+r+s;u(c,h,l,p,e,i,o,r,n)}}}function c(e,t,r){k.vertices.push(new i.Vector3(e,t,r))}function h(e,t,r){e+=L,t+=L,r+=L,k.faces.push(new i.Face3(e,t,r,null,null,0));var n=T.generateTopUV(k,e,t,r);k.faceVertexUvs[0].push(n)}function u(e,t,r,n,o,a,s,c,h){e+=L,t+=L,r+=L,n+=L,k.faces.push(new i.Face3(e,t,n,null,null,1)),k.faces.push(new i.Face3(t,r,n,null,null,1));var u=T.generateSideWallUV(k,e,t,r,n);k.faceVertexUvs[0].push([u[0],u[1],u[3]]),k.faceVertexUvs[0].push([u[1],u[2],u[3]])}var l,p,f,d,m,v=void 0!==t.amount?t.amount:100,g=void 0!==t.bevelThickness?t.bevelThickness:6,y=void 0!==t.bevelSize?t.bevelSize:g-2,b=void 0!==t.bevelSegments?t.bevelSegments:3,x=void 0!==t.bevelEnabled?t.bevelEnabled:!0,w=void 0!==t.curveSegments?t.curveSegments:12,_=void 0!==t.steps?t.steps:1,S=t.extrudePath,M=!1,T=void 0!==t.UVGenerator?t.UVGenerator:i.ExtrudeGeometry.WorldUVGenerator;S&&(l=S.getSpacedPoints(_),M=!0,x=!1,p=void 0!==t.frames?t.frames:new i.TubeGeometry.FrenetFrames(S,_,!1),f=new i.Vector3,d=new i.Vector3,m=new i.Vector3),x||(b=0,g=0,y=0);var E,C,A,k=this,L=this.vertices.length,P=e.extractPoints(w),R=P.shape,D=P.holes,O=!i.ShapeUtils.isClockWise(R);if(O){for(R=R.reverse(),C=0,A=D.length;A>C;C++)E=D[C],i.ShapeUtils.isClockWise(E)&&(D[C]=E.reverse());O=!1}var V=i.ShapeUtils.triangulateShape(R,D),F=R;for(C=0,A=D.length;A>C;C++)E=D[C],R=R.concat(E);for(var U,N,j,B,z,I,G=R.length,H=V.length,W=[],X=0,$=F.length,q=$-1,Y=X+1;$>X;X++,q++,Y++)q===$&&(q=0),Y===$&&(Y=0),W[X]=n(F[X],F[q],F[Y]);var K,Q=[],Z=W.concat();for(C=0,A=D.length;A>C;C++){for(E=D[C],K=[],X=0,$=E.length,q=$-1,Y=X+1;$>X;X++,q++,Y++)q===$&&(q=0),Y===$&&(Y=0),K[X]=n(E[X],E[q],E[Y]);Q.push(K),Z=Z.concat(K)}for(U=0;b>U;U++){for(j=U/b,B=g*(1-j),N=y*Math.sin(j*Math.PI/2),X=0,$=F.length;$>X;X++)z=r(F[X],W[X],N),c(z.x,z.y,-B);for(C=0,A=D.length;A>C;C++)for(E=D[C],K=Q[C],X=0,$=E.length;$>X;X++)z=r(E[X],K[X],N),c(z.x,z.y,-B)}for(N=y,X=0;G>X;X++)z=x?r(R[X],Z[X],N):R[X],M?(d.copy(p.normals[0]).multiplyScalar(z.x),f.copy(p.binormals[0]).multiplyScalar(z.y),m.copy(l[0]).add(d).add(f),c(m.x,m.y,m.z)):c(z.x,z.y,0);var J;for(J=1;_>=J;J++)for(X=0;G>X;X++)z=x?r(R[X],Z[X],N):R[X],M?(d.copy(p.normals[J]).multiplyScalar(z.x),f.copy(p.binormals[J]).multiplyScalar(z.y),m.copy(l[J]).add(d).add(f),c(m.x,m.y,m.z)):c(z.x,z.y,v/_*J);for(U=b-1;U>=0;U--){for(j=U/b,B=g*(1-j),N=y*Math.sin(j*Math.PI/2),X=0,$=F.length;$>X;X++)z=r(F[X],W[X],N),c(z.x,z.y,v+B);for(C=0,A=D.length;A>C;C++)for(E=D[C],K=Q[C],X=0,$=E.length;$>X;X++)z=r(E[X],K[X],N),M?c(z.x,z.y+l[_-1].y,l[_-1].x+B):c(z.x,z.y,v+B)}o(),a()},i.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,r,n){var o=e.vertices,a=o[t],s=o[r],c=o[n];return[new i.Vector2(a.x,a.y),new i.Vector2(s.x,s.y),new i.Vector2(c.x,c.y)]},generateSideWallUV:function(e,t,r,n,o){var a=e.vertices,s=a[t],c=a[r],h=a[n],u=a[o];return Math.abs(s.y-c.y)<.01?[new i.Vector2(s.x,1-s.z),new i.Vector2(c.x,1-c.z),new i.Vector2(h.x,1-h.z),new i.Vector2(u.x,1-u.z)]:[new i.Vector2(s.y,1-s.z),new i.Vector2(c.y,1-c.z),new i.Vector2(h.y,1-h.z),new i.Vector2(u.y,1-u.z)]}},i.ShapeGeometry=function(e,t){i.Geometry.call(this),this.type="ShapeGeometry",Array.isArray(e)===!1&&(e=[e]),this.addShapeList(e,t),this.computeFaceNormals()},i.ShapeGeometry.prototype=Object.create(i.Geometry.prototype),i.ShapeGeometry.prototype.constructor=i.ShapeGeometry,i.ShapeGeometry.prototype.addShapeList=function(e,t){for(var r=0,n=e.length;n>r;r++)this.addShape(e[r],t);return this},i.ShapeGeometry.prototype.addShape=function(e,t){void 0===t&&(t={});var r,n,o,a=void 0!==t.curveSegments?t.curveSegments:12,s=t.material,c=void 0===t.UVGenerator?i.ExtrudeGeometry.WorldUVGenerator:t.UVGenerator,h=this.vertices.length,u=e.extractPoints(a),l=u.shape,p=u.holes,f=!i.ShapeUtils.isClockWise(l);if(f){for(l=l.reverse(),r=0,n=p.length;n>r;r++)o=p[r],i.ShapeUtils.isClockWise(o)&&(p[r]=o.reverse());f=!1}var d=i.ShapeUtils.triangulateShape(l,p);for(r=0,n=p.length;n>r;r++)o=p[r],l=l.concat(o);var m,v,g=l.length,y=d.length;for(r=0;g>r;r++)m=l[r],this.vertices.push(new i.Vector3(m.x,m.y,0));for(r=0;y>r;r++){v=d[r];var b=v[0]+h,x=v[1]+h,w=v[2]+h;this.faces.push(new i.Face3(b,x,w,null,null,s)),this.faceVertexUvs[0].push(c.generateTopUV(this,b,x,w))}},i.LatheGeometry=function(e,t,r,n){i.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},t=t||12,r=r||0,n=n||2*Math.PI;for(var o=1/(e.length-1),a=1/t,s=0,c=t;c>=s;s++)for(var h=r+s*a*n,u=Math.cos(h),l=Math.sin(h),p=0,f=e.length;f>p;p++){var d=e[p],m=new i.Vector3;m.x=u*d.x-l*d.y,m.y=l*d.x+u*d.y,m.z=d.z,this.vertices.push(m)}for(var v=e.length,s=0,c=t;c>s;s++)for(var p=0,f=e.length-1;f>p;p++){var g=p+v*s,y=g,b=g+v,u=g+1+v,x=g+1,w=s*a,_=p*o,S=w+a,M=_+o;this.faces.push(new i.Face3(y,b,x)),this.faceVertexUvs[0].push([new i.Vector2(w,_),new i.Vector2(S,_),new i.Vector2(w,M)]),this.faces.push(new i.Face3(b,u,x)),this.faceVertexUvs[0].push([new i.Vector2(S,_),new i.Vector2(S,M),new i.Vector2(w,M)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},i.LatheGeometry.prototype=Object.create(i.Geometry.prototype),i.LatheGeometry.prototype.constructor=i.LatheGeometry,i.PlaneGeometry=function(e,t,r,n){i.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n},this.fromBufferGeometry(new i.PlaneBufferGeometry(e,t,r,n))},i.PlaneGeometry.prototype=Object.create(i.Geometry.prototype),i.PlaneGeometry.prototype.constructor=i.PlaneGeometry,i.PlaneGeometry.prototype.clone=function(){var e=this.parameters;return new i.PlaneGeometry(e.width,e.height,e.widthSegments,e.heightSegments)},i.PlaneBufferGeometry=function(e,t,r,n){i.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};for(var o=e/2,a=t/2,s=Math.floor(r)||1,c=Math.floor(n)||1,h=s+1,u=c+1,l=e/s,p=t/c,f=new Float32Array(h*u*3),d=new Float32Array(h*u*3),m=new Float32Array(h*u*2),v=0,g=0,y=0;u>y;y++)for(var b=y*p-a,x=0;h>x;x++){var w=x*l-o;f[v]=w,f[v+1]=-b,d[v+2]=1,m[g]=x/s,m[g+1]=1-y/c,v+=3,g+=2}v=0;for(var _=new(f.length/3>65535?Uint32Array:Uint16Array)(s*c*6),y=0;c>y;y++)for(var x=0;s>x;x++){var S=x+h*y,M=x+h*(y+1),T=x+1+h*(y+1),E=x+1+h*y;_[v]=S,_[v+1]=M,_[v+2]=E,_[v+3]=M,_[v+4]=T,_[v+5]=E,v+=6}this.setIndex(new i.BufferAttribute(_,1)),this.addAttribute("position",new i.BufferAttribute(f,3)),this.addAttribute("normal",new i.BufferAttribute(d,3)),this.addAttribute("uv",new i.BufferAttribute(m,2))},i.PlaneBufferGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.PlaneBufferGeometry.prototype.constructor=i.PlaneBufferGeometry,i.PlaneBufferGeometry.prototype.clone=function(){var e=this.parameters;return new i.PlaneBufferGeometry(e.width,e.height,e.widthSegments,e.heightSegments)},i.RingGeometry=function(e,t,r,n,o,a){i.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:o,thetaLength:a},e=e||0,t=t||50,o=void 0!==o?o:0,a=void 0!==a?a:2*Math.PI,r=void 0!==r?Math.max(3,r):8,n=void 0!==n?Math.max(1,n):8;var s,c,h=[],u=e,l=(t-e)/n;for(s=0;n+1>s;s++){for(c=0;r+1>c;c++){var p=new i.Vector3,f=o+c/r*a;p.x=u*Math.cos(f),p.y=u*Math.sin(f),this.vertices.push(p),h.push(new i.Vector2((p.x/t+1)/2,(p.y/t+1)/2))}u+=l}var d=new i.Vector3(0,0,1);for(s=0;n>s;s++){var m=s*(r+1);for(c=0;r>c;c++){var f=c+m,v=f,g=f+r+1,y=f+r+2;this.faces.push(new i.Face3(v,g,y,[d.clone(),d.clone(),d.clone()])),this.faceVertexUvs[0].push([h[v].clone(),h[g].clone(),h[y].clone()]),v=f,g=f+r+2,y=f+1,this.faces.push(new i.Face3(v,g,y,[d.clone(),d.clone(),d.clone()])),this.faceVertexUvs[0].push([h[v].clone(),h[g].clone(),h[y].clone()])}}this.computeFaceNormals(),this.boundingSphere=new i.Sphere(new i.Vector3,u)},i.RingGeometry.prototype=Object.create(i.Geometry.prototype),i.RingGeometry.prototype.constructor=i.RingGeometry,i.RingGeometry.prototype.clone=function(){var e=this.parameters;return new i.RingGeometry(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)},i.SphereGeometry=function(e,t,r,n,o,a,s){i.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new i.SphereBufferGeometry(e,t,r,n,o,a,s))},i.SphereGeometry.prototype=Object.create(i.Geometry.prototype),i.SphereGeometry.prototype.constructor=i.SphereGeometry,i.SphereGeometry.prototype.clone=function(){var e=this.parameters;return new i.SphereGeometry(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)},i.SphereBufferGeometry=function(e,t,r,n,o,a,s){i.BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:o,thetaStart:a,thetaLength:s},e=e||50,t=Math.max(3,Math.floor(t)||8),r=Math.max(2,Math.floor(r)||6),n=void 0!==n?n:0,o=void 0!==o?o:2*Math.PI,a=void 0!==a?a:0,s=void 0!==s?s:Math.PI;for(var c=a+s,h=(t+1)*(r+1),u=new i.BufferAttribute(new Float32Array(3*h),3),l=new i.BufferAttribute(new Float32Array(3*h),3),p=new i.BufferAttribute(new Float32Array(2*h),2),f=0,d=[],m=new i.Vector3,v=0;r>=v;v++){for(var g=[],y=v/r,b=0;t>=b;b++){var x=b/t,w=-e*Math.cos(n+x*o)*Math.sin(a+y*s),_=e*Math.cos(a+y*s),S=e*Math.sin(n+x*o)*Math.sin(a+y*s);m.set(w,_,S).normalize(),u.setXYZ(f,w,_,S),l.setXYZ(f,m.x,m.y,m.z),p.setXY(f,x,1-y),g.push(f),f++}d.push(g)}for(var M=[],v=0;r>v;v++)for(var b=0;t>b;b++){var T=d[v][b+1],E=d[v][b],C=d[v+1][b],A=d[v+1][b+1];(0!==v||a>0)&&M.push(T,E,A),(v!==r-1||c<Math.PI)&&M.push(E,C,A)}this.setIndex(new(u.count>65535?i.Uint32Attribute:i.Uint16Attribute)(M,1)),this.addAttribute("position",u),this.addAttribute("normal",l),this.addAttribute("uv",p),this.boundingSphere=new i.Sphere(new i.Vector3,e)},i.SphereBufferGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.SphereBufferGeometry.prototype.constructor=i.SphereBufferGeometry,i.SphereBufferGeometry.prototype.clone=function(){var e=this.parameters;return new i.SphereBufferGeometry(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)},i.TorusGeometry=function(e,t,r,n,o){i.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:o},e=e||100,t=t||40,r=r||8,n=n||6,o=o||2*Math.PI;for(var a=new i.Vector3,s=[],c=[],h=0;r>=h;h++)for(var u=0;n>=u;u++){var l=u/n*o,p=h/r*Math.PI*2;a.x=e*Math.cos(l),a.y=e*Math.sin(l);var f=new i.Vector3;f.x=(e+t*Math.cos(p))*Math.cos(l),f.y=(e+t*Math.cos(p))*Math.sin(l),f.z=t*Math.sin(p),this.vertices.push(f),s.push(new i.Vector2(u/n,h/r)),c.push(f.clone().sub(a).normalize())}for(var h=1;r>=h;h++)for(var u=1;n>=u;u++){var d=(n+1)*h+u-1,m=(n+1)*(h-1)+u-1,v=(n+1)*(h-1)+u,g=(n+1)*h+u,y=new i.Face3(d,m,g,[c[d].clone(),c[m].clone(),c[g].clone()]);this.faces.push(y),this.faceVertexUvs[0].push([s[d].clone(),s[m].clone(),s[g].clone()]),y=new i.Face3(m,v,g,[c[m].clone(),c[v].clone(),c[g].clone()]),this.faces.push(y),this.faceVertexUvs[0].push([s[m].clone(),s[v].clone(),s[g].clone()])}this.computeFaceNormals()},i.TorusGeometry.prototype=Object.create(i.Geometry.prototype),i.TorusGeometry.prototype.constructor=i.TorusGeometry,i.TorusGeometry.prototype.clone=function(){var e=this.parameters;return new i.TorusGeometry(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)},i.TorusKnotGeometry=function(e,t,r,n,o,a,s){function c(e,t,r,n,o){var a=Math.cos(e),s=Math.sin(e),c=t/r*e,h=Math.cos(c),u=n*(2+h)*.5*a,l=n*(2+h)*s*.5,p=o*n*Math.sin(c)*.5;return new i.Vector3(u,l,p)}i.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,p:o,q:a,heightScale:s},e=e||100,t=t||40,r=r||64,n=n||8,o=o||2,a=a||3,s=s||1;for(var h=new Array(r),u=new i.Vector3,l=new i.Vector3,p=new i.Vector3,f=0;r>f;++f){h[f]=new Array(n);var d=f/r*2*o*Math.PI,m=c(d,a,o,e,s),v=c(d+.01,a,o,e,s);u.subVectors(v,m),l.addVectors(v,m),p.crossVectors(u,l),l.crossVectors(p,u),p.normalize(),l.normalize();for(var g=0;n>g;++g){var y=g/n*2*Math.PI,b=-t*Math.cos(y),x=t*Math.sin(y),w=new i.Vector3;w.x=m.x+b*l.x+x*p.x,w.y=m.y+b*l.y+x*p.y,w.z=m.z+b*l.z+x*p.z,h[f][g]=this.vertices.push(w)-1}}for(var f=0;r>f;++f)for(var g=0;n>g;++g){var _=(f+1)%r,S=(g+1)%n,M=h[f][g],T=h[_][g],E=h[_][S],C=h[f][S],A=new i.Vector2(f/r,g/n),k=new i.Vector2((f+1)/r,g/n),L=new i.Vector2((f+1)/r,(g+1)/n),P=new i.Vector2(f/r,(g+1)/n);this.faces.push(new i.Face3(M,T,C)),this.faceVertexUvs[0].push([A,k,P]),this.faces.push(new i.Face3(T,E,C)),this.faceVertexUvs[0].push([k.clone(),L,P.clone()])}this.computeFaceNormals(),this.computeVertexNormals()},i.TorusKnotGeometry.prototype=Object.create(i.Geometry.prototype),i.TorusKnotGeometry.prototype.constructor=i.TorusKnotGeometry,i.TorusKnotGeometry.prototype.clone=function(){var e=this.parameters;return new i.TorusKnotGeometry(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.p,e.q,e.heightScale)},i.TubeGeometry=function(e,t,r,n,o,a){function s(e,t,r){return L.vertices.push(new i.Vector3(e,t,r))-1}i.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:e,segments:t,radius:r,radialSegments:n,closed:o,taper:a},t=t||64,r=r||1,n=n||8,o=o||!1,a=a||i.TubeGeometry.NoTaper;var c,h,u,l,p,f,d,m,v,g,y,b,x,w,_,S,M,T,E,C,A,k=[],L=this,P=t+1,R=new i.Vector3,D=new i.TubeGeometry.FrenetFrames(e,t,o),O=D.tangents,V=D.normals,F=D.binormals;for(this.tangents=O,this.normals=V,this.binormals=F,g=0;P>g;g++)for(k[g]=[],l=g/(P-1),v=e.getPointAt(l),c=O[g],h=V[g],u=F[g],f=r*a(l),y=0;n>y;y++)p=y/n*2*Math.PI,d=-f*Math.cos(p),m=f*Math.sin(p),R.copy(v),R.x+=d*h.x+m*u.x,R.y+=d*h.y+m*u.y,R.z+=d*h.z+m*u.z,k[g][y]=s(R.x,R.y,R.z);for(g=0;t>g;g++)for(y=0;n>y;y++)b=o?(g+1)%t:g+1,x=(y+1)%n,w=k[g][y],_=k[b][y],S=k[b][x],M=k[g][x],T=new i.Vector2(g/t,y/n),E=new i.Vector2((g+1)/t,y/n),C=new i.Vector2((g+1)/t,(y+1)/n),A=new i.Vector2(g/t,(y+1)/n),this.faces.push(new i.Face3(w,_,M)),this.faceVertexUvs[0].push([T,E,A]),this.faces.push(new i.Face3(_,S,M)),this.faceVertexUvs[0].push([E.clone(),C,A.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},i.TubeGeometry.prototype=Object.create(i.Geometry.prototype),i.TubeGeometry.prototype.constructor=i.TubeGeometry,i.TubeGeometry.prototype.clone=function(){return new this.constructor(this.parameters.path,this.parameters.segments,this.parameters.radius,this.parameters.radialSegments,this.parameters.closed,this.parameters.taper)},i.TubeGeometry.NoTaper=function(e){return 1},i.TubeGeometry.SinusoidalTaper=function(e){return Math.sin(Math.PI*e)},i.TubeGeometry.FrenetFrames=function(e,t,r){function n(){d[0]=new i.Vector3,m[0]=new i.Vector3,a=Number.MAX_VALUE,s=Math.abs(f[0].x),c=Math.abs(f[0].y),h=Math.abs(f[0].z),a>=s&&(a=s,p.set(1,0,0)),a>=c&&(a=c,p.set(0,1,0)),a>=h&&p.set(0,0,1),v.crossVectors(f[0],p).normalize(),d[0].crossVectors(f[0],v),m[0].crossVectors(f[0],d[0])}var o,a,s,c,h,u,l,p=new i.Vector3,f=[],d=[],m=[],v=new i.Vector3,g=new i.Matrix4,y=t+1;for(this.tangents=f,this.normals=d,this.binormals=m,u=0;y>u;u++)l=u/(y-1),f[u]=e.getTangentAt(l),f[u].normalize();for(n(),u=1;y>u;u++)d[u]=d[u-1].clone(),m[u]=m[u-1].clone(),v.crossVectors(f[u-1],f[u]),v.length()>Number.EPSILON&&(v.normalize(),o=Math.acos(i.Math.clamp(f[u-1].dot(f[u]),-1,1)),d[u].applyMatrix4(g.makeRotationAxis(v,o))),m[u].crossVectors(f[u],d[u]);if(r)for(o=Math.acos(i.Math.clamp(d[0].dot(d[y-1]),-1,1)),o/=y-1,f[0].dot(v.crossVectors(d[0],d[y-1]))>0&&(o=-o),u=1;y>u;u++)d[u].applyMatrix4(g.makeRotationAxis(f[u],o*u)),m[u].crossVectors(f[u],d[u])},i.PolyhedronGeometry=function(e,t,r,n){function o(e){var t=e.normalize().clone();t.index=l.vertices.push(t)-1;var r=c(e)/2/Math.PI+.5,n=h(e)/Math.PI+.5;return t.uv=new i.Vector2(r,1-n),t}function a(e,t,r,n){var o=new i.Face3(e.index,t.index,r.index,[e.clone(),t.clone(),r.clone()],void 0,n);l.faces.push(o),x.copy(e).add(t).add(r).divideScalar(3);var a=c(x);l.faceVertexUvs[0].push([u(e.uv,e,a),u(t.uv,t,a),u(r.uv,r,a)])}function s(e,t){for(var r=Math.pow(2,t),n=o(l.vertices[e.a]),i=o(l.vertices[e.b]),s=o(l.vertices[e.c]),c=[],h=e.materialIndex,u=0;r>=u;u++){c[u]=[];for(var p=o(n.clone().lerp(s,u/r)),f=o(i.clone().lerp(s,u/r)),d=r-u,m=0;d>=m;m++)0===m&&u===r?c[u][m]=p:c[u][m]=o(p.clone().lerp(f,m/d))}for(var u=0;r>u;u++)for(var m=0;2*(r-u)-1>m;m++){var v=Math.floor(m/2);m%2===0?a(c[u][v+1],c[u+1][v],c[u][v],h):a(c[u][v+1],c[u+1][v+1],c[u+1][v],h)}}function c(e){return Math.atan2(e.z,-e.x)}function h(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}function u(e,t,r){return 0>r&&1===e.x&&(e=new i.Vector2(e.x-1,e.y)),0===t.x&&0===t.z&&(e=new i.Vector2(r/2/Math.PI+.5,e.y)),e.clone()}i.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n},r=r||1,n=n||0;for(var l=this,p=0,f=e.length;f>p;p+=3)o(new i.Vector3(e[p],e[p+1],e[p+2]));for(var d=this.vertices,m=[],p=0,v=0,f=t.length;f>p;p+=3,v++){var g=d[t[p]],y=d[t[p+1]],b=d[t[p+2]];m[v]=new i.Face3(g.index,y.index,b.index,[g.clone(),y.clone(),b.clone()],void 0,v)}for(var x=new i.Vector3,p=0,f=m.length;f>p;p++)s(m[p],n);for(var p=0,f=this.faceVertexUvs[0].length;f>p;p++){var w=this.faceVertexUvs[0][p],_=w[0].x,S=w[1].x,M=w[2].x,T=Math.max(_,S,M),E=Math.min(_,S,M);T>.9&&.1>E&&(.2>_&&(w[0].x+=1),.2>S&&(w[1].x+=1),.2>M&&(w[2].x+=1))}for(var p=0,f=this.vertices.length;f>p;p++)this.vertices[p].multiplyScalar(r);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new i.Sphere(new i.Vector3,r)},i.PolyhedronGeometry.prototype=Object.create(i.Geometry.prototype),i.PolyhedronGeometry.prototype.constructor=i.PolyhedronGeometry,i.PolyhedronGeometry.prototype.clone=function(){var e=this.parameters;return new i.PolyhedronGeometry(e.vertices,e.indices,e.radius,e.detail)},i.DodecahedronGeometry=function(e,t){var r=(1+Math.sqrt(5))/2,n=1/r,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];i.PolyhedronGeometry.call(this,o,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}},i.DodecahedronGeometry.prototype=Object.create(i.PolyhedronGeometry.prototype),i.DodecahedronGeometry.prototype.constructor=i.DodecahedronGeometry,i.DodecahedronGeometry.prototype.clone=function(){var e=this.parameters;return new i.DodecahedronGeometry(e.radius,e.detail)},i.IcosahedronGeometry=function(e,t){var r=(1+Math.sqrt(5))/2,n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];i.PolyhedronGeometry.call(this,n,o,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}},i.IcosahedronGeometry.prototype=Object.create(i.PolyhedronGeometry.prototype),i.IcosahedronGeometry.prototype.constructor=i.IcosahedronGeometry,i.IcosahedronGeometry.prototype.clone=function(){var e=this.parameters;return new i.IcosahedronGeometry(e.radius,e.detail)},i.OctahedronGeometry=function(e,t){var r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];i.PolyhedronGeometry.call(this,r,n,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}},i.OctahedronGeometry.prototype=Object.create(i.PolyhedronGeometry.prototype),i.OctahedronGeometry.prototype.constructor=i.OctahedronGeometry,i.OctahedronGeometry.prototype.clone=function(){var e=this.parameters;return new i.OctahedronGeometry(e.radius,e.detail)},i.TetrahedronGeometry=function(e,t){var r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],n=[2,1,0,0,3,2,1,3,0,2,3,1];i.PolyhedronGeometry.call(this,r,n,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}},i.TetrahedronGeometry.prototype=Object.create(i.PolyhedronGeometry.prototype),i.TetrahedronGeometry.prototype.constructor=i.TetrahedronGeometry,i.TetrahedronGeometry.prototype.clone=function(){var e=this.parameters;return new i.TetrahedronGeometry(e.radius,e.detail)},i.ParametricGeometry=function(e,t,r){i.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:r};var n,o,a,s,c,h=this.vertices,u=this.faces,l=this.faceVertexUvs[0],p=t+1;for(n=0;r>=n;n++)for(c=n/r,o=0;t>=o;o++)s=o/t,a=e(s,c),h.push(a);var f,d,m,v,g,y,b,x;for(n=0;r>n;n++)for(o=0;t>o;o++)f=n*p+o,d=n*p+o+1,m=(n+1)*p+o+1,v=(n+1)*p+o,g=new i.Vector2(o/t,n/r),y=new i.Vector2((o+1)/t,n/r),b=new i.Vector2((o+1)/t,(n+1)/r),x=new i.Vector2(o/t,(n+1)/r),u.push(new i.Face3(f,d,v)),l.push([g,y,x]),u.push(new i.Face3(d,m,v)),l.push([y.clone(),b,x.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},i.ParametricGeometry.prototype=Object.create(i.Geometry.prototype),i.ParametricGeometry.prototype.constructor=i.ParametricGeometry,i.WireframeGeometry=function(e){function t(e,t){return e-t}i.BufferGeometry.call(this);var r=[0,0],n={},o=["a","b","c"];if(e instanceof i.Geometry){for(var a=e.vertices,s=e.faces,c=0,h=new Uint32Array(6*s.length),u=0,l=s.length;l>u;u++)for(var p=s[u],f=0;3>f;f++){r[0]=p[o[f]],r[1]=p[o[(f+1)%3]],r.sort(t);var d=r.toString();void 0===n[d]&&(h[2*c]=r[0],h[2*c+1]=r[1],n[d]=!0,c++)}for(var m=new Float32Array(2*c*3),u=0,l=c;l>u;u++)for(var f=0;2>f;f++){var v=a[h[2*u+f]],g=6*u+3*f;m[g+0]=v.x,m[g+1]=v.y,m[g+2]=v.z}this.addAttribute("position",new i.BufferAttribute(m,3))}else if(e instanceof i.BufferGeometry)if(null!==e.index){var y=e.index.array,a=e.attributes.position,b=e.drawcalls,c=0;0===b.length&&e.addGroup(0,y.length);for(var h=new Uint32Array(2*y.length),x=0,w=b.length;w>x;++x)for(var _=b[x],S=_.start,M=_.count,u=S,T=S+M;T>u;u+=3)for(var f=0;3>f;f++){r[0]=y[u+f],r[1]=y[u+(f+1)%3],r.sort(t);var d=r.toString();void 0===n[d]&&(h[2*c]=r[0],h[2*c+1]=r[1],n[d]=!0,c++)}for(var m=new Float32Array(2*c*3),u=0,l=c;l>u;u++)for(var f=0;2>f;f++){var g=6*u+3*f,E=h[2*u+f];m[g+0]=a.getX(E),m[g+1]=a.getY(E),m[g+2]=a.getZ(E)}this.addAttribute("position",new i.BufferAttribute(m,3))}else{for(var a=e.attributes.position.array,c=a.length/3,C=c/3,m=new Float32Array(2*c*3),u=0,l=C;l>u;u++)for(var f=0;3>f;f++){var g=18*u+6*f,A=9*u+3*f;m[g+0]=a[A],m[g+1]=a[A+1],m[g+2]=a[A+2];var E=9*u+3*((f+1)%3);m[g+3]=a[E],m[g+4]=a[E+1],m[g+5]=a[E+2]}this.addAttribute("position",new i.BufferAttribute(m,3))}},i.WireframeGeometry.prototype=Object.create(i.BufferGeometry.prototype),i.WireframeGeometry.prototype.constructor=i.WireframeGeometry,i.AxisHelper=function(e){e=e||1;var t=new Float32Array([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e]),r=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),n=new i.BufferGeometry;n.addAttribute("position",new i.BufferAttribute(t,3)),n.addAttribute("color",new i.BufferAttribute(r,3));var o=new i.LineBasicMaterial({vertexColors:i.VertexColors});i.LineSegments.call(this,n,o)},i.AxisHelper.prototype=Object.create(i.LineSegments.prototype),i.AxisHelper.prototype.constructor=i.AxisHelper,i.ArrowHelper=function(){var e=new i.Geometry;e.vertices.push(new i.Vector3(0,0,0),new i.Vector3(0,1,0));var t=new i.CylinderGeometry(0,.5,1,5,1);return t.translate(0,-.5,0),function(r,n,o,a,s,c){i.Object3D.call(this),void 0===a&&(a=16776960),void 0===o&&(o=1),void 0===s&&(s=.2*o),void 0===c&&(c=.2*s),this.position.copy(n),o>s&&(this.line=new i.Line(e,new i.LineBasicMaterial({color:a})),this.line.matrixAutoUpdate=!1,this.add(this.line)),this.cone=new i.Mesh(t,new i.MeshBasicMaterial({color:a})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(r),this.setLength(o,s,c)}}(),i.ArrowHelper.prototype=Object.create(i.Object3D.prototype),i.ArrowHelper.prototype.constructor=i.ArrowHelper,i.ArrowHelper.prototype.setDirection=function(){var e,t=new i.Vector3;return function(r){r.y>.99999?this.quaternion.set(0,0,0,1):r.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(r.z,0,-r.x).normalize(),e=Math.acos(r.y),this.quaternion.setFromAxisAngle(t,e))}}(),i.ArrowHelper.prototype.setLength=function(e,t,r){void 0===t&&(t=.2*e),void 0===r&&(r=.2*t),e>t&&(this.line.scale.set(1,e-t,1),this.line.updateMatrix()),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()},i.ArrowHelper.prototype.setColor=function(e){void 0!==this.line&&this.line.material.color.set(e),this.cone.material.color.set(e)},i.BoxHelper=function(e){var t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),n=new i.BufferGeometry;n.setIndex(new i.BufferAttribute(t,1)),n.addAttribute("position",new i.BufferAttribute(r,3)),i.LineSegments.call(this,n,new i.LineBasicMaterial({color:16776960})),void 0!==e&&this.update(e)},i.BoxHelper.prototype=Object.create(i.LineSegments.prototype),i.BoxHelper.prototype.constructor=i.BoxHelper,i.BoxHelper.prototype.update=function(){var e=new i.Box3;return function(t){if(e.setFromObject(t),!e.empty()){var r=e.min,n=e.max,i=this.geometry.attributes.position,o=i.array;o[0]=n.x,o[1]=n.y,o[2]=n.z,o[3]=r.x,o[4]=n.y,o[5]=n.z,o[6]=r.x,o[7]=r.y,o[8]=n.z,o[9]=n.x,o[10]=r.y,o[11]=n.z,o[12]=n.x,o[13]=n.y,o[14]=r.z,o[15]=r.x,o[16]=n.y,o[17]=r.z,o[18]=r.x,o[19]=r.y,o[20]=r.z,o[21]=n.x,o[22]=r.y,o[23]=r.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),i.BoundingBoxHelper=function(e,t){var r=void 0!==t?t:8947848;this.object=e,this.box=new i.Box3,i.Mesh.call(this,new i.BoxGeometry(1,1,1),new i.MeshBasicMaterial({color:r,wireframe:!0}))},i.BoundingBoxHelper.prototype=Object.create(i.Mesh.prototype),i.BoundingBoxHelper.prototype.constructor=i.BoundingBoxHelper,i.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),
this.box.size(this.scale),this.box.center(this.position)},i.CameraHelper=function(e){function t(e,t,n){r(e,n),r(t,n)}function r(e,t){n.vertices.push(new i.Vector3),n.colors.push(new i.Color(t)),void 0===a[e]&&(a[e]=[]),a[e].push(n.vertices.length-1)}var n=new i.Geometry,o=new i.LineBasicMaterial({color:16777215,vertexColors:i.FaceColors}),a={},s=16755200,c=16711680,h=43775,u=16777215,l=3355443;t("n1","n2",s),t("n2","n4",s),t("n4","n3",s),t("n3","n1",s),t("f1","f2",s),t("f2","f4",s),t("f4","f3",s),t("f3","f1",s),t("n1","f1",s),t("n2","f2",s),t("n3","f3",s),t("n4","f4",s),t("p","n1",c),t("p","n2",c),t("p","n3",c),t("p","n4",c),t("u1","u2",h),t("u2","u3",h),t("u3","u1",h),t("c","t",u),t("p","c",l),t("cn1","cn2",l),t("cn3","cn4",l),t("cf1","cf2",l),t("cf3","cf4",l),i.LineSegments.call(this,n,o),this.camera=e,this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()},i.CameraHelper.prototype=Object.create(i.LineSegments.prototype),i.CameraHelper.prototype.constructor=i.CameraHelper,i.CameraHelper.prototype.update=function(){function e(e,i,a,s){n.set(i,a,s).unproject(o);var c=r[e];if(void 0!==c)for(var h=0,u=c.length;u>h;h++)t.vertices[c[h]].copy(n)}var t,r,n=new i.Vector3,o=new i.Camera;return function(){t=this.geometry,r=this.pointMap;var n=1,i=1;o.projectionMatrix.copy(this.camera.projectionMatrix),e("c",0,0,-1),e("t",0,0,1),e("n1",-n,-i,-1),e("n2",n,-i,-1),e("n3",-n,i,-1),e("n4",n,i,-1),e("f1",-n,-i,1),e("f2",n,-i,1),e("f3",-n,i,1),e("f4",n,i,1),e("u1",.7*n,1.1*i,-1),e("u2",.7*-n,1.1*i,-1),e("u3",0,2*i,-1),e("cf1",-n,0,1),e("cf2",n,0,1),e("cf3",0,-i,1),e("cf4",0,i,1),e("cn1",-n,0,-1),e("cn2",n,0,-1),e("cn3",0,-i,-1),e("cn4",0,i,-1),t.verticesNeedUpdate=!0}}(),i.DirectionalLightHelper=function(e,t){i.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,t=t||1;var r=new i.Geometry;r.vertices.push(new i.Vector3(-t,t,0),new i.Vector3(t,t,0),new i.Vector3(t,-t,0),new i.Vector3(-t,-t,0),new i.Vector3(-t,t,0));var n=new i.LineBasicMaterial({fog:!1});n.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new i.Line(r,n),this.add(this.lightPlane),r=new i.Geometry,r.vertices.push(new i.Vector3,new i.Vector3),n=new i.LineBasicMaterial({fog:!1}),n.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new i.Line(r,n),this.add(this.targetLine),this.update()},i.DirectionalLightHelper.prototype=Object.create(i.Object3D.prototype),i.DirectionalLightHelper.prototype.constructor=i.DirectionalLightHelper,i.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},i.DirectionalLightHelper.prototype.update=function(){var e=new i.Vector3,t=new i.Vector3,r=new i.Vector3;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),r.subVectors(t,e),this.lightPlane.lookAt(r),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(r),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),i.EdgesHelper=function(e,t,r){var n=void 0!==t?t:16777215;i.LineSegments.call(this,new i.EdgesGeometry(e.geometry,r),new i.LineBasicMaterial({color:n})),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},i.EdgesHelper.prototype=Object.create(i.LineSegments.prototype),i.EdgesHelper.prototype.constructor=i.EdgesHelper,i.FaceNormalsHelper=function(e,t,r,n){this.object=e,this.size=void 0!==t?t:1;var o=void 0!==r?r:16776960,a=void 0!==n?n:1,s=0,c=this.object.geometry;c instanceof i.Geometry?s=c.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var h=new i.BufferGeometry,u=new i.Float32Attribute(2*s*3,3);h.addAttribute("position",u),i.LineSegments.call(this,h,new i.LineBasicMaterial({color:o,linewidth:a})),this.matrixAutoUpdate=!1,this.update()},i.FaceNormalsHelper.prototype=Object.create(i.LineSegments.prototype),i.FaceNormalsHelper.prototype.constructor=i.FaceNormalsHelper,i.FaceNormalsHelper.prototype.update=function(){var e=new i.Vector3,t=new i.Vector3,r=new i.Matrix3;return function(){this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);for(var n=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,c=0,h=0,u=s.length;u>h;h++){var l=s[h],p=l.normal;e.copy(a[l.a]).add(a[l.b]).add(a[l.c]).divideScalar(3).applyMatrix4(n),t.copy(p).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),i.setXYZ(c,e.x,e.y,e.z),c+=1,i.setXYZ(c,t.x,t.y,t.z),c+=1}return i.needsUpdate=!0,this}}(),i.GridHelper=function(e,t){var r=new i.Geometry,n=new i.LineBasicMaterial({vertexColors:i.VertexColors});this.color1=new i.Color(4473924),this.color2=new i.Color(8947848);for(var o=-e;e>=o;o+=t){r.vertices.push(new i.Vector3(-e,0,o),new i.Vector3(e,0,o),new i.Vector3(o,0,-e),new i.Vector3(o,0,e));var a=0===o?this.color1:this.color2;r.colors.push(a,a,a,a)}i.LineSegments.call(this,r,n)},i.GridHelper.prototype=Object.create(i.LineSegments.prototype),i.GridHelper.prototype.constructor=i.GridHelper,i.GridHelper.prototype.setColors=function(e,t){this.color1.set(e),this.color2.set(t),this.geometry.colorsNeedUpdate=!0},i.HemisphereLightHelper=function(e,t){i.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new i.Color,new i.Color];var r=new i.SphereGeometry(t,4,2);r.rotateX(-Math.PI/2);for(var n=0,o=8;o>n;n++)r.faces[n].color=this.colors[4>n?0:1];var a=new i.MeshBasicMaterial({vertexColors:i.FaceColors,wireframe:!0});this.lightSphere=new i.Mesh(r,a),this.add(this.lightSphere),this.update()},i.HemisphereLightHelper.prototype=Object.create(i.Object3D.prototype),i.HemisphereLightHelper.prototype.constructor=i.HemisphereLightHelper,i.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},i.HemisphereLightHelper.prototype.update=function(){var e=new i.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),i.PointLightHelper=function(e,t){this.light=e,this.light.updateMatrixWorld();var r=new i.SphereGeometry(t,4,2),n=new i.MeshBasicMaterial({wireframe:!0,fog:!1});n.color.copy(this.light.color).multiplyScalar(this.light.intensity),i.Mesh.call(this,r,n),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},i.PointLightHelper.prototype=Object.create(i.Mesh.prototype),i.PointLightHelper.prototype.constructor=i.PointLightHelper,i.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},i.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},i.SkeletonHelper=function(e){this.bones=this.getBoneList(e);for(var t=new i.Geometry,r=0;r<this.bones.length;r++){var n=this.bones[r];n.parent instanceof i.Bone&&(t.vertices.push(new i.Vector3),t.vertices.push(new i.Vector3),t.colors.push(new i.Color(0,0,1)),t.colors.push(new i.Color(0,1,0)))}t.dynamic=!0;var o=new i.LineBasicMaterial({vertexColors:i.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});i.LineSegments.call(this,t,o),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()},i.SkeletonHelper.prototype=Object.create(i.LineSegments.prototype),i.SkeletonHelper.prototype.constructor=i.SkeletonHelper,i.SkeletonHelper.prototype.getBoneList=function(e){var t=[];e instanceof i.Bone&&t.push(e);for(var r=0;r<e.children.length;r++)t.push.apply(t,this.getBoneList(e.children[r]));return t},i.SkeletonHelper.prototype.update=function(){for(var e=this.geometry,t=(new i.Matrix4).getInverse(this.root.matrixWorld),r=new i.Matrix4,n=0,o=0;o<this.bones.length;o++){var a=this.bones[o];a.parent instanceof i.Bone&&(r.multiplyMatrices(t,a.matrixWorld),e.vertices[n].setFromMatrixPosition(r),r.multiplyMatrices(t,a.parent.matrixWorld),e.vertices[n+1].setFromMatrixPosition(r),n+=2)}e.verticesNeedUpdate=!0,e.computeBoundingSphere()},i.SpotLightHelper=function(e){i.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var t=new i.CylinderGeometry(0,1,1,8,1,!0);t.translate(0,-.5,0),t.rotateX(-Math.PI/2);var r=new i.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new i.Mesh(t,r),this.add(this.cone),this.update()},i.SpotLightHelper.prototype=Object.create(i.Object3D.prototype),i.SpotLightHelper.prototype.constructor=i.SpotLightHelper,i.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},i.SpotLightHelper.prototype.update=function(){var e=new i.Vector3,t=new i.Vector3;return function(){var r=this.light.distance?this.light.distance:1e4,n=r*Math.tan(this.light.angle);this.cone.scale.set(n,n,r),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),i.VertexNormalsHelper=function(e,t,r,n){this.object=e,this.size=void 0!==t?t:1;var o=void 0!==r?r:16711680,a=void 0!==n?n:1,s=0,c=this.object.geometry;c instanceof i.Geometry?s=3*c.faces.length:c instanceof i.BufferGeometry&&(s=c.attributes.normal.count);var h=new i.BufferGeometry,u=new i.Float32Attribute(2*s*3,3);h.addAttribute("position",u),i.LineSegments.call(this,h,new i.LineBasicMaterial({color:o,linewidth:a})),this.matrixAutoUpdate=!1,this.update()},i.VertexNormalsHelper.prototype=Object.create(i.LineSegments.prototype),i.VertexNormalsHelper.prototype.constructor=i.VertexNormalsHelper,i.VertexNormalsHelper.prototype.update=function(){var e=new i.Vector3,t=new i.Vector3,r=new i.Matrix3;return function(){var n=["a","b","c"];this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);var o=this.object.matrixWorld,a=this.geometry.attributes.position,s=this.object.geometry;if(s instanceof i.Geometry)for(var c=s.vertices,h=s.faces,u=0,l=0,p=h.length;p>l;l++)for(var f=h[l],d=0,m=f.vertexNormals.length;m>d;d++){var v=c[f[n[d]]],g=f.vertexNormals[d];e.copy(v).applyMatrix4(o),t.copy(g).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),a.setXYZ(u,e.x,e.y,e.z),u+=1,a.setXYZ(u,t.x,t.y,t.z),u+=1}else if(s instanceof i.BufferGeometry)for(var y=s.attributes.position,b=s.attributes.normal,u=0,d=0,m=y.count;m>d;d++)e.set(y.getX(d),y.getY(d),y.getZ(d)).applyMatrix4(o),t.set(b.getX(d),b.getY(d),b.getZ(d)),t.applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),a.setXYZ(u,e.x,e.y,e.z),u+=1,a.setXYZ(u,t.x,t.y,t.z),u+=1;return a.needsUpdate=!0,this}}(),i.WireframeHelper=function(e,t){var r=void 0!==t?t:16777215;i.LineSegments.call(this,new i.WireframeGeometry(e.geometry),new i.LineBasicMaterial({color:r})),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},i.WireframeHelper.prototype=Object.create(i.LineSegments.prototype),i.WireframeHelper.prototype.constructor=i.WireframeHelper,i.ImmediateRenderObject=function(e){i.Object3D.call(this),this.material=e,this.render=function(e){}},i.ImmediateRenderObject.prototype=Object.create(i.Object3D.prototype),i.ImmediateRenderObject.prototype.constructor=i.ImmediateRenderObject,i.MorphBlendMesh=function(e,t){i.Mesh.call(this,e,t),this.animationsMap={},this.animationsList=[];var r=this.geometry.morphTargets.length,n="__default",o=0,a=r-1,s=r/1;this.createAnimation(n,o,a,s),this.setAnimationWeight(n,1)},i.MorphBlendMesh.prototype=Object.create(i.Mesh.prototype),i.MorphBlendMesh.prototype.constructor=i.MorphBlendMesh,i.MorphBlendMesh.prototype.createAnimation=function(e,t,r,n){var i={start:t,end:r,length:r-t+1,fps:n,duration:(r-t)/n,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=i,this.animationsList.push(i)},i.MorphBlendMesh.prototype.autoCreateAnimations=function(e){for(var t,r=/([a-z]+)_?(\d+)/,n={},i=this.geometry,o=0,a=i.morphTargets.length;a>o;o++){var s=i.morphTargets[o],c=s.name.match(r);if(c&&c.length>1){var h=c[1];n[h]||(n[h]={start:1/0,end:-(1/0)});var u=n[h];o<u.start&&(u.start=o),o>u.end&&(u.end=o),t||(t=h)}}for(var h in n){var u=n[h];this.createAnimation(h,u.start,u.end,e)}this.firstAnimation=t},i.MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},i.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},i.MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var r=this.animationsMap[e];r&&(r.fps=t,r.duration=(r.end-r.start)/r.fps)},i.MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var r=this.animationsMap[e];r&&(r.duration=t,r.fps=(r.end-r.start)/r.duration)},i.MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var r=this.animationsMap[e];r&&(r.weight=t)},i.MorphBlendMesh.prototype.setAnimationTime=function(e,t){var r=this.animationsMap[e];r&&(r.time=t)},i.MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0,r=this.animationsMap[e];return r&&(t=r.time),t},i.MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1,r=this.animationsMap[e];return r&&(t=r.duration),t},i.MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")},i.MorphBlendMesh.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},i.MorphBlendMesh.prototype.update=function(e){for(var t=0,r=this.animationsList.length;r>t;t++){var n=this.animationsList[t];if(n.active){var o=n.duration/n.length;n.time+=n.direction*e,n.mirroredLoop?(n.time>n.duration||n.time<0)&&(n.direction*=-1,n.time>n.duration&&(n.time=n.duration,n.directionBackwards=!0),n.time<0&&(n.time=0,n.directionBackwards=!1)):(n.time=n.time%n.duration,n.time<0&&(n.time+=n.duration));var a=n.start+i.Math.clamp(Math.floor(n.time/o),0,n.length-1),s=n.weight;a!==n.currentFrame&&(this.morphTargetInfluences[n.lastFrame]=0,this.morphTargetInfluences[n.currentFrame]=1*s,this.morphTargetInfluences[a]=0,n.lastFrame=n.currentFrame,n.currentFrame=a);var c=n.time%o/o;n.directionBackwards&&(c=1-c),n.currentFrame!==n.lastFrame?(this.morphTargetInfluences[n.currentFrame]=c*s,this.morphTargetInfluences[n.lastFrame]=(1-c)*s):this.morphTargetInfluences[n.currentFrame]=s}}},"undefined"!=typeof r?("undefined"!=typeof t&&t.exports&&(r=t.exports=i),r.THREE=i):this.THREE=i},{}],33:[function(e,t,r){function n(e){return i(e).replace(/\s(\w)/g,function(e,t){return t.toUpperCase()})}var i=e("to-space-case");t.exports=n},{"to-space-case":35}],34:[function(e,t,r){function n(e){return a.test(e)?e.toLowerCase():(c.test(e)&&(e=i(e)),s.test(e)&&(e=o(e)),e.toLowerCase())}function i(e){return e.replace(h,function(e,t){return t?" "+t:""})}function o(e){return e.replace(u,function(e,t,r){return t+" "+r.toLowerCase().split("").join(" ")})}t.exports=n;var a=/\s/,s=/[a-z][A-Z]/,c=/[\W_]/,h=/[\W_]+(.|$)/g,u=/(.)([A-Z]+)/g},{}],35:[function(e,t,r){function n(e){return i(e).replace(/[\W_]+(.|$)/g,function(e,t){return t?" "+t:""})}var i=e("to-no-case");t.exports=n},{"to-no-case":34}],36:[function(e,t,r){!function(e){function t(e){var t=e.length,n=r.type(e);return"function"===n||r.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}if(!e.jQuery){var r=function(e,t){return new r.fn.init(e,t)};r.isWindow=function(e){return null!=e&&e==e.window},r.type=function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?i[a.call(e)]||"object":typeof e},r.isArray=Array.isArray||function(e){return"array"===r.type(e)},r.isPlainObject=function(e){var t;if(!e||"object"!==r.type(e)||e.nodeType||r.isWindow(e))return!1;try{if(e.constructor&&!o.call(e,"constructor")&&!o.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}for(t in e);return void 0===t||o.call(e,t)},r.each=function(e,r,n){var i,o=0,a=e.length,s=t(e);if(n){if(s)for(;a>o&&(i=r.apply(e[o],n),i!==!1);o++);else for(o in e)if(i=r.apply(e[o],n),i===!1)break}else if(s)for(;a>o&&(i=r.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=r.call(e[o],o,e[o]),i===!1)break;return e},r.data=function(e,t,i){if(void 0===i){var o=e[r.expando],a=o&&n[o];if(void 0===t)return a;if(a&&t in a)return a[t]}else if(void 0!==t){var o=e[r.expando]||(e[r.expando]=++r.uuid);return n[o]=n[o]||{},n[o][t]=i,i}},r.removeData=function(e,t){var i=e[r.expando],o=i&&n[i];o&&r.each(t,function(e,t){delete o[t]})},r.extend=function(){var e,t,n,i,o,a,s=arguments[0]||{},c=1,h=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[c]||{},c++),"object"!=typeof s&&"function"!==r.type(s)&&(s={}),c===h&&(s=this,c--);h>c;c++)if(null!=(o=arguments[c]))for(i in o)e=s[i],n=o[i],s!==n&&(u&&n&&(r.isPlainObject(n)||(t=r.isArray(n)))?(t?(t=!1,a=e&&r.isArray(e)?e:[]):a=e&&r.isPlainObject(e)?e:{},s[i]=r.extend(u,a,n)):void 0!==n&&(s[i]=n));return s},r.queue=function(e,n,i){function o(e,r){var n=r||[];return null!=e&&(t(Object(e))?!function(e,t){for(var r=+t.length,n=0,i=e.length;r>n;)e[i++]=t[n++];if(r!==r)for(;void 0!==t[n];)e[i++]=t[n++];return e.length=i,e}(n,"string"==typeof e?[e]:e):[].push.call(n,e)),n}if(e){n=(n||"fx")+"queue";var a=r.data(e,n);return i?(!a||r.isArray(i)?a=r.data(e,n,o(i)):a.push(i),a):a||[]}},r.dequeue=function(e,t){r.each(e.nodeType?[e]:e,function(e,n){t=t||"fx";var i=r.queue(n,t),o=i.shift();"inprogress"===o&&(o=i.shift()),o&&("fx"===t&&i.unshift("inprogress"),o.call(n,function(){r.dequeue(n,t)}))})},r.fn=r.prototype={init:function(e){if(e.nodeType)return this[0]=e,this;throw new Error("Not a DOM node.")},offset:function(){var t=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:t.top+(e.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:t.left+(e.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function e(){for(var e=this.offsetParent||document;e&&"html"===!e.nodeType.toLowerCase&&"static"===e.style.position;)e=e.offsetParent;return e||document}var t=this[0],e=e.apply(t),n=this.offset(),i=/^(?:body|html)$/i.test(e.nodeName)?{top:0,left:0}:r(e).offset();return n.top-=parseFloat(t.style.marginTop)||0,n.left-=parseFloat(t.style.marginLeft)||0,e.style&&(i.top+=parseFloat(e.style.borderTopWidth)||0,i.left+=parseFloat(e.style.borderLeftWidth)||0),{top:n.top-i.top,left:n.left-i.left}}};var n={};r.expando="velocity"+(new Date).getTime(),r.uuid=0;for(var i={},o=i.hasOwnProperty,a=i.toString,s="Boolean Number String Function Array Date RegExp Object Error".split(" "),c=0;c<s.length;c++)i["[object "+s[c]+"]"]=s[c].toLowerCase();r.fn.init.prototype=r.fn,e.Velocity={Utilities:r}}}(window),function(e){"object"==typeof t&&"object"==typeof t.exports?t.exports=e():"function"==typeof define&&define.amd?define(e):e()}(function(){return function(e,t,r,n){function i(e){for(var t=-1,r=e?e.length:0,n=[];++t<r;){var i=e[t];i&&n.push(i)}return n}function o(e){return m.isWrapped(e)?e=[].slice.call(e):m.isNode(e)&&(e=[e]),e}function a(e){var t=p.data(e,"velocity");return null===t?n:t}function s(e){return function(t){return Math.round(t*e)*(1/e)}}function c(e,r,n,i){function o(e,t){return 1-3*t+3*e}function a(e,t){return 3*t-6*e}function s(e){return 3*e}function c(e,t,r){return((o(t,r)*e+a(t,r))*e+s(t))*e}function h(e,t,r){return 3*o(t,r)*e*e+2*a(t,r)*e+s(t)}function u(t,r){for(var i=0;m>i;++i){var o=h(r,e,n);if(0===o)return r;var a=c(r,e,n)-t;r-=a/o}return r}function l(){for(var t=0;b>t;++t)S[t]=c(t*x,e,n)}function p(t,r,i){var o,a,s=0;do a=r+(i-r)/2,o=c(a,e,n)-t,o>0?i=a:r=a;while(Math.abs(o)>g&&++s<y);return a}function f(t){for(var r=0,i=1,o=b-1;i!=o&&S[i]<=t;++i)r+=x;--i;var a=(t-S[i])/(S[i+1]-S[i]),s=r+a*x,c=h(s,e,n);return c>=v?u(t,s):0==c?s:p(t,r,r+x)}function d(){M=!0,(e!=r||n!=i)&&l()}var m=4,v=.001,g=1e-7,y=10,b=11,x=1/(b-1),w="Float32Array"in t;if(4!==arguments.length)return!1;for(var _=0;4>_;++_)if("number"!=typeof arguments[_]||isNaN(arguments[_])||!isFinite(arguments[_]))return!1;e=Math.min(e,1),n=Math.min(n,1),e=Math.max(e,0),n=Math.max(n,0);var S=w?new Float32Array(b):new Array(b),M=!1,T=function(t){return M||d(),e===r&&n===i?t:0===t?0:1===t?1:c(f(t),r,i)};T.getControlPoints=function(){return[{x:e,y:r},{x:n,y:i}]};var E="generateBezier("+[e,r,n,i]+")";return T.toString=function(){return E},T}function h(e,t){var r=e;return m.isString(e)?b.Easings[e]||(r=!1):r=m.isArray(e)&&1===e.length?s.apply(null,e):m.isArray(e)&&2===e.length?x.apply(null,e.concat([t])):m.isArray(e)&&4===e.length?c.apply(null,e):!1,r===!1&&(r=b.Easings[b.defaults.easing]?b.defaults.easing:y),r}function u(e){if(e){var t=(new Date).getTime(),r=b.State.calls.length;r>1e4&&(b.State.calls=i(b.State.calls));for(var o=0;r>o;o++)if(b.State.calls[o]){var s=b.State.calls[o],c=s[0],h=s[2],f=s[3],d=!!f,v=null;f||(f=b.State.calls[o][3]=t-16);for(var g=Math.min((t-f)/h.duration,1),y=0,x=c.length;x>y;y++){var _=c[y],M=_.element;if(a(M)){var T=!1;if(h.display!==n&&null!==h.display&&"none"!==h.display){if("flex"===h.display){var E=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];p.each(E,function(e,t){w.setPropertyValue(M,"display",t)})}w.setPropertyValue(M,"display",h.display)}h.visibility!==n&&"hidden"!==h.visibility&&w.setPropertyValue(M,"visibility",h.visibility);for(var C in _)if("element"!==C){var A,k=_[C],L=m.isString(k.easing)?b.Easings[k.easing]:k.easing;if(1===g)A=k.endValue;else{var P=k.endValue-k.startValue;if(A=k.startValue+P*L(g,h,P),!d&&A===k.currentValue)continue}if(k.currentValue=A,"tween"===C)v=A;else{if(w.Hooks.registered[C]){var R=w.Hooks.getRoot(C),D=a(M).rootPropertyValueCache[R];D&&(k.rootPropertyValue=D)}var O=w.setPropertyValue(M,C,k.currentValue+(0===parseFloat(A)?"":k.unitType),k.rootPropertyValue,k.scrollData);w.Hooks.registered[C]&&(w.Normalizations.registered[R]?a(M).rootPropertyValueCache[R]=w.Normalizations.registered[R]("extract",null,O[1]):a(M).rootPropertyValueCache[R]=O[1]),"transform"===O[0]&&(T=!0)}}h.mobileHA&&a(M).transformCache.translate3d===n&&(a(M).transformCache.translate3d="(0px, 0px, 0px)",T=!0),T&&w.flushTransformCache(M)}}h.display!==n&&"none"!==h.display&&(b.State.calls[o][2].display=!1),h.visibility!==n&&"hidden"!==h.visibility&&(b.State.calls[o][2].visibility=!1),h.progress&&h.progress.call(s[1],s[1],g,Math.max(0,f+h.duration-t),f,v),1===g&&l(o)}}b.State.isTicking&&S(u)}function l(e,t){if(!b.State.calls[e])return!1;for(var r=b.State.calls[e][0],i=b.State.calls[e][1],o=b.State.calls[e][2],s=b.State.calls[e][4],c=!1,h=0,u=r.length;u>h;h++){var l=r[h].element;if(t||o.loop||("none"===o.display&&w.setPropertyValue(l,"display",o.display),"hidden"===o.visibility&&w.setPropertyValue(l,"visibility",o.visibility)),o.loop!==!0&&(p.queue(l)[1]===n||!/\.velocityQueueEntryFlag/i.test(p.queue(l)[1]))&&a(l)){a(l).isAnimating=!1,a(l).rootPropertyValueCache={};var f=!1;p.each(w.Lists.transforms3D,function(e,t){var r=/^scale/.test(t)?1:0,i=a(l).transformCache[t];a(l).transformCache[t]!==n&&new RegExp("^\\("+r+"[^.]").test(i)&&(f=!0,delete a(l).transformCache[t])}),o.mobileHA&&(f=!0,delete a(l).transformCache.translate3d),f&&w.flushTransformCache(l),w.Values.removeClass(l,"velocity-animating")}if(!t&&o.complete&&!o.loop&&h===u-1)try{o.complete.call(i,i)}catch(d){setTimeout(function(){throw d},1)}s&&o.loop!==!0&&s(i),a(l)&&o.loop===!0&&!t&&(p.each(a(l).tweensContainer,function(e,t){/^rotate/.test(e)&&360===parseFloat(t.endValue)&&(t.endValue=0,t.startValue=360),/^backgroundPosition/.test(e)&&100===parseFloat(t.endValue)&&"%"===t.unitType&&(t.endValue=0,t.startValue=100)}),b(l,"reverse",{loop:!0,delay:o.delay})),o.queue!==!1&&p.dequeue(l,o.queue)}b.State.calls[e]=!1;for(var m=0,v=b.State.calls.length;v>m;m++)if(b.State.calls[m]!==!1){c=!0;break}c===!1&&(b.State.isTicking=!1,delete b.State.calls,b.State.calls=[])}var p,f=function(){if(r.documentMode)return r.documentMode;for(var e=7;e>4;e--){var t=r.createElement("div");if(t.innerHTML="<!--[if IE "+e+"]><span></span><![endif]-->",t.getElementsByTagName("span").length)return t=null,e}return n}(),d=function(){var e=0;return t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(t){var r,n=(new Date).getTime();return r=Math.max(0,16-(n-e)),e=n+r,setTimeout(function(){t(n+r)},r)}}(),m={isString:function(e){return"string"==typeof e},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isNode:function(e){return e&&e.nodeType},isNodeList:function(e){return"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e))&&e.length!==n&&(0===e.length||"object"==typeof e[0]&&e[0].nodeType>0)},isWrapped:function(e){return e&&(e.jquery||t.Zepto&&t.Zepto.zepto.isZ(e))},isSVG:function(e){return t.SVGElement&&e instanceof t.SVGElement},isEmptyObject:function(e){for(var t in e)return!1;return!0}},v=!1;if(e.fn&&e.fn.jquery?(p=e,v=!0):p=t.Velocity.Utilities,8>=f&&!v)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=f)return void(jQuery.fn.velocity=jQuery.fn.animate);var g=400,y="swing",b={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:t.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:r.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:p,Redirects:{},Easings:{},Promise:t.Promise,defaults:{queue:"",duration:g,easing:y,begin:n,complete:n,progress:n,display:n,visibility:n,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(e){p.data(e,"velocity",{isSVG:m.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};t.pageYOffset!==n?(b.State.scrollAnchor=t,b.State.scrollPropertyLeft="pageXOffset",b.State.scrollPropertyTop="pageYOffset"):(b.State.scrollAnchor=r.documentElement||r.body.parentNode||r.body,b.State.scrollPropertyLeft="scrollLeft",b.State.scrollPropertyTop="scrollTop");var x=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,r,n){var i={x:t.x+n.dx*r,v:t.v+n.dv*r,tension:t.tension,friction:t.friction};return{dx:i.v,dv:e(i)}}function r(r,n){var i={dx:r.v,dv:e(r)},o=t(r,.5*n,i),a=t(r,.5*n,o),s=t(r,n,a),c=1/6*(i.dx+2*(o.dx+a.dx)+s.dx),h=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return r.x=r.x+c*n,r.v=r.v+h*n,r}return function n(e,t,i){var o,a,s,c={x:-1,v:0,tension:null,friction:null},h=[0],u=0,l=1e-4,p=.016;for(e=parseFloat(e)||500,t=parseFloat(t)||20,i=i||null,c.tension=e,c.friction=t,o=null!==i,o?(u=n(e,t),a=u/i*p):a=p;;)if(s=r(s||c,a),h.push(1+s.x),u+=16,!(Math.abs(s.x)>l&&Math.abs(s.v)>l))break;return o?function(e){return h[e*(h.length-1)|0]}:u}}();b.Easings={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)}},p.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(e,t){b.Easings[t[0]]=c.apply(null,t[1])});var w=b.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var e=0;e<w.Lists.colors.length;e++){var t="color"===w.Lists.colors[e]?"0 0 0 1":"255 255 255 1";w.Hooks.templates[w.Lists.colors[e]]=["Red Green Blue Alpha",t]}var r,n,i;if(f)for(r in w.Hooks.templates){n=w.Hooks.templates[r],i=n[0].split(" ");var o=n[1].match(w.RegEx.valueSplit);"Color"===i[0]&&(i.push(i.shift()),o.push(o.shift()),w.Hooks.templates[r]=[i.join(" "),o.join(" ")])}for(r in w.Hooks.templates){n=w.Hooks.templates[r],i=n[0].split(" ");for(var e in i){var a=r+i[e],s=e;w.Hooks.registered[a]=[r,s]}}},getRoot:function(e){var t=w.Hooks.registered[e];return t?t[0]:e},cleanRootPropertyValue:function(e,t){return w.RegEx.valueUnwrap.test(t)&&(t=t.match(w.RegEx.valueUnwrap)[1]),w.Values.isCSSNullValue(t)&&(t=w.Hooks.templates[e][1]),t},extractValue:function(e,t){var r=w.Hooks.registered[e];if(r){var n=r[0],i=r[1];return t=w.Hooks.cleanRootPropertyValue(n,t),t.toString().match(w.RegEx.valueSplit)[i]}return t},injectValue:function(e,t,r){var n=w.Hooks.registered[e];if(n){var i,o,a=n[0],s=n[1];return r=w.Hooks.cleanRootPropertyValue(a,r),i=r.toString().match(w.RegEx.valueSplit),i[s]=t,o=i.join(" ")}return r}},Normalizations:{registered:{clip:function(e,t,r){switch(e){case"name":return"clip";case"extract":var n;return w.RegEx.wrappedValueAlreadyExtracted.test(r)?n=r:(n=r.toString().match(w.RegEx.valueUnwrap),n=n?n[1].replace(/,(\s+)?/g," "):r),n;case"inject":return"rect("+r+")"}},blur:function(e,t,r){switch(e){case"name":return b.State.isFirefox?"filter":"-webkit-filter";case"extract":var n=parseFloat(r);if(!n&&0!==n){var i=r.toString().match(/blur\(([0-9]+[A-z]+)\)/i);n=i?i[1]:0}return n;case"inject":return parseFloat(r)?"blur("+r+")":"none"}},opacity:function(e,t,r){if(8>=f)switch(e){case"name":return"filter";case"extract":var n=r.toString().match(/alpha\(opacity=(.*)\)/i);return r=n?n[1]/100:1;case"inject":return t.style.zoom=1,parseFloat(r)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(r),10)+")"}else switch(e){case"name":return"opacity";case"extract":return r;case"inject":return r}}},register:function(){9>=f||b.State.isGingerbread||(w.Lists.transformsBase=w.Lists.transformsBase.concat(w.Lists.transforms3D));for(var e=0;e<w.Lists.transformsBase.length;e++)!function(){var t=w.Lists.transformsBase[e];w.Normalizations.registered[t]=function(e,r,i){switch(e){case"name":return"transform";case"extract":return a(r)===n||a(r).transformCache[t]===n?/^scale/i.test(t)?1:0:a(r).transformCache[t].replace(/[()]/g,"");case"inject":var o=!1;switch(t.substr(0,t.length-1)){case"translate":o=!/(%|px|em|rem|vw|vh|\d)$/i.test(i);
break;case"scal":case"scale":b.State.isAndroid&&a(r).transformCache[t]===n&&1>i&&(i=1),o=!/(\d)$/i.test(i);break;case"skew":o=!/(deg|\d)$/i.test(i);break;case"rotate":o=!/(deg|\d)$/i.test(i)}return o||(a(r).transformCache[t]="("+i+")"),a(r).transformCache[t]}}}();for(var e=0;e<w.Lists.colors.length;e++)!function(){var t=w.Lists.colors[e];w.Normalizations.registered[t]=function(e,r,i){switch(e){case"name":return t;case"extract":var o;if(w.RegEx.wrappedValueAlreadyExtracted.test(i))o=i;else{var a,s={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(i)?a=s[i]!==n?s[i]:s.black:w.RegEx.isHex.test(i)?a="rgb("+w.Values.hexToRgb(i).join(" ")+")":/^rgba?\(/i.test(i)||(a=s.black),o=(a||i).toString().match(w.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=f||3!==o.split(" ").length||(o+=" 1"),o;case"inject":return 8>=f?4===i.split(" ").length&&(i=i.split(/\s+/).slice(0,3).join(" ")):3===i.split(" ").length&&(i+=" 1"),(8>=f?"rgb":"rgba")+"("+i.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})},SVGAttribute:function(e){var t="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(f||b.State.isAndroid&&!b.State.isChrome)&&(t+="|transform"),new RegExp("^("+t+")$","i").test(e)},prefixCheck:function(e){if(b.State.prefixMatches[e])return[b.State.prefixMatches[e],!0];for(var t=["","Webkit","Moz","ms","O"],r=0,n=t.length;n>r;r++){var i;if(i=0===r?e:t[r]+e.replace(/^\w/,function(e){return e.toUpperCase()}),m.isString(b.State.prefixElement.style[i]))return b.State.prefixMatches[e]=i,[i,!0]}return[e,!1]}},Values:{hexToRgb:function(e){var t,r=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return e=e.replace(r,function(e,t,r,n){return t+t+r+r+n+n}),t=n.exec(e),t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]},isCSSNullValue:function(e){return 0==e||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e)},getUnitType:function(e){return/^(rotate|skew)/i.test(e)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e)?"":"px"},getDisplayType:function(e){var t=e&&e.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":/^(tr)$/i.test(t)?"table-row":/^(table)$/i.test(t)?"table":/^(tbody)$/i.test(t)?"table-row-group":"block"},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=(e.className.length?" ":"")+t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.toString().replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(e,r,i,o){function s(e,r){function i(){h&&w.setPropertyValue(e,"display","none")}var c=0;if(8>=f)c=p.css(e,r);else{var h=!1;if(/^(width|height)$/.test(r)&&0===w.getPropertyValue(e,"display")&&(h=!0,w.setPropertyValue(e,"display",w.Values.getDisplayType(e))),!o){if("height"===r&&"border-box"!==w.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var u=e.offsetHeight-(parseFloat(w.getPropertyValue(e,"borderTopWidth"))||0)-(parseFloat(w.getPropertyValue(e,"borderBottomWidth"))||0)-(parseFloat(w.getPropertyValue(e,"paddingTop"))||0)-(parseFloat(w.getPropertyValue(e,"paddingBottom"))||0);return i(),u}if("width"===r&&"border-box"!==w.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var l=e.offsetWidth-(parseFloat(w.getPropertyValue(e,"borderLeftWidth"))||0)-(parseFloat(w.getPropertyValue(e,"borderRightWidth"))||0)-(parseFloat(w.getPropertyValue(e,"paddingLeft"))||0)-(parseFloat(w.getPropertyValue(e,"paddingRight"))||0);return i(),l}}var d;d=a(e)===n?t.getComputedStyle(e,null):a(e).computedStyle?a(e).computedStyle:a(e).computedStyle=t.getComputedStyle(e,null),"borderColor"===r&&(r="borderTopColor"),c=9===f&&"filter"===r?d.getPropertyValue(r):d[r],(""===c||null===c)&&(c=e.style[r]),i()}if("auto"===c&&/^(top|right|bottom|left)$/i.test(r)){var m=s(e,"position");("fixed"===m||"absolute"===m&&/top|left/i.test(r))&&(c=p(e).position()[r]+"px")}return c}var c;if(w.Hooks.registered[r]){var h=r,u=w.Hooks.getRoot(h);i===n&&(i=w.getPropertyValue(e,w.Names.prefixCheck(u)[0])),w.Normalizations.registered[u]&&(i=w.Normalizations.registered[u]("extract",e,i)),c=w.Hooks.extractValue(h,i)}else if(w.Normalizations.registered[r]){var l,d;l=w.Normalizations.registered[r]("name",e),"transform"!==l&&(d=s(e,w.Names.prefixCheck(l)[0]),w.Values.isCSSNullValue(d)&&w.Hooks.templates[r]&&(d=w.Hooks.templates[r][1])),c=w.Normalizations.registered[r]("extract",e,d)}if(!/^[\d-]/.test(c))if(a(e)&&a(e).isSVG&&w.Names.SVGAttribute(r))if(/^(height|width)$/i.test(r))try{c=e.getBBox()[r]}catch(m){c=0}else c=e.getAttribute(r);else c=s(e,w.Names.prefixCheck(r)[0]);return w.Values.isCSSNullValue(c)&&(c=0),b.debug>=2&&console.log("Get "+r+": "+c),c},setPropertyValue:function(e,r,n,i,o){var s=r;if("scroll"===r)o.container?o.container["scroll"+o.direction]=n:"Left"===o.direction?t.scrollTo(n,o.alternateValue):t.scrollTo(o.alternateValue,n);else if(w.Normalizations.registered[r]&&"transform"===w.Normalizations.registered[r]("name",e))w.Normalizations.registered[r]("inject",e,n),s="transform",n=a(e).transformCache[r];else{if(w.Hooks.registered[r]){var c=r,h=w.Hooks.getRoot(r);i=i||w.getPropertyValue(e,h),n=w.Hooks.injectValue(c,n,i),r=h}if(w.Normalizations.registered[r]&&(n=w.Normalizations.registered[r]("inject",e,n),r=w.Normalizations.registered[r]("name",e)),s=w.Names.prefixCheck(r)[0],8>=f)try{e.style[s]=n}catch(u){b.debug&&console.log("Browser does not support ["+n+"] for ["+s+"]")}else a(e)&&a(e).isSVG&&w.Names.SVGAttribute(r)?e.setAttribute(r,n):e.style[s]=n;b.debug>=2&&console.log("Set "+r+" ("+s+"): "+n)}return[s,n]},flushTransformCache:function(e){function t(t){return parseFloat(w.getPropertyValue(e,t))}var r="";if((f||b.State.isAndroid&&!b.State.isChrome)&&a(e).isSVG){var n={translate:[t("translateX"),t("translateY")],skewX:[t("skewX")],skewY:[t("skewY")],scale:1!==t("scale")?[t("scale"),t("scale")]:[t("scaleX"),t("scaleY")],rotate:[t("rotateZ"),0,0]};p.each(a(e).transformCache,function(e){/^translate/i.test(e)?e="translate":/^scale/i.test(e)?e="scale":/^rotate/i.test(e)&&(e="rotate"),n[e]&&(r+=e+"("+n[e].join(" ")+") ",delete n[e])})}else{var i,o;p.each(a(e).transformCache,function(t){return i=a(e).transformCache[t],"transformPerspective"===t?(o=i,!0):(9===f&&"rotateZ"===t&&(t="rotate"),void(r+=t+i+" "))}),o&&(r="perspective"+o+" "+r)}w.setPropertyValue(e,"transform",r)}};w.Hooks.register(),w.Normalizations.register(),b.hook=function(e,t,r){var i=n;return e=o(e),p.each(e,function(e,o){if(a(o)===n&&b.init(o),r===n)i===n&&(i=b.CSS.getPropertyValue(o,t));else{var s=b.CSS.setPropertyValue(o,t,r);"transform"===s[0]&&b.CSS.flushTransformCache(o),i=s}}),i};var _=function(){function e(){return s?C.promise||null:c}function i(){function e(e){function l(e,t){var r=n,i=n,a=n;return m.isArray(e)?(r=e[0],!m.isArray(e[1])&&/^[\d-]/.test(e[1])||m.isFunction(e[1])||w.RegEx.isHex.test(e[1])?a=e[1]:(m.isString(e[1])&&!w.RegEx.isHex.test(e[1])||m.isArray(e[1]))&&(i=t?e[1]:h(e[1],s.duration),e[2]!==n&&(a=e[2]))):r=e,t||(i=i||s.easing),m.isFunction(r)&&(r=r.call(o,M,S)),m.isFunction(a)&&(a=a.call(o,M,S)),[r||0,i,a]}function f(e,t){var r,n;return n=(t||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(e){return r=e,""}),r||(r=w.Values.getUnitType(e)),[n,r]}function g(){var e={myParent:o.parentNode||r.body,position:w.getPropertyValue(o,"position"),fontSize:w.getPropertyValue(o,"fontSize")},n=e.position===O.lastPosition&&e.myParent===O.lastParent,i=e.fontSize===O.lastFontSize;O.lastParent=e.myParent,O.lastPosition=e.position,O.lastFontSize=e.fontSize;var s=100,c={};if(i&&n)c.emToPx=O.lastEmToPx,c.percentToPxWidth=O.lastPercentToPxWidth,c.percentToPxHeight=O.lastPercentToPxHeight;else{var h=a(o).isSVG?r.createElementNS("http://www.w3.org/2000/svg","rect"):r.createElement("div");b.init(h),e.myParent.appendChild(h),p.each(["overflow","overflowX","overflowY"],function(e,t){b.CSS.setPropertyValue(h,t,"hidden")}),b.CSS.setPropertyValue(h,"position",e.position),b.CSS.setPropertyValue(h,"fontSize",e.fontSize),b.CSS.setPropertyValue(h,"boxSizing","content-box"),p.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(e,t){b.CSS.setPropertyValue(h,t,s+"%")}),b.CSS.setPropertyValue(h,"paddingLeft",s+"em"),c.percentToPxWidth=O.lastPercentToPxWidth=(parseFloat(w.getPropertyValue(h,"width",null,!0))||1)/s,c.percentToPxHeight=O.lastPercentToPxHeight=(parseFloat(w.getPropertyValue(h,"height",null,!0))||1)/s,c.emToPx=O.lastEmToPx=(parseFloat(w.getPropertyValue(h,"paddingLeft"))||1)/s,e.myParent.removeChild(h)}return null===O.remToPx&&(O.remToPx=parseFloat(w.getPropertyValue(r.body,"fontSize"))||16),null===O.vwToPx&&(O.vwToPx=parseFloat(t.innerWidth)/100,O.vhToPx=parseFloat(t.innerHeight)/100),c.remToPx=O.remToPx,c.vwToPx=O.vwToPx,c.vhToPx=O.vhToPx,b.debug>=1&&console.log("Unit ratios: "+JSON.stringify(c),o),c}if(s.begin&&0===M)try{s.begin.call(d,d)}catch(x){setTimeout(function(){throw x},1)}if("scroll"===A){var _,T,E,k=/^x$/i.test(s.axis)?"Left":"Top",L=parseFloat(s.offset)||0;s.container?m.isWrapped(s.container)||m.isNode(s.container)?(s.container=s.container[0]||s.container,_=s.container["scroll"+k],E=_+p(o).position()[k.toLowerCase()]+L):s.container=null:(_=b.State.scrollAnchor[b.State["scrollProperty"+k]],T=b.State.scrollAnchor[b.State["scrollProperty"+("Left"===k?"Top":"Left")]],E=p(o).offset()[k.toLowerCase()]+L),c={scroll:{rootPropertyValue:!1,startValue:_,currentValue:_,endValue:E,unitType:"",easing:s.easing,scrollData:{container:s.container,direction:k,alternateValue:T}},element:o},b.debug&&console.log("tweensContainer (scroll): ",c.scroll,o)}else if("reverse"===A){if(!a(o).tweensContainer)return void p.dequeue(o,s.queue);"none"===a(o).opts.display&&(a(o).opts.display="auto"),"hidden"===a(o).opts.visibility&&(a(o).opts.visibility="visible"),a(o).opts.loop=!1,a(o).opts.begin=null,a(o).opts.complete=null,y.easing||delete s.easing,y.duration||delete s.duration,s=p.extend({},a(o).opts,s);var P=p.extend(!0,{},a(o).tweensContainer);for(var R in P)if("element"!==R){var D=P[R].startValue;P[R].startValue=P[R].currentValue=P[R].endValue,P[R].endValue=D,m.isEmptyObject(y)||(P[R].easing=s.easing),b.debug&&console.log("reverse tweensContainer ("+R+"): "+JSON.stringify(P[R]),o)}c=P}else if("start"===A){var P;a(o).tweensContainer&&a(o).isAnimating===!0&&(P=a(o).tweensContainer),p.each(v,function(e,t){if(RegExp("^"+w.Lists.colors.join("$|^")+"$").test(e)){var r=l(t,!0),i=r[0],o=r[1],a=r[2];if(w.RegEx.isHex.test(i)){for(var s=["Red","Green","Blue"],c=w.Values.hexToRgb(i),h=a?w.Values.hexToRgb(a):n,u=0;u<s.length;u++){var p=[c[u]];o&&p.push(o),h!==n&&p.push(h[u]),v[e+s[u]]=p}delete v[e]}}});for(var F in v){var U=l(v[F]),N=U[0],j=U[1],B=U[2];F=w.Names.camelCase(F);var z=w.Hooks.getRoot(F),I=!1;if(a(o).isSVG||"tween"===z||w.Names.prefixCheck(z)[1]!==!1||w.Normalizations.registered[z]!==n){(s.display!==n&&null!==s.display&&"none"!==s.display||s.visibility!==n&&"hidden"!==s.visibility)&&/opacity|filter/.test(F)&&!B&&0!==N&&(B=0),s._cacheValues&&P&&P[F]?(B===n&&(B=P[F].endValue+P[F].unitType),I=a(o).rootPropertyValueCache[z]):w.Hooks.registered[F]?B===n?(I=w.getPropertyValue(o,z),B=w.getPropertyValue(o,F,I)):I=w.Hooks.templates[z][1]:B===n&&(B=w.getPropertyValue(o,F));var G,H,W,X=!1;if(G=f(F,B),B=G[0],W=G[1],G=f(F,N),N=G[0].replace(/^([+-\/*])=/,function(e,t){return X=t,""}),H=G[1],B=parseFloat(B)||0,N=parseFloat(N)||0,"%"===H&&(/^(fontSize|lineHeight)$/.test(F)?(N/=100,H="em"):/^scale/.test(F)?(N/=100,H=""):/(Red|Green|Blue)$/i.test(F)&&(N=N/100*255,H="")),/[\/*]/.test(X))H=W;else if(W!==H&&0!==B)if(0===N)H=W;else{i=i||g();var $=/margin|padding|left|right|width|text|word|letter/i.test(F)||/X$/.test(F)||"x"===F?"x":"y";switch(W){case"%":B*="x"===$?i.percentToPxWidth:i.percentToPxHeight;break;case"px":break;default:B*=i[W+"ToPx"]}switch(H){case"%":B*=1/("x"===$?i.percentToPxWidth:i.percentToPxHeight);break;case"px":break;default:B*=1/i[H+"ToPx"]}}switch(X){case"+":N=B+N;break;case"-":N=B-N;break;case"*":N=B*N;break;case"/":N=B/N}c[F]={rootPropertyValue:I,startValue:B,currentValue:B,endValue:N,unitType:H,easing:j},b.debug&&console.log("tweensContainer ("+F+"): "+JSON.stringify(c[F]),o)}else b.debug&&console.log("Skipping ["+z+"] due to a lack of browser support.")}c.element=o}c.element&&(w.Values.addClass(o,"velocity-animating"),V.push(c),""===s.queue&&(a(o).tweensContainer=c,a(o).opts=s),a(o).isAnimating=!0,M===S-1?(b.State.calls.push([V,d,s,null,C.resolver]),b.State.isTicking===!1&&(b.State.isTicking=!0,u())):M++)}var i,o=this,s=p.extend({},b.defaults,y),c={};switch(a(o)===n&&b.init(o),parseFloat(s.delay)&&s.queue!==!1&&p.queue(o,s.queue,function(e){b.velocityQueueEntryFlag=!0,a(o).delayTimer={setTimeout:setTimeout(e,parseFloat(s.delay)),next:e}}),s.duration.toString().toLowerCase()){case"fast":s.duration=200;break;case"normal":s.duration=g;break;case"slow":s.duration=600;break;default:s.duration=parseFloat(s.duration)||1}b.mock!==!1&&(b.mock===!0?s.duration=s.delay=1:(s.duration*=parseFloat(b.mock)||1,s.delay*=parseFloat(b.mock)||1)),s.easing=h(s.easing,s.duration),s.begin&&!m.isFunction(s.begin)&&(s.begin=null),s.progress&&!m.isFunction(s.progress)&&(s.progress=null),s.complete&&!m.isFunction(s.complete)&&(s.complete=null),s.display!==n&&null!==s.display&&(s.display=s.display.toString().toLowerCase(),"auto"===s.display&&(s.display=b.CSS.Values.getDisplayType(o))),s.visibility!==n&&null!==s.visibility&&(s.visibility=s.visibility.toString().toLowerCase()),s.mobileHA=s.mobileHA&&b.State.isMobile&&!b.State.isGingerbread,s.queue===!1?s.delay?setTimeout(e,s.delay):e():p.queue(o,s.queue,function(t,r){return r===!0?(C.promise&&C.resolver(d),!0):(b.velocityQueueEntryFlag=!0,void e(t))}),""!==s.queue&&"fx"!==s.queue||"inprogress"===p.queue(o)[0]||p.dequeue(o)}var s,c,f,d,v,y,x=arguments[0]&&(arguments[0].p||p.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||m.isString(arguments[0].properties));if(m.isWrapped(this)?(s=!1,f=0,d=this,c=this):(s=!0,f=1,d=x?arguments[0].elements||arguments[0].e:arguments[0]),d=o(d)){x?(v=arguments[0].properties||arguments[0].p,y=arguments[0].options||arguments[0].o):(v=arguments[f],y=arguments[f+1]);var S=d.length,M=0;if(!/^(stop|finish|finishAll)$/i.test(v)&&!p.isPlainObject(y)){var T=f+1;y={};for(var E=T;E<arguments.length;E++)m.isArray(arguments[E])||!/^(fast|normal|slow)$/i.test(arguments[E])&&!/^\d/.test(arguments[E])?m.isString(arguments[E])||m.isArray(arguments[E])?y.easing=arguments[E]:m.isFunction(arguments[E])&&(y.complete=arguments[E]):y.duration=arguments[E]}var C={promise:null,resolver:null,rejecter:null};s&&b.Promise&&(C.promise=new b.Promise(function(e,t){C.resolver=e,C.rejecter=t}));var A;switch(v){case"scroll":A="scroll";break;case"reverse":A="reverse";break;case"finish":case"finishAll":case"stop":p.each(d,function(e,t){a(t)&&a(t).delayTimer&&(clearTimeout(a(t).delayTimer.setTimeout),a(t).delayTimer.next&&a(t).delayTimer.next(),delete a(t).delayTimer),"finishAll"!==v||y!==!0&&!m.isString(y)||(p.each(p.queue(t,m.isString(y)?y:""),function(e,t){m.isFunction(t)&&t()}),p.queue(t,m.isString(y)?y:"",[]))});var k=[];return p.each(b.State.calls,function(e,t){t&&p.each(t[1],function(r,i){var o=y===n?"":y;return o===!0||t[2].queue===o||y===n&&t[2].queue===!1?void p.each(d,function(r,n){n===i&&((y===!0||m.isString(y))&&(p.each(p.queue(n,m.isString(y)?y:""),function(e,t){m.isFunction(t)&&t(null,!0)}),p.queue(n,m.isString(y)?y:"",[])),"stop"===v?(a(n)&&a(n).tweensContainer&&o!==!1&&p.each(a(n).tweensContainer,function(e,t){t.endValue=t.currentValue}),k.push(e)):("finish"===v||"finishAll"===v)&&(t[2].duration=1))}):!0})}),"stop"===v&&(p.each(k,function(e,t){l(t,!0)}),C.promise&&C.resolver(d)),e();default:if(!p.isPlainObject(v)||m.isEmptyObject(v)){if(m.isString(v)&&b.Redirects[v]){var L=p.extend({},y),P=L.duration,R=L.delay||0;return L.backwards===!0&&(d=p.extend(!0,[],d).reverse()),p.each(d,function(e,t){parseFloat(L.stagger)?L.delay=R+parseFloat(L.stagger)*e:m.isFunction(L.stagger)&&(L.delay=R+L.stagger.call(t,e,S)),L.drag&&(L.duration=parseFloat(P)||(/^(callout|transition)/.test(v)?1e3:g),L.duration=Math.max(L.duration*(L.backwards?1-e/S:(e+1)/S),.75*L.duration,200)),b.Redirects[v].call(t,t,L||{},e,S,d,C.promise?C:n)}),e()}var D="Velocity: First argument ("+v+") was not a property map, a known action, or a registered redirect. Aborting.";return C.promise?C.rejecter(new Error(D)):console.log(D),e()}A="start"}var O={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},V=[];p.each(d,function(e,t){m.isNode(t)&&i.call(t)});var F,L=p.extend({},b.defaults,y);if(L.loop=parseInt(L.loop),F=2*L.loop-1,L.loop)for(var U=0;F>U;U++){var N={delay:L.delay,progress:L.progress};U===F-1&&(N.display=L.display,N.visibility=L.visibility,N.complete=L.complete),_(d,"reverse",N)}return e()}};b=p.extend(_,b),b.animate=_;var S=t.requestAnimationFrame||d;return b.State.isMobile||r.hidden===n||r.addEventListener("visibilitychange",function(){r.hidden?(S=function(e){return setTimeout(function(){e(!0)},16)},u()):S=t.requestAnimationFrame||d}),e.Velocity=b,e!==t&&(e.fn.velocity=_,e.fn.velocity.defaults=b.defaults),p.each(["Down","Up"],function(e,t){b.Redirects["slide"+t]=function(e,r,i,o,a,s){var c=p.extend({},r),h=c.begin,u=c.complete,l={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},f={};c.display===n&&(c.display="Down"===t?"inline"===b.CSS.Values.getDisplayType(e)?"inline-block":"block":"none"),c.begin=function(){h&&h.call(a,a);for(var r in l){f[r]=e.style[r];var n=b.CSS.getPropertyValue(e,r);l[r]="Down"===t?[n,0]:[0,n]}f.overflow=e.style.overflow,e.style.overflow="hidden"},c.complete=function(){for(var t in f)e.style[t]=f[t];u&&u.call(a,a),s&&s.resolver(a)},b(e,l,c)}}),p.each(["In","Out"],function(e,t){b.Redirects["fade"+t]=function(e,r,i,o,a,s){var c=p.extend({},r),h={opacity:"In"===t?1:0},u=c.complete;i!==o-1?c.complete=c.begin=null:c.complete=function(){u&&u.call(a,a),s&&s.resolver(a)},c.display===n&&(c.display="In"===t?"auto":"none"),b(this,h,c)}}),b}(window.jQuery||window.Zepto||window,window,document)})},{}],37:[function(e,t,r){!function(e,n){"object"==typeof r&&"undefined"!=typeof t?t.exports=n():"function"==typeof define&&define.amd?define(n):e.VueRouter=n()}(this,function(){"use strict";function e(e,t,r){this.path=e,this.matcher=t,this.delegate=r}function t(e){this.routes={},this.children={},this.target=e}function r(t,n,i){return function(o,a){var s=t+o;return a?void a(r(s,n,i)):new e(t+o,n,i)}}function n(e,t,r){for(var n=0,i=0,o=e.length;o>i;i++)n+=e[i].path.length;t=t.substr(n);var a={path:t,handler:r};e.push(a)}function i(e,t,r,o){var a=t.routes;for(var s in a)if(a.hasOwnProperty(s)){var c=e.slice();n(c,s,a[s]),t.children[s]?i(c,t.children[s],r,o):r.call(o,c)}}function o(e,n){var o=new t;e(r("",o,this.delegate)),i([],o,function(e){n?n(this,e):this.add(e)},this)}function a(e){return"[object Array]"===Object.prototype.toString.call(e)}function s(e){this.string=e}function c(e){this.name=e}function h(e){this.name=e}function u(){}function l(e,t,r){"/"===e.charAt(0)&&(e=e.substr(1));var n=e.split("/"),i=[];r.val="";for(var o=0,a=n.length;a>o;o++){var l,p=n[o];(l=p.match(/^:([^\/]+)$/))?(i.push(new c(l[1])),t.push(l[1]),r.val+="3"):(l=p.match(/^\*([^\/]+)$/))?(i.push(new h(l[1])),r.val+="2",t.push(l[1])):""===p?(i.push(new u),r.val+="1"):(i.push(new s(p)),r.val+="4")}return r.val=+r.val,i}function p(e){this.charSpec=e,this.nextStates=[]}function f(e){return e.sort(function(e,t){return t.specificity.val-e.specificity.val})}function d(e,t){for(var r=[],n=0,i=e.length;i>n;n++){var o=e[n];r=r.concat(o.match(t))}return r}function m(e){this.queryParams=e||{}}function v(e,t,r){for(var n=e.handlers,i=e.regex,o=t.match(i),a=1,s=new m(r),c=0,h=n.length;h>c;c++){for(var u=n[c],l=u.names,p={},f=0,d=l.length;d>f;f++)p[l[f]]=o[a++];s.push({handler:u.handler,params:p,isDynamic:!!l.length})}return s}function g(e,t){return t.eachChar(function(t){e=e.put(t)}),e}function y(e){return e=e.replace(/\+/gm,"%20"),decodeURIComponent(e)}function b(e){window.console&&(console.warn("[vue-router] "+e),(!W.Vue||W.Vue.config.debug)&&console.warn(new Error("warning stack trace:").stack))}function x(e,t,r){var n=e.match(/(\?.*)$/);if(n&&(n=n[1],e=e.slice(0,-n.length)),"?"===t.charAt(0))return e+t;var i=e.split("/");r&&i[i.length-1]||i.pop();for(var o=t.replace(/^\//,"").split("/"),a=0;a<o.length;a++){var s=o[a];"."!==s&&(".."===s?i.pop():i.push(s))}return""!==i[0]&&i.unshift(""),i.join("/")}function w(e){return e&&"function"==typeof e.then}function _(e,t){var r=e&&(e.$options||e.options);return r&&r.route&&r.route[t]}function S(e,t){X?X.$options.components._=e.component:X={resolve:W.Vue.prototype._resolveComponent,$options:{components:{_:e.component}}},X.resolve("_",function(r){e.component=r,t(r)})}function M(e,t,r){return void 0===t&&(t={}),e=e.replace(/:([^\/]+)/g,function(r,n){var i=t[n];return i||b('param "'+n+'" not found when generating path for "'+e+'" with params '+JSON.stringify(t)),i||""}),r&&(e+=H(r)),e}function T(e,t,r){var n=e.childVM;if(!n||!t)return!1;if(e.Component!==t.component)return!1;var i=_(n,"canReuse");return"boolean"==typeof i?i:i?i.call(n,{to:r.to,from:r.from}):!0}function E(e,t,r){var n=e.childVM,i=_(n,"canDeactivate");i?t.callHook(i,n,r,{expectBoolean:!0}):r()}function C(e,t,r){S(e,function(e){if(!t.aborted){var n=_(e,"canActivate");n?t.callHook(n,null,r,{expectBoolean:!0}):r()}})}function A(e,t,r){var n=e.childVM,i=_(n,"deactivate");i?t.callHooks(i,n,r):r()}function k(e,t,r,n,i){var o=t.activateQueue[r];if(!o)return e._bound&&e.setComponent(null),void(n&&n());var a=e.Component=o.component,s=_(a,"activate"),c=_(a,"data"),h=_(a,"waitForData");e.depth=r,e.activated=!1;var u=void 0,l=!(!c||h);if(i=i&&e.childVM&&e.childVM.constructor===a)u=e.childVM,u.$loadingRouteData=l;else if(e.unbuild(!0),e.keepAlive&&e.childVM&&e.childView&&(e.childVM._keepAliveRouterView=e.childView),u=e.build({_meta:{$loadingRouteData:l},created:function(){this._routerView=e}}),e.keepAlive){u.$loadingRouteData=l;var p=u._keepAliveRouterView;p&&(e.childView=p,u._keepAliveRouterView=null)}var f=function(){u.$destroy()},d=function(){if(i)return void(n&&n());var r=t.router;r._rendered||r._transitionOnLoad?e.transition(u):(e.setCurrent?e.setCurrent(u):e.childVM=u,u.$before(e.anchor,null,!1)),n&&n()},m=function(){e.activated=!0,e.childView&&k(e.childView,t,r+1,null,i||e.keepAlive),c&&h?P(u,t,c,d,f):(c&&P(u,t,c),d())};s?t.callHooks(s,u,m,{cleanup:f}):m()}function L(e,t){var r=e.childVM,n=_(r,"data");n&&P(r,t,n)}function P(e,t,r,n,i){e.$loadingRouteData=!0,t.callHooks(r,e,function(t,r){Array.isArray(t)&&t._needMerge&&(t=t.reduce(function(e,t){return R(t)&&Object.keys(t).forEach(function(r){e[r]=t[r]}),e},Object.create(null)));var i=[];R(t)&&Object.keys(t).forEach(function(r){var n=t[r];w(n)?i.push(n.then(function(t){e.$set(r,t)})):e.$set(r,n)}),i.length?i[0].constructor.all(i).then(function(t){e.$loadingRouteData=!1,e.$emit("route-data-loaded",e),n&&n()},r):(e.$loadingRouteData=!1,e.$emit("route-data-loaded",e),n&&n())},{cleanup:i,expectData:!0})}function R(e){return"[object Object]"===Object.prototype.toString.call(e)}function D(e){return"[object Object]"===Object.prototype.toString.call(e)}function O(e){return e?Array.prototype.slice.call(e):[]}function V(e){var t=e.util,r=t.extend,n=t.isArray,i=t.defineReactive,o=e.prototype._init;e.prototype._init=function(e){e=e||{};var t=e._parent||e.parent||this,r=t.$router,n=t.$route;r&&(this.$router=r,r._children.push(this),this._defineMeta?this._defineMeta("$route",n):i(this,"$route",n)),o.call(this,e)};var a=e.prototype._destroy;e.prototype._destroy=function(){this._isBeingDestroyed||(this.$router&&this.$router._children.$remove(this),a.apply(this,arguments))};var s=e.config.optionMergeStrategies,c=/^(data|activate|deactivate)$/;s&&(s.route=function(e,t){if(!t)return e;if(!e)return t;var i={};r(i,e);for(var o in t){var a=i[o],s=t[o];a&&c.test(o)?i[o]=(n(a)?a:[a]).concat(s):i[o]=s}return i})}function F(e){var t=e.util,r=e.directive("_component")||e.internalDirectives.component,n=t.extend({},r);t.extend(n,{_isRouterView:!0,bind:function(){var e=this.vm.$route;if(!e)return void b("<router-view> can only be used inside a router-enabled app.");this._isDynamicLiteral=!0,r.bind.call(this);for(var t=void 0,n=this.vm;n;){if(n._routerView){t=n._routerView;break}n=n.$parent}if(t)this.parentView=t,t.childView=this;else{var i=e.router;i._rootView=this}var o=e.router._currentTransition;if(!t&&o.done||t&&t.activated){var a=t?t.depth+1:0;k(this,o,a)}},unbind:function(){this.parentView&&(this.parentView.childView=null),r.unbind.call(this)}}),e.elementDirective("router-view",n)}function U(e){function t(e){return e.protocol===location.protocol&&e.hostname===location.hostname&&e.port===location.port}var r=e.util,n=r.bind,i=r.isObject,o=r.addClass,a=r.removeClass;e.directive("link-active",{priority:1001,bind:function(){this.el.__v_link_active=!0}}),e.directive("link",{priority:1e3,bind:function(){var e=this.vm;if(!e.$route)return void b("v-link can only be used inside a router-enabled app.");if(this.router=e.$route.router,this.unwatch=e.$watch("$route",n(this.onRouteUpdate,this)),"A"!==this.el.tagName||"_blank"!==this.el.getAttribute("target")){this.el.addEventListener("click",n(this.onClick,this)),this.activeEl=this.el;for(var t=this.el.parentNode;t;){if(t.__v_link_active){this.activeEl=t;break}t=t.parentNode}}},update:function(e){this.target=e,i(e)&&(this.append=e.append,this.exact=e.exact,this.prevActiveClass=this.activeClass,this.activeClass=e.activeClass),this.onRouteUpdate(this.vm.$route)},onClick:function(e){if(!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||0!==e.button)){var r=this.target;if(r)e.preventDefault(),this.router.go(r);else{for(var n=e.target;"A"!==n.tagName&&n!==this.el;)n=n.parentNode;"A"===n.tagName&&t(n)&&(e.preventDefault(),this.router.go({path:n.pathname,replace:r&&r.replace,append:r&&r.append}))}}},onRouteUpdate:function(e){var t=this.router._stringifyPath(this.target);this.path!==t&&(this.path=t,this.updateActiveMatch(),this.updateHref()),this.updateClasses(e.path)},updateActiveMatch:function(){this.activeRE=this.path&&!this.exact?new RegExp("^"+this.path.replace(/\/$/,"").replace(re,"").replace(te,"\\$&")+"(\\/|$)"):null},updateHref:function(){if("A"===this.el.tagName){var e=this.path,t=this.router,r="/"===e.charAt(0),n=e&&("hash"===t.mode||r)?t.history.formatPath(e,this.append):e;n?this.el.href=n:this.el.removeAttribute("href")}},updateClasses:function(e){var t=this.activeEl,r=this.activeClass||this.router._linkActiveClass;this.prevActiveClass!==r&&a(t,this.prevActiveClass);var n=this.path.replace(re,"");e=e.replace(re,""),this.exact?n===e||"/"!==n.charAt(n.length-1)&&n===e.replace(ee,"")?o(t,r):a(t,r):this.activeRE&&this.activeRE.test(e)?o(t,r):a(t,r)},unbind:function(){this.el.removeEventListener("click",this.handler),this.unwatch&&this.unwatch()}})}function N(e,t){var r=t.component;ie.util.isPlainObject(r)&&(r=t.component=ie.extend(r)),"function"!=typeof r&&(t.component=null,b('invalid component for route "'+e+'".'))}var j={};j.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.prototype={to:function(e,t){var r=this.delegate;if(r&&r.willAddRoute&&(e=r.willAddRoute(this.matcher.target,e)),this.matcher.add(this.path,e),t){if(0===t.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,e,t,this.delegate)}return this}},t.prototype={add:function(e,t){this.routes[e]=t},addChild:function(e,n,i,o){var a=new t(n);this.children[e]=a;var s=r(e,a,o);o&&o.contextEntered&&o.contextEntered(n,s),i(s)}};var B=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],z=new RegExp("(\\"+B.join("|\\")+")","g");s.prototype={eachChar:function(e){for(var t,r=this.string,n=0,i=r.length;i>n;n++)t=r.charAt(n),e({validChars:t})},regex:function(){return this.string.replace(z,"\\$1")},generate:function(){return this.string}},c.prototype={eachChar:function(e){e({invalidChars:"/",repeat:!0})},regex:function(){return"([^/]+)"},generate:function(e){return e[this.name]||":"+this.name}},h.prototype={eachChar:function(e){e({invalidChars:"",repeat:!0})},regex:function(){return"(.+)"},generate:function(e){return e[this.name]||":"+this.name}},u.prototype={eachChar:function(){},regex:function(){return""},generate:function(){return""}},p.prototype={get:function(e){for(var t=this.nextStates,r=0,n=t.length;n>r;r++){var i=t[r],o=i.charSpec.validChars===e.validChars;if(o=o&&i.charSpec.invalidChars===e.invalidChars)return i}},put:function(e){var t;return(t=this.get(e))?t:(t=new p(e),this.nextStates.push(t),e.repeat&&t.nextStates.push(t),t)},match:function(e){for(var t,r,n,i=this.nextStates,o=[],a=0,s=i.length;s>a;a++)t=i[a],r=t.charSpec,"undefined"!=typeof(n=r.validChars)?-1!==n.indexOf(e)&&o.push(t):"undefined"!=typeof(n=r.invalidChars)&&-1===n.indexOf(e)&&o.push(t);return o}};var I=Object.create||function(e){function t(){}return t.prototype=e,new t};m.prototype=I({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null});var G=function(){this.rootState=new p,this.names={}};G.prototype={add:function(e,t){for(var r,n=this.rootState,i="^",o={},a=[],s=[],c=!0,h=0,p=e.length;p>h;h++){var f=e[h],d=[],m=l(f.path,d,o);s=s.concat(m);for(var v=0,y=m.length;y>v;v++){var b=m[v];b instanceof u||(c=!1,n=n.put({validChars:"/"}),i+="/",n=g(n,b),i+=b.regex())}var x={handler:f.handler,names:d};a.push(x)}c&&(n=n.put({validChars:"/"}),i+="/"),n.handlers=a,n.regex=new RegExp(i+"$"),n.specificity=o,(r=t&&t.as)&&(this.names[r]={segments:s,handlers:a})},handlersFor:function(e){var t=this.names[e],r=[];if(!t)throw new Error("There is no route named "+e);for(var n=0,i=t.handlers.length;i>n;n++)r.push(t.handlers[n]);return r},hasRoute:function(e){return!!this.names[e]},generate:function(e,t){var r=this.names[e],n="";if(!r)throw new Error("There is no route named "+e);for(var i=r.segments,o=0,a=i.length;a>o;o++){var s=i[o];s instanceof u||(n+="/",n+=s.generate(t))}return"/"!==n.charAt(0)&&(n="/"+n),t&&t.queryParams&&(n+=this.generateQueryString(t.queryParams)),n},generateQueryString:function(e){var t=[],r=[];for(var n in e)e.hasOwnProperty(n)&&r.push(n);r.sort();for(var i=0,o=r.length;o>i;i++){n=r[i];var s=e[n];if(null!=s){var c=encodeURIComponent(n);if(a(s))for(var h=0,u=s.length;u>h;h++){var l=n+"[]="+encodeURIComponent(s[h]);t.push(l)}else c+="="+encodeURIComponent(s),t.push(c)}}return 0===t.length?"":"?"+t.join("&")},parseQueryString:function(e){for(var t=e.split("&"),r={},n=0;n<t.length;n++){var i,o=t[n].split("="),a=y(o[0]),s=a.length,c=!1;1===o.length?i="true":(s>2&&"[]"===a.slice(s-2)&&(c=!0,a=a.slice(0,s-2),r[a]||(r[a]=[])),i=o[1]?y(o[1]):""),c?r[a].push(i):r[a]=i}return r},recognize:function(e){var t,r,n,i,o=[this.rootState],a={},s=!1;if(i=e.indexOf("?"),-1!==i){var c=e.substr(i+1,e.length);e=e.substr(0,i),a=this.parseQueryString(c)}for(e=decodeURI(e),"/"!==e.charAt(0)&&(e="/"+e),t=e.length,t>1&&"/"===e.charAt(t-1)&&(e=e.substr(0,t-1),s=!0),r=0,n=e.length;n>r&&(o=d(o,e.charAt(r)),o.length);r++);var h=[];for(r=0,n=o.length;n>r;r++)o[r].handlers&&h.push(o[r]);o=f(h);var u=h[0];return u&&u.handlers?(s&&"(.+)$"===u.regex.source.slice(-5)&&(e+="/"),v(u,e,a)):void 0}},G.prototype.map=o,G.VERSION="0.1.9";var H=G.prototype.generateQueryString,W={},X=void 0,$=/#.*$/,q=function(){function e(t){var r=t.root,n=t.onChange;j.classCallCheck(this,e),r?("/"!==r.charAt(0)&&(r="/"+r),
this.root=r.replace(/\/$/,""),this.rootRE=new RegExp("^\\"+this.root)):this.root=null,this.onChange=n;var i=document.querySelector("base");this.base=i&&i.getAttribute("href")}return e.prototype.start=function(){var e=this;this.listener=function(t){var r=decodeURI(location.pathname+location.search);e.root&&(r=r.replace(e.rootRE,"")),e.onChange(r,t&&t.state,location.hash)},window.addEventListener("popstate",this.listener),this.listener()},e.prototype.stop=function(){window.removeEventListener("popstate",this.listener)},e.prototype.go=function(e,t,r){var n=this.formatPath(e,r);t?history.replaceState({},"",n):(history.replaceState({pos:{x:window.pageXOffset,y:window.pageYOffset}},""),history.pushState({},"",n));var i=e.match($),o=i&&i[0];e=n.replace($,"").replace(this.rootRE,""),this.onChange(e,null,o)},e.prototype.formatPath=function(e,t){return"/"===e.charAt(0)?this.root?this.root+"/"+e.replace(/^\//,""):e:x(this.base||location.pathname,e,t)},e}(),Y=function(){function e(t){var r=t.hashbang,n=t.onChange;j.classCallCheck(this,e),this.hashbang=r,this.onChange=n}return e.prototype.start=function(){var e=this;this.listener=function(){var t=location.hash,r=t.replace(/^#!?/,"");"/"!==r.charAt(0)&&(r="/"+r);var n=e.formatPath(r);if(n!==t)return void location.replace(n);var i=location.search&&t.indexOf("?")>-1?"&"+location.search.slice(1):location.search;e.onChange(decodeURI(t.replace(/^#!?/,"")+i))},window.addEventListener("hashchange",this.listener),this.listener()},e.prototype.stop=function(){window.removeEventListener("hashchange",this.listener)},e.prototype.go=function(e,t,r){e=this.formatPath(e,r),t?location.replace(e):location.hash=e},e.prototype.formatPath=function(e,t){var r="/"===e.charAt(0),n="#"+(this.hashbang?"!":"");return r?n+e:n+x(location.hash.replace(/^#!?/,""),e,t)},e}(),K=function(){function e(t){var r=t.onChange;j.classCallCheck(this,e),this.onChange=r,this.currentPath="/"}return e.prototype.start=function(){this.onChange("/")},e.prototype.stop=function(){},e.prototype.go=function(e,t,r){e=this.currentPath=this.formatPath(e,r),this.onChange(e)},e.prototype.formatPath=function(e,t){return"/"===e.charAt(0)?e:x(this.currentPath,e,t)},e}(),Q=function(){function e(t,r,n){j.classCallCheck(this,e),this.router=t,this.to=r,this.from=n,this.next=null,this.aborted=!1,this.done=!1}return e.prototype.abort=function(){if(!this.aborted){this.aborted=!0;var e=!this.from.path&&"/"===this.to.path;e||this.router.replace(this.from.path||"/")}},e.prototype.redirect=function(e){this.aborted||(this.aborted=!0,"string"==typeof e?e=M(e,this.to.params,this.to.query):(e.params=e.params||this.to.params,e.query=e.query||this.to.query),this.router.replace(e))},e.prototype.start=function(e){for(var t=this,r=[],n=this.router._rootView;n;)r.unshift(n),n=n.childView;var i=r.slice().reverse(),o=this.activateQueue=O(this.to.matched).map(function(e){return e.handler}),a=void 0,s=void 0;for(a=0;a<i.length&&T(i[a],o[a],t);a++);a>0&&(s=i.slice(0,a),r=i.slice(a).reverse(),o=o.slice(a)),t.runQueue(r,E,function(){t.runQueue(o,C,function(){t.runQueue(r,A,function(){if(t.router._onTransitionValidated(t),s&&s.forEach(function(e){return L(e,t)}),r.length){var n=r[r.length-1],i=s?s.length:0;k(n,t,i,e)}else e()})})})},e.prototype.runQueue=function(e,t,r){function n(o){o>=e.length?r():t(e[o],i,function(){n(o+1)})}var i=this;n(0)},e.prototype.callHook=function(e,t,r){var n=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],i=n.expectBoolean,o=void 0===i?!1:i,a=n.expectData,s=void 0===a?!1:a,c=n.cleanup,h=this,u=!1,l=function(){c&&c(),h.abort()},p=function(e){if(c?f():l(),e&&!h.router._suppress)throw b("Uncaught error during transition: "),e instanceof Error?e:new Error(e)},f=function(e){return u?void b("transition.next() should be called only once."):(u=!0,h.aborted?void(c&&c()):void(r&&r(e,p)))},d={to:h.to,from:h.from,abort:l,next:f,redirect:function(){h.redirect.apply(h,arguments)}},m=void 0;try{m=e.call(t,d)}catch(v){return p(v)}var g=w(m);o?"boolean"==typeof m?m?f():l():g?m.then(function(e){e?f():l()},p):e.length||f(m):g?m.then(f,p):(s&&D(m)||!e.length)&&f(m)},e.prototype.callHooks=function(e,t,r,n){var i=this;Array.isArray(e)?!function(){var o=[];o._needMerge=!0;var a=void 0;i.runQueue(e,function(e,r,a){i.aborted||i.callHook(e,t,function(e,t){e&&o.push(e),t=t,a()},n)},function(){r(o,a)})}():this.callHook(e,t,r,n)},e}(),Z=/^(component|subRoutes)$/,J=function ae(e,t){var r=this;j.classCallCheck(this,ae);var n=t._recognizer.recognize(e);n&&([].forEach.call(n,function(e){for(var t in e.handler)Z.test(t)||(r[t]=e.handler[t])}),this.query=n.queryParams,this.params=[].reduce.call(n,function(e,t){if(t.params)for(var r in t.params)e[r]=t.params[r];return e},{})),this.path=e,this.router=t,this.matched=n||t._notFoundHandler,Object.freeze(this)},ee=/\/$/,te=/[-.*+?^${}()|[\]\/\\]/g,re=/\?.*$/,ne={"abstract":K,hash:Y,html5:q},ie=void 0,oe=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=t.hashbang,n=void 0===r?!0:r,i=t["abstract"],o=void 0===i?!1:i,a=t.history,s=void 0===a?!1:a,c=t.saveScrollPosition,h=void 0===c?!1:c,u=t.transitionOnLoad,l=void 0===u?!1:u,p=t.suppressTransitionError,f=void 0===p?!1:p,d=t.root,m=void 0===d?null:d,v=t.linkActiveClass,g=void 0===v?"v-link-active":v;if(j.classCallCheck(this,e),!e.installed)throw new Error("Please install the Router with Vue.use() before creating an instance.");this.app=null,this._children=[],this._recognizer=new G,this._guardRecognizer=new G,this._started=!1,this._startCb=null,this._currentRoute={},this._currentTransition=null,this._previousTransition=null,this._notFoundHandler=null,this._notFoundRedirect=null,this._beforeEachHooks=[],this._afterEachHooks=[],this._hasPushState="undefined"!=typeof window&&window.history&&window.history.pushState,this._rendered=!1,this._transitionOnLoad=l,this._abstract=o,this._hashbang=n,this._history=this._hasPushState&&s,this._saveScrollPosition=h,this._linkActiveClass=g,this._suppress=f;var y=ie.util.inBrowser;this.mode=!y||this._abstract?"abstract":this._history?"html5":"hash";var b=ne[this.mode],x=this;this.history=new b({root:m,hashbang:this._hashbang,onChange:function(e,t,r){x._match(e,t,r)}})}return e.prototype.map=function(e){for(var t in e)this.on(t,e[t]);return this},e.prototype.on=function(e,t){return"*"===e?this._notFound(t):this._addRoute(e,t,[]),this},e.prototype.redirect=function(e){for(var t in e)this._addRedirect(t,e[t]);return this},e.prototype.alias=function(e){for(var t in e)this._addAlias(t,e[t]);return this},e.prototype.beforeEach=function(e){return this._beforeEachHooks.push(e),this},e.prototype.afterEach=function(e){return this._afterEachHooks.push(e),this},e.prototype.go=function(e){var t=!1,r=!1;ie.util.isObject(e)&&(t=e.replace,r=e.append),e=this._stringifyPath(e),e&&this.history.go(e,t,r)},e.prototype.replace=function(e){"string"==typeof e&&(e={path:e}),e.replace=!0,this.go(e)},e.prototype.start=function(e,t,r){if(this._started)return void b("already started.");if(this._started=!0,this._startCb=r,!this.app){if(!e||!t)throw new Error("Must start vue-router with a component and a root container.");if(e instanceof ie)throw new Error("Must start vue-router with a component, not a Vue instance.");this._appContainer=t;var n=this._appConstructor="function"==typeof e?e:ie.extend(e);n.options.name=n.options.name||"RouterApp"}this.history.start()},e.prototype.stop=function(){this.history.stop(),this._started=!1},e.prototype._addRoute=function(e,t,r){if(N(e,t),t.path=e,t.fullPath=(r.reduce(function(e,t){return e+t.path},"")+e).replace("//","/"),r.push({path:e,handler:t}),this._recognizer.add(r,{as:t.name}),t.subRoutes)for(var n in t.subRoutes)this._addRoute(n,t.subRoutes[n],r.slice())},e.prototype._notFound=function(e){N("*",e),this._notFoundHandler=[{handler:e}]},e.prototype._addRedirect=function(e,t){"*"===e?this._notFoundRedirect=t:this._addGuard(e,t,this.replace)},e.prototype._addAlias=function(e,t){this._addGuard(e,t,this._match)},e.prototype._addGuard=function(e,t,r){var n=this;this._guardRecognizer.add([{path:e,handler:function(e,i){var o=M(t,e.params,i);r.call(n,o)}}])},e.prototype._checkGuard=function(e){var t=this._guardRecognizer.recognize(e);return t?(t[0].handler(t[0],t.queryParams),!0):this._notFoundRedirect&&(t=this._recognizer.recognize(e),!t)?(this.replace(this._notFoundRedirect),!0):void 0},e.prototype._match=function(e,t,r){var n=this;if(!this._checkGuard(e)){var i=this._currentRoute,o=this._currentTransition;if(o){if(o.to.path===e)return;if(i.path===e)return o.aborted=!0,void(this._currentTransition=this._prevTransition);o.aborted=!0}var a=new J(e,this),s=new Q(this,a,i);this._prevTransition=o,this._currentTransition=s,this.app||!function(){var e=n;n.app=new n._appConstructor({el:n._appContainer,created:function(){this.$router=e},_meta:{$route:a}})}();var c=this._beforeEachHooks,h=function(){s.start(function(){n._postTransition(a,t,r)})};c.length?s.runQueue(c,function(e,t,r){s===n._currentTransition&&s.callHook(e,null,r,{expectBoolean:!0})},h):h(),!this._rendered&&this._startCb&&this._startCb.call(null),this._rendered=!0}},e.prototype._onTransitionValidated=function(e){var t=this._currentRoute=e.to;this.app.$route!==t&&(this.app.$route=t,this._children.forEach(function(e){e.$route=t})),this._afterEachHooks.length&&this._afterEachHooks.forEach(function(t){return t.call(null,{to:e.to,from:e.from})}),this._currentTransition.done=!0},e.prototype._postTransition=function(e,t,r){var n=t&&t.pos;n&&this._saveScrollPosition?ie.nextTick(function(){window.scrollTo(n.x,n.y)}):r&&ie.nextTick(function(){var e=document.getElementById(r.slice(1));e&&window.scrollTo(window.scrollX,e.offsetTop)})},e.prototype._stringifyPath=function(e){if(e&&"object"==typeof e){if(e.name){var t=ie.util.extend,r=this._currentTransition&&this._currentTransition.to.params,n=e.params||{},i=r?t(t({},r),n):n;return e.query&&(i.queryParams=e.query),this._recognizer.generate(e.name,i)}if(e.path){var o=e.path;if(e.query){var a=this._recognizer.generateQueryString(e.query);o+=o.indexOf("?")>-1?"&"+a.slice(1):a}return o}return""}return e?e+"":""},e}();return oe.installed=!1,oe.install=function(e){return oe.installed?void b("already installed."):(ie=e,V(ie),F(ie),U(ie),W.Vue=ie,void(oe.installed=!0))},"undefined"!=typeof window&&window.Vue&&window.Vue.use(oe),oe})},{}],38:[function(e,t,r){"use strict";function n(e,t,r){if(o(e,t))return void(e[t]=r);if(e._isVue)return void n(e._data,t,r);var i=e.__ob__;if(!i)return void(e[t]=r);if(i.convert(t,r),i.dep.notify(),i.vms)for(var a=i.vms.length;a--;){var s=i.vms[a];s._proxy(t),s._digest()}return r}function i(e,t){if(o(e,t)){delete e[t];var r=e.__ob__;if(r&&(r.dep.notify(),r.vms))for(var n=r.vms.length;n--;){var i=r.vms[n];i._unproxy(t),i._digest()}}}function o(e,t){return yr.call(e,t)}function a(e){return br.test(e)}function s(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function c(e){return null==e?"":e.toString()}function h(e){if("string"!=typeof e)return e;var t=Number(e);return isNaN(t)?e:t}function u(e){return"true"===e?!0:"false"===e?!1:e}function l(e){var t=e.charCodeAt(0),r=e.charCodeAt(e.length-1);return t!==r||34!==t&&39!==t?e:e.slice(1,-1)}function p(e){return e.replace(xr,f)}function f(e,t){return t?t.toUpperCase():""}function d(e){return e.replace(wr,"$1-$2").toLowerCase()}function m(e){return e.replace(_r,f)}function v(e,t){return function(r){var n=arguments.length;return n?n>1?e.apply(t,arguments):e.call(t,r):e.call(t)}}function g(e,t){t=t||0;for(var r=e.length-t,n=new Array(r);r--;)n[r]=e[r+t];return n}function y(e,t){for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function b(e){return null!==e&&"object"==typeof e}function x(e){return Sr.call(e)===Mr}function w(e,t,r,n){Object.defineProperty(e,t,{value:r,enumerable:!!n,writable:!0,configurable:!0})}function _(e,t){var r,n,i,o,a,s=function c(){var s=Date.now()-o;t>s&&s>=0?r=setTimeout(c,t-s):(r=null,a=e.apply(i,n),r||(i=n=null))};return function(){return i=this,n=arguments,o=Date.now(),r||(r=setTimeout(s,t)),a}}function S(e,t){for(var r=e.length;r--;)if(e[r]===t)return r;return-1}function M(e){var t=function r(){return r.cancelled?void 0:e.apply(this,arguments)};return t.cancel=function(){t.cancelled=!0},t}function T(e,t){return e==t||(b(e)&&b(t)?JSON.stringify(e)===JSON.stringify(t):!1)}function E(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap=Object.create(null)}function C(){var e,t=Nr.slice(Hr,Ir).trim();if(t){e={};var r=t.match(Qr);e.name=r[0],r.length>1&&(e.args=r.slice(1).map(A))}e&&(jr.filters=jr.filters||[]).push(e),Hr=Ir+1}function A(e){if(Zr.test(e))return{value:h(e),dynamic:!1};var t=l(e),r=t===e;return{value:r?e:t,dynamic:r}}function k(e){var t=Kr.get(e);if(t)return t;for(Nr=e,Wr=Xr=!1,$r=qr=Yr=0,Hr=0,jr={},Ir=0,Gr=Nr.length;Gr>Ir;Ir++)if(zr=Br,Br=Nr.charCodeAt(Ir),Wr)39===Br&&92!==zr&&(Wr=!Wr);else if(Xr)34===Br&&92!==zr&&(Xr=!Xr);else if(124===Br&&124!==Nr.charCodeAt(Ir+1)&&124!==Nr.charCodeAt(Ir-1))null==jr.expression?(Hr=Ir+1,jr.expression=Nr.slice(0,Ir).trim()):C();else switch(Br){case 34:Xr=!0;break;case 39:Wr=!0;break;case 40:Yr++;break;case 41:Yr--;break;case 91:qr++;break;case 93:qr--;break;case 123:$r++;break;case 125:$r--}return null==jr.expression?jr.expression=Nr.slice(0,Ir).trim():0!==Hr&&C(),Kr.put(e,jr),jr}function L(e){return e.replace(en,"\\$&")}function P(){var e=L(hn.delimiters[0]),t=L(hn.delimiters[1]),r=L(hn.unsafeDelimiters[0]),n=L(hn.unsafeDelimiters[1]);rn=new RegExp(r+"(.+?)"+n+"|"+e+"(.+?)"+t,"g"),nn=new RegExp("^"+r+".*"+n+"$"),tn=new E(1e3)}function R(e){tn||P();var t=tn.get(e);if(t)return t;if(e=e.replace(/\n/g,""),!rn.test(e))return null;for(var r,n,i,o,a,s,c=[],h=rn.lastIndex=0;r=rn.exec(e);)n=r.index,n>h&&c.push({value:e.slice(h,n)}),i=nn.test(r[0]),o=i?r[1]:r[2],a=o.charCodeAt(0),s=42===a,o=s?o.slice(1):o,c.push({tag:!0,value:o.trim(),html:i,oneTime:s}),h=n+r[0].length;return h<e.length&&c.push({value:e.slice(h)}),tn.put(e,c),c}function D(e,t){return e.length>1?e.map(function(e){return O(e,t)}).join("+"):O(e[0],t,!0)}function O(e,t,r){return e.tag?e.oneTime&&t?'"'+t.$eval(e.value)+'"':V(e.value,r):'"'+e.value+'"'}function V(e,t){if(on.test(e)){var r=k(e);return r.filters?"this._applyFilters("+r.expression+",null,"+JSON.stringify(r.filters)+",false)":"("+e+")"}return t?e:"("+e+")"}function F(e,t,r,n){j(e,1,function(){t.appendChild(e)},r,n)}function U(e,t,r,n){j(e,1,function(){W(e,t)},r,n)}function N(e,t,r){j(e,-1,function(){$(e)},t,r)}function j(e,t,r,n,i){var o=e.__v_trans;if(!o||!o.hooks&&!Pr||!n._isCompiled||n.$parent&&!n.$parent._isCompiled)return r(),void(i&&i());var a=t>0?"enter":"leave";o[a](r,i)}function B(e){if("string"==typeof e){e=document.querySelector(e)}return e}function z(e){var t=document.documentElement,r=e&&e.parentNode;return t===e||t===r||!(!r||1!==r.nodeType||!t.contains(r))}function I(e,t){var r=e.getAttribute(t);return null!==r&&e.removeAttribute(t),r}function G(e,t){var r=I(e,":"+t);return null===r&&(r=I(e,"v-bind:"+t)),r}function H(e,t){return e.hasAttribute(t)||e.hasAttribute(":"+t)||e.hasAttribute("v-bind:"+t)}function W(e,t){t.parentNode.insertBefore(e,t)}function X(e,t){t.nextSibling?W(e,t.nextSibling):t.parentNode.appendChild(e)}function $(e){e.parentNode.removeChild(e)}function q(e,t){t.firstChild?W(e,t.firstChild):t.appendChild(e)}function Y(e,t){var r=e.parentNode;r&&r.replaceChild(t,e)}function K(e,t,r){e.addEventListener(t,r)}function Q(e,t,r){e.removeEventListener(t,r)}function Z(e,t){!Ar||e instanceof SVGElement?e.setAttribute("class",t):e.className=t}function J(e,t){if(e.classList)e.classList.add(t);else{var r=" "+(e.getAttribute("class")||"")+" ";r.indexOf(" "+t+" ")<0&&Z(e,(r+t).trim())}}function ee(e,t){if(e.classList)e.classList.remove(t);else{for(var r=" "+(e.getAttribute("class")||"")+" ",n=" "+t+" ";r.indexOf(n)>=0;)r=r.replace(n," ");Z(e,r.trim())}e.className||e.removeAttribute("class")}function te(e,t){var r,n;if(ie(e)&&e.content instanceof DocumentFragment&&(e=e.content),e.hasChildNodes())for(re(e),n=t?document.createDocumentFragment():document.createElement("div");r=e.firstChild;)n.appendChild(r);return n}function re(e){ne(e,e.firstChild),ne(e,e.lastChild)}function ne(e,t){t&&3===t.nodeType&&!t.data.trim()&&e.removeChild(t)}function ie(e){return e.tagName&&"template"===e.tagName.toLowerCase()}function oe(e,t){var r=hn.debug?document.createComment(e):document.createTextNode(t?" ":"");return r.__vue_anchor=!0,r}function ae(e){if(e.hasAttributes())for(var t=e.attributes,r=0,n=t.length;n>r;r++){var i=t[r].name;if(ln.test(i))return p(i.replace(ln,""))}}function se(e,t,r){for(var n;e!==t;)n=e.nextSibling,r(e),e=n;r(t)}function ce(e,t,r,n,i){function o(){if(s++,a&&s>=c.length){for(var e=0;e<c.length;e++)n.appendChild(c[e]);i&&i()}}var a=!1,s=0,c=[];se(e,t,function(e){e===t&&(a=!0),c.push(e),N(e,r,o)})}function he(e,t){var r=e.tagName.toLowerCase(),n=e.hasAttributes();if(pn.test(r)||fn.test(r)){if(n)return ue(e)}else{if(xe(t,"components",r))return{id:r};var i=n&&ue(e);if(i)return i}}function ue(e){var t=I(e,"is");return null!=t?{id:t}:(t=G(e,"is"),null!=t?{id:t,dynamic:!0}:void 0)}function le(e,t,r){var n=t.path;r=fe(t,r),e[n]=e._data[n]=pe(t,r)?r:void 0}function pe(e,t){if(null===e.raw&&!e.required)return!0;var r,n=e.options,i=n.type,o=!0;if(i&&(i===String?(r="string",o=typeof t===r):i===Number?(r="number",o="number"==typeof t):i===Boolean?(r="boolean",o="boolean"==typeof t):i===Function?(r="function",o="function"==typeof t):i===Object?(r="object",o=x(t)):i===Array?(r="array",o=Tr(t)):o=t instanceof i),!o)return!1;var a=n.validator;return a&&!a.call(null,t)?!1:!0}function fe(e,t){var r=e.options.coerce;return r?r(t):t}function de(e,t){var r,i,a;for(r in t)i=e[r],a=t[r],o(e,r)?b(i)&&b(a)&&de(i,a):n(e,r,a);return e}function me(e,t){var r=Object.create(e);return t?y(r,ye(t)):r}function ve(e){if(e.components)for(var t,r=e.components=ye(e.components),n=Object.keys(r),i=0,o=n.length;o>i;i++){var a=n[i];pn.test(a)||fn.test(a)||(t=r[a],x(t)&&(r[a]=pr.extend(t)))}}function ge(e){var t,r,n=e.props;if(Tr(n))for(e.props={},t=n.length;t--;)r=n[t],"string"==typeof r?e.props[r]=null:r.name&&(e.props[r.name]=r);else if(x(n)){var i=Object.keys(n);for(t=i.length;t--;)r=n[i[t]],"function"==typeof r&&(n[i[t]]={type:r})}}function ye(e){if(Tr(e)){for(var t,r={},n=e.length;n--;){t=e[n];var i="function"==typeof t?t.options&&t.options.name||t.id:t.name||t.id;i&&(r[i]=t)}return r}return e}function be(e,t,r){function n(n){var i=dn[n]||mn;a[n]=i(e[n],t[n],r,n)}ve(t),ge(t);var i,a={};if(t.mixins)for(var s=0,c=t.mixins.length;c>s;s++)e=be(e,t.mixins[s],r);for(i in e)n(i);for(i in t)o(e,i)||n(i);return a}function xe(e,t,r){var n,i=e[t];return i[r]||i[n=p(r)]||i[n.charAt(0).toUpperCase()+n.slice(1)]}function we(e,t,r){}function _e(){this.id=yn++,this.subs=[]}function Se(e){if(this.value=e,this.dep=new _e,w(e,"__ob__",this),Tr(e)){var t=Er?Me:Te;t(e,gn,bn),this.observeArray(e)}else this.walk(e)}function Me(e,t){e.__proto__=t}function Te(e,t,r){for(var n=0,i=r.length;i>n;n++){var o=r[n];w(e,o,t[o])}}function Ee(e,t){if(e&&"object"==typeof e){var r;return o(e,"__ob__")&&e.__ob__ instanceof Se?r=e.__ob__:(Tr(e)||x(e))&&Object.isExtensible(e)&&!e._isVue&&(r=new Se(e)),r&&t&&r.addVm(t),r}}function Ce(e,t,r){var n,i,o=new _e;if(hn.convertAllProperties){var a=Object.getOwnPropertyDescriptor(e,t);if(a&&a.configurable===!1)return;n=a&&a.get,i=a&&a.set}var s=Ee(r);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=n?n.call(e):r;if(_e.target&&(o.depend(),s&&s.dep.depend(),Tr(t)))for(var i,a=0,c=t.length;c>a;a++)i=t[a],i&&i.__ob__&&i.__ob__.dep.depend();return t},set:function(t){var a=n?n.call(e):r;t!==a&&(i?i.call(e,t):r=t,s=Ee(t),o.notify())}})}function Ae(e){e.prototype._init=function(e){e=e||{},this.$el=null,this.$parent=e.parent,this.$root=this.$parent?this.$parent.$root:this,this.$children=[],this.$refs={},this.$els={},this._watchers=[],this._directives=[],this._uid=wn++,this._isVue=!0,this._events={},this._eventsCount={},this._isFragment=!1,this._fragment=this._fragmentStart=this._fragmentEnd=null,this._isCompiled=this._isDestroyed=this._isReady=this._isAttached=this._isBeingDestroyed=!1,this._unlinkFn=null,this._context=e._context||this.$parent,this._scope=e._scope,this._frag=e._frag,this._frag&&this._frag.children.push(this),this.$parent&&this.$parent.$children.push(this),e=this.$options=be(this.constructor.options,e,this),this._updateRef(),this._data={},this._callHook("init"),this._initState(),this._initEvents(),this._callHook("created"),e.el&&this.$mount(e.el)}}function ke(e){if(void 0===e)return"eof";var t=e.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:case 48:return e;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return t>=97&&122>=t||t>=65&&90>=t?"ident":t>=49&&57>=t?"number":"else"}function Le(e){var t=e.trim();return"0"===e.charAt(0)&&isNaN(e)?!1:a(t)?l(t):"*"+t}function Pe(e){function t(){var t=e[u+1];return l===Rn&&"'"===t||l===Dn&&'"'===t?(u++,n="\\"+t,f[Sn](),!0):void 0}var r,n,i,o,a,s,c,h=[],u=-1,l=Cn,p=0,f=[];for(f[Mn]=function(){void 0!==i&&(h.push(i),i=void 0)},f[Sn]=function(){void 0===i?i=n:i+=n},f[Tn]=function(){f[Sn](),p++},f[En]=function(){if(p>0)p--,l=Pn,f[Sn]();else{if(p=0,i=Le(i),i===!1)return!1;f[Mn]()}};null!=l;)if(u++,r=e[u],"\\"!==r||!t()){if(o=ke(r),c=Fn[l],a=c[o]||c["else"]||Vn,a===Vn)return;if(l=a[0],s=f[a[1]],s&&(n=a[2],n=void 0===n?r:n,s()===!1))return;if(l===On)return h.raw=e,h}}function Re(e){var t=_n.get(e);return t||(t=Pe(e),t&&_n.put(e,t)),t}function De(e,t){return ze(t).get(e)}function Oe(e,t,r){var i=e;if("string"==typeof t&&(t=Pe(t)),!t||!b(e))return!1;for(var o,a,s=0,c=t.length;c>s;s++)o=e,a=t[s],"*"===a.charAt(0)&&(a=ze(a.slice(1)).get.call(i,i)),c-1>s?(e=e[a],b(e)||(e={},n(o,a,e))):Tr(e)?e.$set(a,r):a in e?e[a]=r:n(e,a,r);return!0}function Ve(e,t){var r=Kn.length;return Kn[r]=t?e.replace(Hn,"\\n"):e,'"'+r+'"'}function Fe(e){var t=e.charAt(0),r=e.slice(1);return Bn.test(r)?e:(r=r.indexOf('"')>-1?r.replace(Xn,Ue):r,t+"scope."+r)}function Ue(e,t){return Kn[t]}function Ne(e){In.test(e),Kn.length=0;var t=e.replace(Wn,Ve).replace(Gn,"");return t=(" "+t).replace(qn,Fe).replace(Xn,Ue),je(t)}function je(e){try{return new Function("scope","return "+e+";")}catch(t){}}function Be(e){var t=Re(e);return t?function(e,r){Oe(e,t,r)}:void 0}function ze(e,t){e=e.trim();var r=Nn.get(e);if(r)return t&&!r.set&&(r.set=Be(r.exp)),r;var n={exp:e};return n.get=Ie(e)&&e.indexOf("[")<0?je("scope."+e):Ne(e),t&&(n.set=Be(e)),Nn.put(e,n),n}function Ie(e){return $n.test(e)&&!Yn.test(e)&&"Math."!==e.slice(0,5)}function Ge(){Zn=[],Jn=[],ei={},ti={},ri=ni=!1}function He(){We(Zn),ni=!0,We(Jn),Ge()}function We(e){for(var t=0;t<e.length;t++){var r=e[t],n=r.id;ei[n]=null,r.run()}}function Xe(e){var t=e.id;if(null==ei[t]){if(ni&&!e.user)return void e.run();var r=e.user?Jn:Zn;ei[t]=r.length,r.push(e),ri||(ri=!0,Fr(He))}}function $e(e,t,r,n){n&&y(this,n);var i="function"==typeof t;if(this.vm=e,e._watchers.push(this),this.expression=i?t.toString():t,this.cb=r,this.id=++ii,this.active=!0,this.dirty=this.lazy,this.deps=Object.create(null),this.newDeps=null,this.prevError=null,i)this.getter=t,this.setter=void 0;else{var o=ze(t,this.twoWay);this.getter=o.get,this.setter=o.set}this.value=this.lazy?void 0:this.get(),this.queued=this.shallow=!1}function qe(e){var t,r;if(Tr(e))for(t=e.length;t--;)qe(e[t]);else if(b(e))for(r=Object.keys(e),t=r.length;t--;)qe(e[r[t]])}function Ye(e){if(wi[e])return wi[e];var t=Ke(e);return wi[e]=wi[t]=t,t}function Ke(e){e=d(e);var t=p(e),r=t.charAt(0).toUpperCase()+t.slice(1);if(_i||(_i=document.createElement("div")),t in _i.style)return e;for(var n,i=yi.length;i--;)if(n=bi[i]+r,n in _i.style)return yi[i]+e}function Qe(e,t){var r=t.map(function(e){var t=e.charCodeAt(0);return t>47&&58>t?parseInt(e,10):1===e.length&&(t=e.toUpperCase().charCodeAt(0),t>64&&91>t)?t:Li[e]});return function(t){return r.indexOf(t.keyCode)>-1?e.call(this,t):void 0}}function Ze(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function Je(e){return function(t){return t.preventDefault(),e.call(this,t)}}function et(e,t,r){for(var n,i,o,a=t?[]:null,s=0,c=e.options.length;c>s;s++)if(n=e.options[s],o=r?n.hasAttribute("selected"):n.selected){if(i=n.hasOwnProperty("_value")?n._value:n.value,!t)return i;a.push(i)}return a}function tt(e,t){for(var r=e.length;r--;)if(T(e[r],t))return r;return-1}function rt(e){return ie(e)&&e.content instanceof DocumentFragment}function nt(e,t){var r=ji.get(e);if(r)return r;var n=document.createDocumentFragment(),i=e.match(Ii),o=Gi.test(e);if(i||o){var a=i&&i[1],s=zi[a]||zi.efault,c=s[0],h=s[1],u=s[2],l=document.createElement("div"),p=t?e:e.trim();for(l.innerHTML=h+p+u;c--;)l=l.lastChild;for(var f;f=l.firstChild;)n.appendChild(f)}else n.appendChild(document.createTextNode(e));return ji.put(e,n),n}function it(e){if(rt(e))return re(e.content),e.content;if("SCRIPT"===e.tagName)return nt(e.textContent);for(var t,r=ot(e),n=document.createDocumentFragment();t=r.firstChild;)n.appendChild(t);return re(n),n}function ot(e){if(!e.querySelectorAll)return e.cloneNode();var t,r,n,i=e.cloneNode(!0);if(Hi){var o=i;if(rt(e)&&(e=e.content,o=i.content),r=e.querySelectorAll("template"),r.length)for(n=o.querySelectorAll("template"),t=n.length;t--;)n[t].parentNode.replaceChild(ot(r[t]),n[t])}if(Wi)if("TEXTAREA"===e.tagName)i.value=e.value;else if(r=e.querySelectorAll("textarea"),r.length)for(n=i.querySelectorAll("textarea"),t=n.length;t--;)n[t].value=r[t].value;return i}function at(e,t,r){var n,i;return e instanceof DocumentFragment?(re(e),t?ot(e):e):("string"==typeof e?r||"#"!==e.charAt(0)?i=nt(e,r):(i=Bi.get(e),i||(n=document.getElementById(e.slice(1)),n&&(i=it(n),Bi.put(e,i)))):e.nodeType&&(i=it(e)),i&&t?ot(i):i)}function st(e,t,r,n,i,o){this.children=[],this.childFrags=[],this.vm=t,this.scope=i,this.inserted=!1,this.parentFrag=o,o&&o.childFrags.push(this),this.unlink=e(t,r,n,i,this);var a=this.single=1===r.childNodes.length&&!r.childNodes[0].__vue_anchor;a?(this.node=r.childNodes[0],this.before=ct,this.remove=ht):(this.node=oe("fragment-start"),this.end=oe("fragment-end"),this.frag=r,q(this.node,r),r.appendChild(this.end),this.before=ut,this.remove=lt),this.node.__vfrag__=this}function ct(e,t){this.inserted=!0;var r=t!==!1?U:W;r(this.node,e,this.vm),z(this.node)&&this.callHook(pt)}function ht(){this.inserted=!1;var e=z(this.node),t=this;this.beforeRemove(),N(this.node,this.vm,function(){e&&t.callHook(ft),t.destroy()})}function ut(e,t){this.inserted=!0;var r=this.vm,n=t!==!1?U:W;se(this.node,this.end,function(t){n(t,e,r)}),z(this.node)&&this.callHook(pt)}function lt(){this.inserted=!1;var e=this,t=z(this.node);this.beforeRemove(),ce(this.node,this.end,this.vm,this.frag,function(){t&&e.callHook(ft),e.destroy()})}function pt(e){e._isAttached||e._callHook("attached")}function ft(e){e._isAttached&&e._callHook("detached")}function dt(e,t){this.vm=e;var r,n="string"==typeof t;n||ie(t)?r=at(t,!0):(r=document.createDocumentFragment(),r.appendChild(t)),this.template=r;var i,o=e.constructor.cid;if(o>0){var a=o+(n?t:t.outerHTML);i=$i.get(a),i||(i=Ct(r,e.$options,!0),$i.put(a,i))}else i=Ct(r,e.$options,!0);this.linker=i}function mt(e,t,r){var n=e.node.previousSibling;if(n){for(e=n.__vfrag__;!(e&&e.forId===r&&e.inserted||n===t);){if(n=n.previousSibling,!n)return;e=n.__vfrag__}return e}}function vt(e){var t=e.node;if(e.end)for(;!t.__vue__&&t!==e.end&&t.nextSibling;)t=t.nextSibling;return t.__vue__}function gt(e){for(var t=-1,r=new Array(e);++t<e;)r[t]=t;return r}function yt(e){eo.push(e),to||(to=!0,Fr(bt))}function bt(){for(var e=document.documentElement.offsetHeight,t=0;t<eo.length;t++)eo[t]();return eo=[],to=!1,e}function xt(e,t,r,n){this.id=t,this.el=e,this.enterClass=r&&r.enterClass||t+"-enter",this.leaveClass=r&&r.leaveClass||t+"-leave",this.hooks=r,this.vm=n,this.pendingCssEvent=this.pendingCssCb=this.cancel=this.pendingJsCb=this.op=this.cb=null,this.justEntered=!1,this.entered=this.left=!1,this.typeCache={},this.type=r&&r.type;var i=this;["enterNextTick","enterDone","leaveNextTick","leaveDone"].forEach(function(e){i[e]=v(i[e],i)})}function wt(e){return!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function _t(e){for(var t={},r=e.trim().split(/\s+/),n=r.length;n--;)t[r[n]]=!0;return t}function St(e,t){return Tr(e)?e.indexOf(t)>-1:o(e,t)}function Mt(e,t){for(var r,n,i,o,s,c,h,u=[],l=Object.keys(t),f=l.length;f--;)n=l[f],r=t[n]||mo,s=p(n),vo.test(s)&&(h={name:n,path:s,options:r,mode:fo.ONE_WAY,raw:null},i=d(n),null===(o=G(e,i))&&(null!==(o=G(e,i+".sync"))?h.mode=fo.TWO_WAY:null!==(o=G(e,i+".once"))&&(h.mode=fo.ONE_TIME)),null!==o?(h.raw=o,c=k(o),o=c.expression,h.filters=c.filters,a(o)&&!c.filters?h.optimizedLiteral=!0:h.dynamic=!0,h.parentPath=o):null!==(o=I(e,i))?h.raw=o:r.required,u.push(h));return Tt(u)}function Tt(e){return function(t,r){t._props={};for(var n,i,o,a,s,c=e.length;c--;)if(n=e[c],s=n.raw,i=n.path,o=n.options,t._props[i]=n,null===s)le(t,n,Et(t,o));else if(n.dynamic)t._context&&(n.mode===fo.ONE_TIME?(a=(r||t._context).$get(n.parentPath),le(t,n,a)):t._bindDir({name:"prop",def:ho,prop:n},null,null,r));else if(n.optimizedLiteral){var p=l(s);a=p===s?u(h(s)):p,le(t,n,a)}else a=o.type===Boolean&&""===s?!0:s,le(t,n,a)}}function Et(e,t){if(!o(t,"default"))return t.type===Boolean?!1:void 0;var r=t["default"];return b(r),"function"==typeof r&&t.type!==Function?r.call(e):r}function Ct(e,t,r){var n=r||!t._asComponent?Ot(e,t):null,i=n&&n.terminal||"SCRIPT"===e.tagName||!e.hasChildNodes()?null:Bt(e.childNodes,t);return function(e,t,r,o,a){var s=g(t.childNodes),c=At(function(){n&&n(e,t,r,o,a),i&&i(e,s,r,o,a)},e);return Lt(e,c)}}function At(e,t){var r=t._directives.length;e();var n=t._directives.slice(r);n.sort(kt);for(var i=0,o=n.length;o>i;i++)n[i]._bind();return n}function kt(e,t){return e=e.descriptor.def.priority||So,t=t.descriptor.def.priority||So,e>t?-1:e===t?0:1}function Lt(e,t,r,n){function i(i){Pt(e,t,i),r&&n&&Pt(r,n)}return i.dirs=t,i}function Pt(e,t,r){for(var n=t.length;n--;)t[n]._teardown(),r||e._directives.$remove(t[n])}function Rt(e,t,r,n){var i=Mt(t,r),o=At(function(){i(e,n)},e);return Lt(e,o)}function Dt(e,t,r){var n,i,o=t._containerAttrs,a=t._replacerAttrs;if(11!==e.nodeType)t._asComponent?(o&&r&&(n=$t(o,r)),a&&(i=$t(a,t))):i=$t(e.attributes,t);else;return t._containerAttrs=t._replacerAttrs=null,function(e,t,r){var o,a=e._context;a&&n&&(o=At(function(){n(a,t,null,r)},a));var s=At(function(){i&&i(e,t)},e);return Lt(e,s,a,o)}}function Ot(e,t){var r=e.nodeType;return 1===r&&"SCRIPT"!==e.tagName?Vt(e,t):3===r&&e.data.trim()?Ft(e,t):null}function Vt(e,t){if("TEXTAREA"===e.tagName){var r=R(e.value);r&&(e.setAttribute(":value",D(r)),e.value="")}var n,i=e.hasAttributes();return i&&(n=Ht(e,t)),n||(n=It(e,t)),n||(n=Gt(e,t)),!n&&i&&(n=$t(e.attributes,t)),n}function Ft(e,t){if(e._skip)return Ut;var r=R(e.wholeText);if(!r)return null;for(var n=e.nextSibling;n&&3===n.nodeType;)n._skip=!0,n=n.nextSibling;for(var i,o,a=document.createDocumentFragment(),s=0,c=r.length;c>s;s++)o=r[s],i=o.tag?Nt(o,t):document.createTextNode(o.value),a.appendChild(i);return jt(r,a,t)}function Ut(e,t){$(t)}function Nt(e,t){function r(t){if(!e.descriptor){var r=k(e.value);e.descriptor={name:t,def:Ji[t],expression:r.expression,filters:r.filters}}}var n;return e.oneTime?n=document.createTextNode(e.value):e.html?(n=document.createComment("v-html"),r("html")):(n=document.createTextNode(" "),r("text")),n}function jt(e,t){return function(r,n,i,o){for(var a,s,c,h=t.cloneNode(!0),u=g(h.childNodes),l=0,p=e.length;p>l;l++)a=e[l],s=a.value,a.tag&&(c=u[l],a.oneTime?(s=(o||r).$eval(s),a.html?Y(c,at(s,!0)):c.data=s):r._bindDir(a.descriptor,c,i,o));Y(n,h)}}function Bt(e,t){for(var r,n,i,o=[],a=0,s=e.length;s>a;a++)i=e[a],r=Ot(i,t),n=r&&r.terminal||"SCRIPT"===i.tagName||!i.hasChildNodes()?null:Bt(i.childNodes,t),o.push(r,n);return o.length?zt(o):null}function zt(e){return function(t,r,n,i,o){for(var a,s,c,h=0,u=0,l=e.length;l>h;u++){
a=r[u],s=e[h++],c=e[h++];var p=g(a.childNodes);s&&s(t,a,n,i,o),c&&c(t,p,n,i,o)}}}function It(e,t){var r=e.tagName.toLowerCase();if(!pn.test(r)){"slot"===r&&H(e,"name")&&(r="_namedSlot");var n=xe(t,"elementDirectives",r);return n?Xt(e,r,"",t,n):void 0}}function Gt(e,t){var r=he(e,t);if(r){var n=ae(e),i={name:"component",ref:n,expression:r.id,def:po.component,modifiers:{literal:!r.dynamic}},o=function(e,t,r,o,a){n&&Ce((o||e).$refs,n,null),e._bindDir(i,t,r,o,a)};return o.terminal=!0,o}}function Ht(e,t){if(null!==I(e,"v-pre"))return Wt;if(e.hasAttribute("v-else")){var r=e.previousElementSibling;if(r&&r.hasAttribute("v-if"))return Wt}for(var n,i,o=0,a=_o.length;a>o;o++)if(i=_o[o],n=e.getAttribute("v-"+i),null!=n)return Xt(e,i,n,t)}function Wt(){}function Xt(e,t,r,n,i){var o=k(r),a={name:t,expression:o.expression,filters:o.filters,raw:r,def:i||Ji[t]};("for"===t||"router-view"===t)&&(a.ref=ae(e));var s=function(e,t,r,n,i){a.ref&&Ce((n||e).$refs,a.ref,null),e._bindDir(a,t,r,n,i)};return s.terminal=!0,s}function $t(e,t){function r(e,t,r){var n=r&&Kt(r),i=!n&&k(o);d.push({name:e,attr:a,raw:s,def:t,arg:h,modifiers:u,expression:i&&i.expression,filters:i&&i.filters,interp:r,hasOneTime:n})}for(var n,i,o,a,s,c,h,u,l,p,f=e.length,d=[];f--;)if(n=e[f],i=a=n.name,o=s=n.value,p=R(o),h=null,u=qt(i),i=i.replace(xo,""),p)o=D(p),h=i,r("bind",Ji.bind,p);else if(wo.test(i))u.literal=!go.test(i),r("transition",po.transition);else if(yo.test(i))h=i.replace(yo,""),r("on",Ji.on);else if(go.test(i))c=i.replace(go,""),"style"===c||"class"===c?r(c,po[c]):(h=c,r("bind",Ji.bind));else if(0===i.indexOf("v-")){if(h=(h=i.match(bo))&&h[1],h&&(i=i.replace(bo,"")),c=i.slice(2),"else"===c)continue;l=xe(t,"directives",c),l&&r(c,l)}return d.length?Yt(d):void 0}function qt(e){var t=Object.create(null),r=e.match(xo);if(r)for(var n=r.length;n--;)t[r[n].slice(1)]=!0;return t}function Yt(e){return function(t,r,n,i,o){for(var a=e.length;a--;)t._bindDir(e[a],r,n,i,o)}}function Kt(e){for(var t=e.length;t--;)if(e[t].oneTime)return!0}function Qt(e,t){return t&&(t._containerAttrs=Jt(e)),ie(e)&&(e=at(e)),t&&(t._asComponent&&!t.template&&(t.template="<slot></slot>"),t.template&&(t._content=te(e),e=Zt(e,t))),e instanceof DocumentFragment&&(q(oe("v-start",!0),e),e.appendChild(oe("v-end",!0))),e}function Zt(e,t){var r=t.template,n=at(r,!0);if(n){var i=n.firstChild,o=i.tagName&&i.tagName.toLowerCase();return t.replace?(e===document.body,n.childNodes.length>1||1!==i.nodeType||"component"===o||xe(t,"components",o)||H(i,"is")||xe(t,"elementDirectives",o)||i.hasAttribute("v-for")||i.hasAttribute("v-if")?n:(t._replacerAttrs=Jt(i),er(e,i),i)):(e.appendChild(n),e)}}function Jt(e){return 1===e.nodeType&&e.hasAttributes()?g(e.attributes):void 0}function er(e,t){for(var r,n,i=e.attributes,o=i.length;o--;)r=i[o].name,n=i[o].value,t.hasAttribute(r)||Mo.test(r)?"class"!==r||R(n)||n.split(/\s+/).forEach(function(e){J(t,e)}):t.setAttribute(r,n)}function tr(e){function t(){}function r(e,t){var r=new $e(t,e,null,{lazy:!0});return function(){return r.dirty&&r.evaluate(),_e.target&&r.depend(),r.value}}Object.defineProperty(e.prototype,"$data",{get:function(){return this._data},set:function(e){e!==this._data&&this._setData(e)}}),e.prototype._initState=function(){this._initProps(),this._initMeta(),this._initMethods(),this._initData(),this._initComputed()},e.prototype._initProps=function(){var e=this.$options,t=e.el,r=e.props;t=e.el=B(t),this._propsUnlinkFn=t&&1===t.nodeType&&r?Rt(this,t,r,this._scope):null},e.prototype._initData=function(){var e=this._data,t=this.$options.data,r=t&&t();if(r){this._data=r;for(var i in e)null===this._props[i].raw&&o(r,i)||n(r,i,e[i])}var a,s,c=this._data,h=Object.keys(c);for(a=h.length;a--;)s=h[a],this._proxy(s);Ee(c,this)},e.prototype._setData=function(e){e=e||{};var t=this._data;this._data=e;var r,n,i;for(r=Object.keys(t),i=r.length;i--;)n=r[i],n in e||this._unproxy(n);for(r=Object.keys(e),i=r.length;i--;)n=r[i],o(this,n)||this._proxy(n);t.__ob__.removeVm(this),Ee(e,this),this._digest()},e.prototype._proxy=function(e){if(!s(e)){var t=this;Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return t._data[e]},set:function(r){t._data[e]=r}})}},e.prototype._unproxy=function(e){s(e)||delete this[e]},e.prototype._digest=function(){for(var e=0,t=this._watchers.length;t>e;e++)this._watchers[e].update(!0)},e.prototype._initComputed=function(){var e=this.$options.computed;if(e)for(var n in e){var i=e[n],o={enumerable:!0,configurable:!0};"function"==typeof i?(o.get=r(i,this),o.set=t):(o.get=i.get?i.cache!==!1?r(i.get,this):v(i.get,this):t,o.set=i.set?v(i.set,this):t),Object.defineProperty(this,n,o)}},e.prototype._initMethods=function(){var e=this.$options.methods;if(e)for(var t in e)this[t]=v(e[t],this)},e.prototype._initMeta=function(){var e=this.$options._meta;if(e)for(var t in e)Ce(this,t,e[t])}}function rr(e){function t(e,t){for(var r,n,i=t.attributes,o=0,a=i.length;a>o;o++)r=i[o].name,Eo.test(r)&&(r=r.replace(Eo,""),n=(e._scope||e._context).$eval(i[o].value,!0),n._fromParent=!0,e.$on(r.replace(Eo),n))}function r(e,t,r){if(r){var i,o,a,s;for(o in r)if(i=r[o],Tr(i))for(a=0,s=i.length;s>a;a++)n(e,t,o,i[a]);else n(e,t,o,i)}}function n(e,t,r,i,o){var a=typeof i;if("function"===a)e[t](r,i,o);else if("string"===a){var s=e.$options.methods,c=s&&s[i];c&&e[t](r,c,o)}else i&&"object"===a&&n(e,t,r,i.handler,i)}function i(){this._isAttached||(this._isAttached=!0,this.$children.forEach(o))}function o(e){!e._isAttached&&z(e.$el)&&e._callHook("attached")}function a(){this._isAttached&&(this._isAttached=!1,this.$children.forEach(s))}function s(e){e._isAttached&&!z(e.$el)&&e._callHook("detached")}e.prototype._initEvents=function(){var e=this.$options;e._asComponent&&t(this,e.el),r(this,"$on",e.events),r(this,"$watch",e.watch)},e.prototype._initDOMHooks=function(){this.$on("hook:attached",i),this.$on("hook:detached",a)},e.prototype._callHook=function(e){this.$emit("pre-hook:"+e);var t=this.$options[e];if(t)for(var r=0,n=t.length;n>r;r++)t[r].call(this);this.$emit("hook:"+e)}}function nr(){}function ir(e,t,r,n,i,o){this.vm=t,this.el=r,this.descriptor=e,this.name=e.name,this.expression=e.expression,this.arg=e.arg,this.modifiers=e.modifiers,this.filters=e.filters,this.literal=this.modifiers&&this.modifiers.literal,this._locked=!1,this._bound=!1,this._listeners=null,this._host=n,this._scope=i,this._frag=o}function or(e){e.prototype._updateRef=function(e){var t=this.$options._ref;if(t){var r=(this._scope||this._context).$refs;e?r[t]===this&&(r[t]=null):r[t]=this}},e.prototype._compile=function(e){var t=this.$options,r=e;if(e=Qt(e,t),this._initElement(e),1!==e.nodeType||null===I(e,"v-pre")){var n,i=this._context&&this._context.$options,o=Dt(e,t,i),a=this.constructor;t._linkerCachable&&(n=a.linker,n||(n=a.linker=Ct(e,t)));var s=o(this,e,this._scope),c=n?n(this,e):Ct(e,t)(this,e);return this._unlinkFn=function(){s(),c(!0)},t.replace&&Y(r,e),this._isCompiled=!0,this._callHook("compiled"),e}},e.prototype._initElement=function(e){e instanceof DocumentFragment?(this._isFragment=!0,this.$el=this._fragmentStart=e.firstChild,this._fragmentEnd=e.lastChild,3===this._fragmentStart.nodeType&&(this._fragmentStart.data=this._fragmentEnd.data=""),this._fragment=e):this.$el=e,this.$el.__vue__=this,this._callHook("beforeCompile")},e.prototype._bindDir=function(e,t,r,n,i){this._directives.push(new ir(e,this,t,r,n,i))},e.prototype._destroy=function(e,t){if(this._isBeingDestroyed)return void(t||this._cleanup());var r,n,i=this,o=function(){!r||n||t||i._cleanup()};e&&this.$el&&(n=!0,this.$remove(function(){n=!1,o()})),this._callHook("beforeDestroy"),this._isBeingDestroyed=!0;var a,s=this.$parent;for(s&&!s._isBeingDestroyed&&(s.$children.$remove(this),this._updateRef(!0)),a=this.$children.length;a--;)this.$children[a].$destroy();for(this._propsUnlinkFn&&this._propsUnlinkFn(),this._unlinkFn&&this._unlinkFn(),a=this._watchers.length;a--;)this._watchers[a].teardown();this.$el&&(this.$el.__vue__=null),r=!0,o()},e.prototype._cleanup=function(){this._isDestroyed||(this._frag&&this._frag.children.$remove(this),this._data.__ob__&&this._data.__ob__.removeVm(this),this.$el=this.$parent=this.$root=this.$children=this._watchers=this._context=this._scope=this._directives=null,this._isDestroyed=!0,this._callHook("destroyed"),this.$off())}}function ar(e){e.prototype._applyFilters=function(e,t,r,n){var i,o,a,s,c,h,u,l,p;for(h=0,u=r.length;u>h;h++)if(i=r[h],o=xe(this.$options,"filters",i.name),o&&(o=n?o.write:o.read||o,"function"==typeof o)){if(a=n?[e,t]:[e],c=n?2:1,i.args)for(l=0,p=i.args.length;p>l;l++)s=i.args[l],a[l+c]=s.dynamic?this.$get(s.value):s.value;e=o.apply(this,a)}return e},e.prototype._resolveComponent=function(t,r){var n=xe(this.$options,"components",t);if(n)if(n.options)r(n);else if(n.resolved)r(n.resolved);else if(n.requested)n.pendingCallbacks.push(r);else{n.requested=!0;var i=n.pendingCallbacks=[r];n(function(t){x(t)&&(t=e.extend(t)),n.resolved=t;for(var r=0,o=i.length;o>r;r++)i[r](t)},function(e){})}}}function sr(e){function t(e){return new Function("return function "+m(e)+" (options) { this._init(options) }")()}e.util=xn,e.config=hn,e.set=n,e["delete"]=i,e.nextTick=Fr,e.compiler=To,e.FragmentFactory=dt,e.internalDirectives=po,e.parsers={path:Un,text:an,template:Xi,directive:Jr,expression:Qn},e.cid=0;var r=1;e.extend=function(e){e=e||{};var n=this,i=0===n.cid;if(i&&e._Ctor)return e._Ctor;var o=e.name||n.options.name,a=t(o||"VueComponent");return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=r++,a.options=be(n.options,e),a["super"]=n,a.extend=n.extend,hn._assetTypes.forEach(function(e){a[e]=n[e]}),o&&(a.options.components[o]=a),i&&(e._Ctor=a),a},e.use=function(e){if(!e.installed){var t=g(arguments,1);return t.unshift(this),"function"==typeof e.install?e.install.apply(e,t):e.apply(null,t),e.installed=!0,this}},e.mixin=function(t){e.options=be(e.options,t)},hn._assetTypes.forEach(function(t){e[t]=function(r,n){return n?("component"===t&&x(n)&&(n.name=r,n=e.extend(n)),this.options[t+"s"][r]=n,n):this.options[t+"s"][r]}})}function cr(e){function t(e){return JSON.parse(JSON.stringify(e))}e.prototype.$get=function(e,t){var r=ze(e);if(r){if(t&&!Ie(e)){var n=this;return function(){n.$arguments=g(arguments);var e=r.get.call(n,n);return n.$arguments=null,e}}try{return r.get.call(this,this)}catch(i){}}},e.prototype.$set=function(e,t){var r=ze(e,!0);r&&r.set&&r.set.call(this,this,t)},e.prototype.$delete=function(e){i(this._data,e)},e.prototype.$watch=function(e,t,r){var n,i=this;"string"==typeof e&&(n=k(e),e=n.expression);var o=new $e(i,e,t,{deep:r&&r.deep,sync:r&&r.sync,filters:n&&n.filters,user:!r||r.user!==!1});return r&&r.immediate&&t.call(i,o.value),function(){o.teardown()}},e.prototype.$eval=function(e,t){if(Co.test(e)){var r=k(e),n=this.$get(r.expression,t);return r.filters?this._applyFilters(n,null,r.filters):n}return this.$get(e,t)},e.prototype.$interpolate=function(e){var t=R(e),r=this;return t?1===t.length?r.$eval(t[0].value)+"":t.map(function(e){return e.tag?r.$eval(e.value):e.value}).join(""):e},e.prototype.$log=function(e){var r=e?De(this._data,e):this._data;if(r&&(r=t(r)),!e)for(var n in this.$options.computed)r[n]=t(this[n]);console.log(r)}}function hr(e){function t(e,t,n,i,o,a){t=r(t);var s=!z(t),c=i===!1||s?o:a,h=!s&&!e._isAttached&&!z(e.$el);return e._isFragment?(se(e._fragmentStart,e._fragmentEnd,function(r){c(r,t,e)}),n&&n()):c(e.$el,t,e,n),h&&e._callHook("attached"),e}function r(e){return"string"==typeof e?document.querySelector(e):e}function n(e,t,r,n){t.appendChild(e),n&&n()}function i(e,t,r,n){W(e,t),n&&n()}function o(e,t,r){$(e),r&&r()}e.prototype.$nextTick=function(e){Fr(e,this)},e.prototype.$appendTo=function(e,r,i){return t(this,e,r,i,n,F)},e.prototype.$prependTo=function(e,t,n){return e=r(e),e.hasChildNodes()?this.$before(e.firstChild,t,n):this.$appendTo(e,t,n),this},e.prototype.$before=function(e,r,n){return t(this,e,r,n,i,U)},e.prototype.$after=function(e,t,n){return e=r(e),e.nextSibling?this.$before(e.nextSibling,t,n):this.$appendTo(e.parentNode,t,n),this},e.prototype.$remove=function(e,t){if(!this.$el.parentNode)return e&&e();var r=this._isAttached&&z(this.$el);r||(t=!1);var n=this,i=function(){r&&n._callHook("detached"),e&&e()};if(this._isFragment)ce(this._fragmentStart,this._fragmentEnd,this,this._fragment,i);else{var a=t===!1?o:N;a(this.$el,this,i)}return this}}function ur(e){function t(e,t,n){var i=e.$parent;if(i&&n&&!r.test(t))for(;i;)i._eventsCount[t]=(i._eventsCount[t]||0)+n,i=i.$parent}e.prototype.$on=function(e,r){return(this._events[e]||(this._events[e]=[])).push(r),t(this,e,1),this},e.prototype.$once=function(e,t){function r(){n.$off(e,r),t.apply(this,arguments)}var n=this;return r.fn=t,this.$on(e,r),this},e.prototype.$off=function(e,r){var n;if(!arguments.length){if(this.$parent)for(e in this._events)n=this._events[e],n&&t(this,e,-n.length);return this._events={},this}if(n=this._events[e],!n)return this;if(1===arguments.length)return t(this,e,-n.length),this._events[e]=null,this;for(var i,o=n.length;o--;)if(i=n[o],i===r||i.fn===r){t(this,e,-1),n.splice(o,1);break}return this},e.prototype.$emit=function(e){var t="string"==typeof e;e=t?e:e.name;var r=this._events[e],n=t||!r;if(r){r=r.length>1?g(r):r;var i=t&&r.some(function(e){return e._fromParent});i&&(n=!1);for(var o=g(arguments,1),a=0,s=r.length;s>a;a++){var c=r[a],h=c.apply(this,o);h!==!0||i&&!c._fromParent||(n=!0)}}return n},e.prototype.$broadcast=function(e){var t="string"==typeof e;if(e=t?e:e.name,this._eventsCount[e]){var r=this.$children,n=g(arguments);t&&(n[0]={name:e,source:this});for(var i=0,o=r.length;o>i;i++){var a=r[i],s=a.$emit.apply(a,n);s&&a.$broadcast.apply(a,n)}return this}},e.prototype.$dispatch=function(e){var t=this.$emit.apply(this,arguments);if(t){var r=this.$parent,n=g(arguments);for(n[0]={name:e,source:this};r;)t=r.$emit.apply(r,n),r=t?r.$parent:null;return this}};var r=/^hook:/}function lr(e){function t(){this._isAttached=!0,this._isReady=!0,this._callHook("ready")}e.prototype.$mount=function(e){return this._isCompiled?void 0:(e=B(e),e||(e=document.createElement("div")),this._compile(e),this._initDOMHooks(),z(this.$el)?(this._callHook("attached"),t.call(this)):this.$once("hook:attached",t),this)},e.prototype.$destroy=function(e,t){this._destroy(e,t)},e.prototype.$compile=function(e,t,r,n){return Ct(e,this.$options,!0)(this,e,t,r,n)}}function pr(e){this._init(e)}function fr(e,t,r){return r=r?parseInt(r,10):0,t=h(t),"number"==typeof t?e.slice(r,r+t):e}function dr(e,t,r){if(e=Ao(e),null==t)return e;if("function"==typeof t)return e.filter(t);t=(""+t).toLowerCase();for(var n,i,o,a,s="in"===r?3:2,c=g(arguments,s).reduce(function(e,t){return e.concat(t)},[]),h=[],u=0,l=e.length;l>u;u++)if(n=e[u],o=n&&n.$value||n,a=c.length){for(;a--;)if(i=c[a],"$key"===i&&vr(n.$key,t)||vr(De(o,i),t)){h.push(n);break}}else vr(n,t)&&h.push(n);return h}function mr(e,t,r){if(e=Ao(e),!t)return e;var n=r&&0>r?-1:1;return e.slice().sort(function(e,r){return"$key"!==t&&(b(e)&&"$value"in e&&(e=e.$value),b(r)&&"$value"in r&&(r=r.$value)),e=b(e)?De(e,t):e,r=b(r)?De(r,t):r,e===r?0:e>r?n:-n})}function vr(e,t){var r;if(x(e)){var n=Object.keys(e);for(r=n.length;r--;)if(vr(e[n[r]],t))return!0}else if(Tr(e)){for(r=e.length;r--;)if(vr(e[r],t))return!0}else if(null!=e)return e.toString().toLowerCase().indexOf(t)>-1}function gr(e,t,r){function n(e){!ie(e)||e.hasAttribute("v-if")||e.hasAttribute("v-for")||(e=at(e)),e=ot(e),i.appendChild(e)}for(var i=document.createDocumentFragment(),o=0,a=e.length;a>o;o++){var s=e[o];r&&!s.__v_selected?n(s):r||s.parentNode!==t||(s.__v_selected=!0,n(s))}return i}var yr=Object.prototype.hasOwnProperty,br=/^\s?(true|false|[\d\.]+|'[^']*'|"[^"]*")\s?$/,xr=/-(\w)/g,wr=/([a-z\d])([A-Z])/g,_r=/(?:^|[-_\/])(\w)/g,Sr=Object.prototype.toString,Mr="[object Object]",Tr=Array.isArray,Er="__proto__"in{},Cr="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),Ar=Cr&&navigator.userAgent.toLowerCase().indexOf("msie 9.0")>0,kr=Cr&&navigator.userAgent.toLowerCase().indexOf("android")>0,Lr=void 0,Pr=void 0,Rr=void 0,Dr=void 0;if(Cr&&!Ar){var Or=void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend,Vr=void 0===window.onanimationend&&void 0!==window.onwebkitanimationend;Lr=Or?"WebkitTransition":"transition",Pr=Or?"webkitTransitionEnd":"transitionend",Rr=Vr?"WebkitAnimation":"animation",Dr=Vr?"webkitAnimationEnd":"animationend"}var Fr=function(){function e(){n=!1;var e=r.slice(0);r=[];for(var t=0;t<e.length;t++)e[t]()}var t,r=[],n=!1;if("undefined"!=typeof MutationObserver){var i=1,o=new MutationObserver(e),a=document.createTextNode(i);o.observe(a,{characterData:!0}),t=function(){i=(i+1)%2,a.data=i}}else t=setTimeout;return function(i,o){var a=o?function(){i.call(o)}:i;r.push(a),n||(n=!0,t(e,0))}}(),Ur=E.prototype;Ur.put=function(e,t){var r;this.size===this.limit&&(r=this.shift());var n=this.get(e,!0);return n||(n={key:e},this._keymap[e]=n,this.tail?(this.tail.newer=n,n.older=this.tail):this.head=n,this.tail=n,this.size++),n.value=t,r},Ur.shift=function(){var e=this.head;return e&&(this.head=this.head.newer,this.head.older=void 0,e.newer=e.older=void 0,this._keymap[e.key]=void 0,this.size--),e},Ur.get=function(e,t){var r=this._keymap[e];if(void 0!==r)return r===this.tail?t?r:r.value:(r.newer&&(r===this.head&&(this.head=r.newer),r.newer.older=r.older),r.older&&(r.older.newer=r.newer),r.newer=void 0,r.older=this.tail,this.tail&&(this.tail.newer=r),this.tail=r,t?r:r.value)};var Nr,jr,Br,zr,Ir,Gr,Hr,Wr,Xr,$r,qr,Yr,Kr=new E(1e3),Qr=/[^\s'"]+|'[^']*'|"[^"]*"/g,Zr=/^in$|^-?\d+/,Jr=Object.freeze({parseDirective:k}),en=/[-.*+?^${}()|[\]\/\\]/g,tn=void 0,rn=void 0,nn=void 0,on=/[^|]\|[^|]/,an=Object.freeze({compileRegex:P,parseText:R,tokensToExp:D}),sn=["{{","}}"],cn=["{{{","}}}"],hn=Object.defineProperties({debug:!1,silent:!1,async:!0,warnExpressionErrors:!0,convertAllProperties:!1,_delimitersChanged:!0,_assetTypes:["component","directive","elementDirective","filter","transition","partial"],_propBindingModes:{ONE_WAY:0,TWO_WAY:1,ONE_TIME:2},_maxUpdateCount:100},{delimiters:{get:function(){return sn},set:function(e){sn=e,P()},configurable:!0,enumerable:!0},unsafeDelimiters:{get:function(){return cn},set:function(e){cn=e,P()},configurable:!0,enumerable:!0}}),un=void 0,ln=/^v-ref:/,pn=/^(div|p|span|img|a|b|i|br|ul|ol|li|h1|h2|h3|h4|h5|h6|code|pre|table|th|td|tr|form|label|input|select|option|nav|article|section|header|footer)$/,fn=/^(slot|partial|component)$/,dn=hn.optionMergeStrategies=Object.create(null);dn.data=function(e,t,r){return r?e||t?function(){var n="function"==typeof t?t.call(r):t,i="function"==typeof e?e.call(r):void 0;return n?de(n,i):i}:void 0:t?"function"!=typeof t?e:e?function(){return de(t.call(this),e.call(this))}:t:e},dn.el=function(e,t,r){if(r||!t||"function"==typeof t){var n=t||e;return r&&"function"==typeof n?n.call(r):n}},dn.init=dn.created=dn.ready=dn.attached=dn.detached=dn.beforeCompile=dn.compiled=dn.beforeDestroy=dn.destroyed=function(e,t){return t?e?e.concat(t):Tr(t)?t:[t]:e},dn.paramAttributes=function(){},hn._assetTypes.forEach(function(e){dn[e+"s"]=me}),dn.watch=dn.events=function(e,t){if(!t)return e;if(!e)return t;var r={};y(r,e);for(var n in t){var i=r[n],o=t[n];i&&!Tr(i)&&(i=[i]),r[n]=i?i.concat(o):[o]}return r},dn.props=dn.methods=dn.computed=function(e,t){if(!t)return e;if(!e)return t;var r=Object.create(null);return y(r,e),y(r,t),r};var mn=function(e,t){return void 0===t?e:t},vn=Array.prototype,gn=Object.create(vn);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=vn[e];w(gn,e,function(){for(var r=arguments.length,n=new Array(r);r--;)n[r]=arguments[r];var i,o=t.apply(this,n),a=this.__ob__;switch(e){case"push":i=n;break;case"unshift":i=n;break;case"splice":i=n.slice(2)}return i&&a.observeArray(i),a.dep.notify(),o})}),w(vn,"$set",function(e,t){return e>=this.length&&(this.length=Number(e)+1),this.splice(e,1,t)[0]}),w(vn,"$remove",function(e){if(this.length){var t=S(this,e);return t>-1?this.splice(t,1):void 0}});var yn=0;_e.target=null,_e.prototype.addSub=function(e){this.subs.push(e)},_e.prototype.removeSub=function(e){this.subs.$remove(e)},_e.prototype.depend=function(){_e.target.addDep(this)},_e.prototype.notify=function(){for(var e=g(this.subs),t=0,r=e.length;r>t;t++)e[t].update()};var bn=Object.getOwnPropertyNames(gn);Se.prototype.walk=function(e){for(var t=Object.keys(e),r=0,n=t.length;n>r;r++)this.convert(t[r],e[t[r]])},Se.prototype.observeArray=function(e){for(var t=0,r=e.length;r>t;t++)Ee(e[t])},Se.prototype.convert=function(e,t){Ce(this.value,e,t)},Se.prototype.addVm=function(e){(this.vms||(this.vms=[])).push(e)},Se.prototype.removeVm=function(e){this.vms.$remove(e)};var xn=Object.freeze({defineReactive:Ce,set:n,del:i,hasOwn:o,isLiteral:a,isReserved:s,_toString:c,toNumber:h,toBoolean:u,stripQuotes:l,camelize:p,hyphenate:d,classify:m,bind:v,toArray:g,extend:y,isObject:b,isPlainObject:x,def:w,debounce:_,indexOf:S,cancellable:M,looseEqual:T,isArray:Tr,hasProto:Er,inBrowser:Cr,isIE9:Ar,isAndroid:kr,get transitionProp(){return Lr},get transitionEndEvent(){return Pr},get animationProp(){return Rr},get animationEndEvent(){return Dr},nextTick:Fr,query:B,inDoc:z,getAttr:I,getBindAttr:G,hasBindAttr:H,before:W,after:X,remove:$,prepend:q,replace:Y,on:K,off:Q,setClass:Z,addClass:J,removeClass:ee,extractContent:te,trimNode:re,isTemplate:ie,createAnchor:oe,findRef:ae,mapNodeRange:se,removeNodeRange:ce,mergeOptions:be,resolveAsset:xe,assertAsset:we,checkComponentAttr:he,initProp:le,assertProp:pe,coerceProp:fe,commonTagRE:pn,reservedTagRE:fn,get warn(){return un}}),wn=0,_n=new E(1e3),Sn=0,Mn=1,Tn=2,En=3,Cn=0,An=1,kn=2,Ln=3,Pn=4,Rn=5,Dn=6,On=7,Vn=8,Fn=[];Fn[Cn]={ws:[Cn],ident:[Ln,Sn],"[":[Pn],eof:[On]},Fn[An]={ws:[An],".":[kn],"[":[Pn],eof:[On]},Fn[kn]={ws:[kn],ident:[Ln,Sn]},Fn[Ln]={ident:[Ln,Sn],0:[Ln,Sn],number:[Ln,Sn],ws:[An,Mn],".":[kn,Mn],"[":[Pn,Mn],eof:[On,Mn]},Fn[Pn]={"'":[Rn,Sn],'"':[Dn,Sn],"[":[Pn,Tn],"]":[An,En],eof:Vn,"else":[Pn,Sn]},Fn[Rn]={"'":[Pn,Sn],eof:Vn,"else":[Rn,Sn]},Fn[Dn]={'"':[Pn,Sn],eof:Vn,"else":[Dn,Sn]};var Un=Object.freeze({parsePath:Re,getPath:De,setPath:Oe}),Nn=new E(1e3),jn="Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat",Bn=new RegExp("^("+jn.replace(/,/g,"\\b|")+"\\b)"),zn="break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,return,super,switch,throw,try,var,while,with,yield,enum,await,implements,package,proctected,static,interface,private,public",In=new RegExp("^("+zn.replace(/,/g,"\\b|")+"\\b)"),Gn=/\s/g,Hn=/\n/g,Wn=/[\{,]\s*[\w\$_]+\s*:|('(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*")|new |typeof |void /g,Xn=/"(\d+)"/g,$n=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,qn=/[^\w$\.](?:[A-Za-z_$][\w$]*)/g,Yn=/^(?:true|false)$/,Kn=[],Qn=Object.freeze({parseExpression:ze,isSimplePath:Ie}),Zn=[],Jn=[],ei={},ti={},ri=!1,ni=!1,ii=0;$e.prototype.addDep=function(e){var t=e.id;this.newDeps[t]||(this.newDeps[t]=e,this.deps[t]||(this.deps[t]=e,e.addSub(this)))},$e.prototype.get=function(){this.beforeGet();var e,t=this.scope||this.vm;try{e=this.getter.call(t,t)}catch(r){}return this.deep&&qe(e),this.preProcess&&(e=this.preProcess(e)),this.filters&&(e=t._applyFilters(e,null,this.filters,!1)),this.postProcess&&(e=this.postProcess(e)),this.afterGet(),e},$e.prototype.set=function(e){var t=this.scope||this.vm;this.filters&&(e=t._applyFilters(e,this.value,this.filters,!0));try{this.setter.call(t,t,e)}catch(r){}var n=t.$forContext;if(n&&n.alias===this.expression){if(n.filters)return;n._withLock(function(){t.$key?n.rawValue[t.$key]=e:n.rawValue.$set(t.$index,e)})}},$e.prototype.beforeGet=function(){_e.target=this,this.newDeps=Object.create(null)},$e.prototype.afterGet=function(){_e.target=null;for(var e=Object.keys(this.deps),t=e.length;t--;){var r=e[t];this.newDeps[r]||this.deps[r].removeSub(this)}this.deps=this.newDeps},$e.prototype.update=function(e){this.lazy?this.dirty=!0:this.sync||!hn.async?this.run():(this.shallow=this.queued?e?this.shallow:!1:!!e,this.queued=!0,Xe(this))},$e.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||(b(e)||this.deep)&&!this.shallow){var t=this.value;this.value=e;this.prevError;this.cb.call(this.vm,e,t)}this.queued=this.shallow=!1}},$e.prototype.evaluate=function(){var e=_e.target;this.value=this.get(),this.dirty=!1,_e.target=e},$e.prototype.depend=function(){for(var e=Object.keys(this.deps),t=e.length;t--;)this.deps[e[t]].depend()},$e.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||this.vm._watchers.$remove(this);for(var e=Object.keys(this.deps),t=e.length;t--;)this.deps[e[t]].removeSub(this);this.active=!1,this.vm=this.cb=this.value=null}};var oi={bind:function(){var e=this.el;this.vm.$once("pre-hook:compiled",function(){e.removeAttribute("v-cloak")})}},ai={bind:function(){}},si=700,ci=800,hi=850,ui=1100,li=1500,pi=1500,fi=1750,di=2e3,mi=2e3,vi=2100,gi={priority:li,bind:function(){if(this.arg){var e=this.id=p(this.arg),t=(this._scope||this.vm).$els;o(t,e)?t[e]=this.el:Ce(t,e,this.el)}},unbind:function(){var e=(this._scope||this.vm).$els;e[this.id]===this.el&&(e[this.id]=null)}},yi=["-webkit-","-moz-","-ms-"],bi=["Webkit","Moz","ms"],xi=/!important;?$/,wi=Object.create(null),_i=null,Si={deep:!0,update:function(e){"string"==typeof e?this.el.style.cssText=e:Tr(e)?this.handleObject(e.reduce(y,{})):this.handleObject(e||{})},handleObject:function(e){var t,r,n=this.cache||(this.cache={});for(t in n)t in e||(this.handleSingle(t,null),delete n[t]);for(t in e)r=e[t],r!==n[t]&&(n[t]=r,this.handleSingle(t,r))},handleSingle:function(e,t){if(e=Ye(e))if(null!=t&&(t+=""),t){var r=xi.test(t)?"important":"";r&&(t=t.replace(xi,"").trim()),this.el.style.setProperty(e,t,r)}else this.el.style.removeProperty(e)}},Mi="http://www.w3.org/1999/xlink",Ti=/^xlink:/,Ei=/^v-|^:|^@|^(?:is|transition|transition-mode|debounce|track-by|stagger|enter-stagger|leave-stagger)$/,Ci=/^(?:value|checked|selected|muted)$/,Ai={value:"_value","true-value":"_trueValue","false-value":"_falseValue"},ki={priority:hi,bind:function(){var e=this.arg,t=this.el.tagName;e||(this.deep=!0);var r=this.descriptor,n=r.interp;if(n){r.hasOneTime&&(this.expression=D(n,this._scope||this.vm)),(Ei.test(e)||"name"===e&&("PARTIAL"===t||"SLOT"===t))&&(this.el.removeAttribute(e),this.invalid=!0)}},update:function(e){if(!this.invalid){var t=this.arg;this.arg?this.handleSingle(t,e):this.handleObject(e||{})}},handleObject:Si.handleObject,handleSingle:function(e,t){var r=this.el,n=this.descriptor.interp;!n&&Ci.test(e)&&e in r&&(r[e]="value"===e&&null==t?"":t);var i=Ai[e];if(!n&&i){r[i]=t;var o=r.__v_model;o&&o.listener()}return"value"===e&&"TEXTAREA"===r.tagName?void r.removeAttribute(e):void(null!=t&&t!==!1?"class"===e?(r.__v_trans&&(t+=" "+r.__v_trans.id+"-transition"),Z(r,t)):Ti.test(e)?r.setAttributeNS(Mi,e,t):r.setAttribute(e,t):r.removeAttribute(e))}},Li={esc:27,tab:9,enter:13,space:32,"delete":46,up:38,left:37,right:39,down:40},Pi={acceptStatement:!0,priority:si,bind:function(){if("IFRAME"===this.el.tagName&&"load"!==this.arg){var e=this;this.iframeBind=function(){K(e.el.contentWindow,e.arg,e.handler)},this.on("load",this.iframeBind)}},update:function(e){if(this.descriptor.raw||(e=function(){}),"function"==typeof e){this.modifiers.stop&&(e=Ze(e)),this.modifiers.prevent&&(e=Je(e));var t=Object.keys(this.modifiers).filter(function(e){return"stop"!==e&&"prevent"!==e});t.length&&(e=Qe(e,t)),this.reset(),this.handler=e,this.iframeBind?this.iframeBind():K(this.el,this.arg,this.handler)}},reset:function(){var e=this.iframeBind?this.el.contentWindow:this.el;this.handler&&Q(e,this.arg,this.handler)},unbind:function(){this.reset()}},Ri={bind:function(){function e(){var e=r.checked;return e&&r.hasOwnProperty("_trueValue")?r._trueValue:!e&&r.hasOwnProperty("_falseValue")?r._falseValue:e}var t=this,r=this.el;this.getValue=function(){return r.hasOwnProperty("_value")?r._value:t.params.number?h(r.value):r.value},this.listener=function(){var n=t._watcher.value;if(Tr(n)){var i=t.getValue();r.checked?S(n,i)<0&&n.push(i):n.$remove(i)}else t.set(e())},this.on("change",this.listener),r.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){var t=this.el;Tr(e)?t.checked=S(e,this.getValue())>-1:t.hasOwnProperty("_trueValue")?t.checked=T(e,t._trueValue):t.checked=!!e}},Di={bind:function(){var e=this,t=this.el;this.forceUpdate=function(){e._watcher&&e.update(e._watcher.get())};var r=this.multiple=t.hasAttribute("multiple");this.listener=function(){var n=et(t,r);n=e.params.number?Tr(n)?n.map(h):h(n):n,e.set(n)},this.on("change",this.listener);var n=et(t,r,!0);(r&&n.length||!r&&null!==n)&&(this.afterBind=this.listener),this.vm.$on("hook:attached",this.forceUpdate)},update:function(e){var t=this.el;t.selectedIndex=-1;for(var r,n,i=this.multiple&&Tr(e),o=t.options,a=o.length;a--;)r=o[a],n=r.hasOwnProperty("_value")?r._value:r.value,r.selected=i?tt(e,n)>-1:T(e,n)},unbind:function(){this.vm.$off("hook:attached",this.forceUpdate)}},Oi={bind:function(){var e=this,t=this.el;this.getValue=function(){if(t.hasOwnProperty("_value"))return t._value;var r=t.value;return e.params.number&&(r=h(r)),r},this.listener=function(){e.set(e.getValue())},this.on("change",this.listener),t.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){this.el.checked=T(e,this.getValue())}},Vi={bind:function(){var e=this,t=this.el,r="range"===t.type,n=this.params.lazy,i=this.params.number,o=this.params.debounce,a=!1;kr||r||(this.on("compositionstart",function(){a=!0}),this.on("compositionend",function(){a=!1,n||e.listener()})),this.focused=!1,r||n||(this.on("focus",function(){e.focused=!0}),this.on("blur",function(){e.focused=!1,(!e._frag||e._frag.inserted)&&e.rawListener()})),this.listener=this.rawListener=function(){if(!a&&e._bound){var n=i||r?h(t.value):t.value;e.set(n),Fr(function(){e._bound&&!e.focused&&e.update(e._watcher.value)})}},o&&(this.listener=_(this.listener,o)),this.hasjQuery="function"==typeof jQuery,this.hasjQuery?(jQuery(t).on("change",this.listener),n||jQuery(t).on("input",this.listener)):(this.on("change",this.listener),n||this.on("input",this.listener)),!n&&Ar&&(this.on("cut",function(){Fr(e.listener)}),this.on("keyup",function(t){(46===t.keyCode||8===t.keyCode)&&e.listener()})),(t.hasAttribute("value")||"TEXTAREA"===t.tagName&&t.value.trim())&&(this.afterBind=this.listener)},update:function(e){this.el.value=c(e)},unbind:function(){var e=this.el;this.hasjQuery&&(jQuery(e).off("change",this.listener),jQuery(e).off("input",this.listener))}},Fi={text:Vi,radio:Oi,select:Di,checkbox:Ri},Ui={priority:ci,twoWay:!0,handlers:Fi,params:["lazy","number","debounce"],bind:function(){this.checkFilters(),this.hasRead&&!this.hasWrite;var e,t=this.el,r=t.tagName;if("INPUT"===r)e=Fi[t.type]||Fi.text;else if("SELECT"===r)e=Fi.select;else{if("TEXTAREA"!==r)return;e=Fi.text}t.__v_model=this,e.bind.call(this),this.update=e.update,this._unbind=e.unbind},checkFilters:function(){var e=this.filters;if(e)for(var t=e.length;t--;){var r=xe(this.vm.$options,"filters",e[t].name);("function"==typeof r||r.read)&&(this.hasRead=!0),r.write&&(this.hasWrite=!0)}},unbind:function(){this.el.__v_model=null,this._unbind&&this._unbind()}},Ni={bind:function(){var e=this.el.nextElementSibling;e&&null!==I(e,"v-else")&&(this.elseEl=e)},update:function(e){this.apply(this.el,e),this.elseEl&&this.apply(this.elseEl,!e)},apply:function(e,t){function r(){e.style.display=t?"":"none"}z(e)?j(e,t?1:-1,r,this.vm):r()}},ji=new E(1e3),Bi=new E(1e3),zi={efault:[0,"",""],legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]};zi.td=zi.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],zi.option=zi.optgroup=[1,'<select multiple="multiple">',"</select>"],zi.thead=zi.tbody=zi.colgroup=zi.caption=zi.tfoot=[1,"<table>","</table>"],
zi.g=zi.defs=zi.symbol=zi.use=zi.image=zi.text=zi.circle=zi.ellipse=zi.line=zi.path=zi.polygon=zi.polyline=zi.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events"version="1.1">',"</svg>"];var Ii=/<([\w:]+)/,Gi=/&#?\w+?;/,Hi=function(){if(Cr){var e=document.createElement("div");return e.innerHTML="<template>1</template>",!e.cloneNode(!0).firstChild.innerHTML}return!1}(),Wi=function(){if(Cr){var e=document.createElement("textarea");return e.placeholder="t","t"===e.cloneNode(!0).value}return!1}(),Xi=Object.freeze({cloneNode:ot,parseTemplate:at});st.prototype.callHook=function(e){var t,r;for(t=0,r=this.childFrags.length;r>t;t++)this.childFrags[t].callHook(e);for(t=0,r=this.children.length;r>t;t++)e(this.children[t])},st.prototype.beforeRemove=function(){var e,t;for(e=0,t=this.childFrags.length;t>e;e++)this.childFrags[e].beforeRemove(!1);for(e=0,t=this.children.length;t>e;e++)this.children[e].$destroy(!1,!0);var r=this.unlink.dirs;for(e=0,t=r.length;t>e;e++)r[e]._watcher&&r[e]._watcher.teardown()},st.prototype.destroy=function(){this.parentFrag&&this.parentFrag.childFrags.$remove(this),this.node.__vfrag__=null,this.unlink()};var $i=new E(5e3);dt.prototype.create=function(e,t,r){var n=ot(this.template);return new st(this.linker,this.vm,n,e,t,r)};var qi={priority:mi,bind:function(){var e=this.el;if(e.__vue__)this.invalid=!0;else{var t=e.nextElementSibling;t&&null!==I(t,"v-else")&&($(t),this.elseFactory=new dt(this.vm,t)),this.anchor=oe("v-if"),Y(e,this.anchor),this.factory=new dt(this.vm,e)}},update:function(e){this.invalid||(e?this.frag||this.insert():this.remove())},insert:function(){this.elseFrag&&(this.elseFrag.remove(),this.elseFrag=null),this.frag=this.factory.create(this._host,this._scope,this._frag),this.frag.before(this.anchor)},remove:function(){this.frag&&(this.frag.remove(),this.frag=null),this.elseFactory&&!this.elseFrag&&(this.elseFrag=this.elseFactory.create(this._host,this._scope,this._frag),this.elseFrag.before(this.anchor))},unbind:function(){this.frag&&this.frag.destroy()}},Yi=0,Ki={priority:di,params:["track-by","stagger","enter-stagger","leave-stagger"],bind:function(){var e=this.expression.match(/(.*) in (.*)/);if(e){var t=e[1].match(/\((.*),(.*)\)/);t?(this.iterator=t[1].trim(),this.alias=t[2].trim()):this.alias=e[1].trim(),this.expression=e[2]}if(this.alias){this.id="__v-for__"+ ++Yi;var r=this.el.tagName;this.isOption=("OPTION"===r||"OPTGROUP"===r)&&"SELECT"===this.el.parentNode.tagName,this.start=oe("v-for-start"),this.end=oe("v-for-end"),Y(this.el,this.end),W(this.start,this.end),this.cache=Object.create(null),this.factory=new dt(this.vm,this.el)}},update:function(e){this.diff(e),this.updateRef(),this.updateModel()},diff:function(e){var t,r,n,i,a,s,c=e[0],h=this.fromObject=b(c)&&o(c,"$key")&&o(c,"$value"),u=this.params.trackBy,l=this.frags,p=this.frags=new Array(e.length),f=this.alias,d=this.iterator,m=this.start,v=this.end,g=z(m),y=!l;for(t=0,r=e.length;r>t;t++)c=e[t],i=h?c.$key:null,a=h?c.$value:c,s=!b(a),n=!y&&this.getCachedFrag(a,t,i),n?(n.reused=!0,n.scope.$index=t,i&&(n.scope.$key=i),d&&(n.scope[d]=null!==i?i:t),(u||h||s)&&(n.scope[f]=a)):(n=this.create(a,f,t,i),n.fresh=!y),p[t]=n,y&&n.before(v);if(!y){var x=0,w=l.length-p.length;for(t=0,r=l.length;r>t;t++)n=l[t],n.reused||(this.deleteCachedFrag(n),this.remove(n,x++,w,g));var _,S,M,T=0;for(t=0,r=p.length;r>t;t++)n=p[t],_=p[t-1],S=_?_.staggerCb?_.staggerAnchor:_.end||_.node:m,n.reused&&!n.staggerCb?(M=mt(n,m,this.id),M===_||M&&mt(M,m,this.id)===_||this.move(n,S)):this.insert(n,T++,S,g),n.reused=n.fresh=!1}},create:function(e,t,r,n){var i=this._host,o=this._scope||this.vm,a=Object.create(o);a.$refs=Object.create(o.$refs),a.$els=Object.create(o.$els),a.$parent=o,a.$forContext=this,Ce(a,t,e),Ce(a,"$index",r),n?Ce(a,"$key",n):a.$key&&w(a,"$key",null),this.iterator&&Ce(a,this.iterator,null!==n?n:r);var s=this.factory.create(i,a,this._frag);return s.forId=this.id,this.cacheFrag(e,s,r,n),s},updateRef:function(){var e=this.descriptor.ref;if(e){var t,r=(this._scope||this.vm).$refs;this.fromObject?(t={},this.frags.forEach(function(e){t[e.scope.$key]=vt(e)})):t=this.frags.map(vt),r[e]=t}},updateModel:function(){if(this.isOption){var e=this.start.parentNode,t=e&&e.__v_model;t&&t.forceUpdate()}},insert:function(e,t,r,n){e.staggerCb&&(e.staggerCb.cancel(),e.staggerCb=null);var i=this.getStagger(e,t,null,"enter");if(n&&i){var o=e.staggerAnchor;o||(o=e.staggerAnchor=oe("stagger-anchor"),o.__vfrag__=e),X(o,r);var a=e.staggerCb=M(function(){e.staggerCb=null,e.before(o),$(o)});setTimeout(a,i)}else e.before(r.nextSibling)},remove:function(e,t,r,n){if(e.staggerCb)return e.staggerCb.cancel(),void(e.staggerCb=null);var i=this.getStagger(e,t,r,"leave");if(n&&i){var o=e.staggerCb=M(function(){e.staggerCb=null,e.remove()});setTimeout(o,i)}else e.remove()},move:function(e,t){t.nextSibling||this.end.parentNode.appendChild(this.end),e.before(t.nextSibling,!1)},cacheFrag:function(e,t,r,n){var i,a=this.params.trackBy,s=this.cache,c=!b(e);n||a||c?(i=a?"$index"===a?r:e[a]:n||e,s[i]||(s[i]=t)):(i=this.id,o(e,i)?null===e[i]&&(e[i]=t):w(e,i,t)),t.raw=e},getCachedFrag:function(e,t,r){var n,i=this.params.trackBy,o=!b(e);if(r||i||o){var a=i?"$index"===i?t:e[i]:r||e;n=this.cache[a]}else n=e[this.id];return n&&(n.reused||n.fresh),n},deleteCachedFrag:function(e){var t=e.raw,r=this.params.trackBy,n=e.scope,i=n.$index,a=o(n,"$key")&&n.$key,s=!b(t);if(r||a||s){var c=r?"$index"===r?i:t[r]:a||t;this.cache[c]=null}else t[this.id]=null,e.raw=null},getStagger:function(e,t,r,n){n+="Stagger";var i=e.node.__v_trans,o=i&&i.hooks,a=o&&(o[n]||o.stagger);return a?a.call(e,t,r):t*parseInt(this.params[n]||this.params.stagger,10)},_preProcess:function(e){return this.rawValue=e,e},_postProcess:function(e){if(Tr(e))return e;if(x(e)){for(var t,r=Object.keys(e),n=r.length,i=new Array(n);n--;)t=r[n],i[n]={$key:t,$value:e[t]};return i}return"number"==typeof e&&(e=gt(e)),e||[]},unbind:function(){if(this.descriptor.ref&&((this._scope||this.vm).$refs[this.descriptor.ref]=null),this.frags)for(var e,t=this.frags.length;t--;)e=this.frags[t],this.deleteCachedFrag(e),e.destroy()}},Qi={bind:function(){8===this.el.nodeType&&(this.nodes=[],this.anchor=oe("v-html"),Y(this.el,this.anchor))},update:function(e){e=c(e),this.nodes?this.swap(e):this.el.innerHTML=e},swap:function(e){for(var t=this.nodes.length;t--;)$(this.nodes[t]);var r=at(e,!0,!0);this.nodes=g(r.childNodes),W(r,this.anchor)}},Zi={bind:function(){this.attr=3===this.el.nodeType?"data":"textContent"},update:function(e){this.el[this.attr]=c(e)}},Ji={text:Zi,html:Qi,"for":Ki,"if":qi,show:Ni,model:Ui,on:Pi,bind:ki,el:gi,ref:ai,cloak:oi},eo=[],to=!1,ro="transition",no="animation",io=Lr+"Duration",oo=Rr+"Duration",ao=xt.prototype;ao.enter=function(e,t){this.cancelPending(),this.callHook("beforeEnter"),this.cb=t,J(this.el,this.enterClass),e(),this.entered=!1,this.callHookWithCb("enter"),this.entered||(this.cancel=this.hooks&&this.hooks.enterCancelled,yt(this.enterNextTick))},ao.enterNextTick=function(){this.justEntered=!0;var e=this;setTimeout(function(){e.justEntered=!1},17);var t=this.enterDone,r=this.getCssTransitionType(this.enterClass);this.pendingJsCb?r===ro&&ee(this.el,this.enterClass):r===ro?(ee(this.el,this.enterClass),this.setupCssCb(Pr,t)):r===no?this.setupCssCb(Dr,t):t()},ao.enterDone=function(){this.entered=!0,this.cancel=this.pendingJsCb=null,ee(this.el,this.enterClass),this.callHook("afterEnter"),this.cb&&this.cb()},ao.leave=function(e,t){this.cancelPending(),this.callHook("beforeLeave"),this.op=e,this.cb=t,J(this.el,this.leaveClass),this.left=!1,this.callHookWithCb("leave"),this.left||(this.cancel=this.hooks&&this.hooks.leaveCancelled,this.op&&!this.pendingJsCb&&(this.justEntered?this.leaveDone():yt(this.leaveNextTick)))},ao.leaveNextTick=function(){var e=this.getCssTransitionType(this.leaveClass);if(e){var t=e===ro?Pr:Dr;this.setupCssCb(t,this.leaveDone)}else this.leaveDone()},ao.leaveDone=function(){this.left=!0,this.cancel=this.pendingJsCb=null,this.op(),ee(this.el,this.leaveClass),this.callHook("afterLeave"),this.cb&&this.cb(),this.op=null},ao.cancelPending=function(){this.op=this.cb=null;var e=!1;this.pendingCssCb&&(e=!0,Q(this.el,this.pendingCssEvent,this.pendingCssCb),this.pendingCssEvent=this.pendingCssCb=null),this.pendingJsCb&&(e=!0,this.pendingJsCb.cancel(),this.pendingJsCb=null),e&&(ee(this.el,this.enterClass),ee(this.el,this.leaveClass)),this.cancel&&(this.cancel.call(this.vm,this.el),this.cancel=null)},ao.callHook=function(e){this.hooks&&this.hooks[e]&&this.hooks[e].call(this.vm,this.el)},ao.callHookWithCb=function(e){var t=this.hooks&&this.hooks[e];t&&(t.length>1&&(this.pendingJsCb=M(this[e+"Done"])),t.call(this.vm,this.el,this.pendingJsCb))},ao.getCssTransitionType=function(e){if(!(!Pr||document.hidden||this.hooks&&this.hooks.css===!1||wt(this.el))){var t=this.type||this.typeCache[e];if(t)return t;var r=this.el.style,n=window.getComputedStyle(this.el),i=r[io]||n[io];if(i&&"0s"!==i)t=ro;else{var o=r[oo]||n[oo];o&&"0s"!==o&&(t=no)}return t&&(this.typeCache[e]=t),t}},ao.setupCssCb=function(e,t){this.pendingCssEvent=e;var r=this,n=this.el,i=this.pendingCssCb=function(o){o.target===n&&(Q(n,e,i),r.pendingCssEvent=r.pendingCssCb=null,!r.pendingJsCb&&t&&t())};K(n,e,i)};var so={priority:ui,update:function(e,t){var r=this.el,n=xe(this.vm.$options,"transitions",e);e=e||"v",r.__v_trans=new xt(r,e,n,this.el.__vue__||this.vm),t&&ee(r,t+"-transition"),J(r,e+"-transition")}},co=hn._propBindingModes,ho={bind:function(){var e=this.vm,t=e._context,r=this.descriptor.prop,n=r.path,i=r.parentPath,o=r.mode===co.TWO_WAY,a=this.parentWatcher=new $e(t,i,function(t){t=fe(r,t),pe(r,t)&&(e[n]=t)},{twoWay:o,filters:r.filters,scope:this._scope});if(le(e,r,a.value),o){var s=this;e.$once("pre-hook:created",function(){s.childWatcher=new $e(e,n,function(e){a.set(e)},{sync:!0})})}},unbind:function(){this.parentWatcher.teardown(),this.childWatcher&&this.childWatcher.teardown()}},uo={priority:pi,params:["keep-alive","transition-mode","inline-template"],bind:function(){this.el.__vue__||(this.keepAlive=this.params.keepAlive,this.keepAlive&&(this.cache={}),this.params.inlineTemplate&&(this.inlineTemplate=te(this.el,!0)),this.pendingComponentCb=this.Component=null,this.pendingRemovals=0,this.pendingRemovalCb=null,this.anchor=oe("v-component"),Y(this.el,this.anchor),this.el.removeAttribute("is"),this.descriptor.ref&&this.el.removeAttribute("v-ref:"+d(this.descriptor.ref)),this.literal&&this.setComponent(this.expression))},update:function(e){this.literal||this.setComponent(e)},setComponent:function(e,t){if(this.invalidatePending(),e){var r=this;this.resolveComponent(e,function(){r.mountComponent(t)})}else this.unbuild(!0),this.remove(this.childVM,t),this.childVM=null},resolveComponent:function(e,t){var r=this;this.pendingComponentCb=M(function(n){r.ComponentName=n.options.name||e,r.Component=n,t()}),this.vm._resolveComponent(e,this.pendingComponentCb)},mountComponent:function(e){this.unbuild(!0);var t=this,r=this.Component.options.activate,n=this.getCached(),i=this.build();r&&!n?(this.waitingFor=i,r.call(i,function(){t.waitingFor===i&&(t.waitingFor=null,t.transition(i,e))})):(n&&i._updateRef(),this.transition(i,e))},invalidatePending:function(){this.pendingComponentCb&&(this.pendingComponentCb.cancel(),this.pendingComponentCb=null)},build:function(e){var t=this.getCached();if(t)return t;if(this.Component){var r={name:this.ComponentName,el:ot(this.el),template:this.inlineTemplate,parent:this._host||this.vm,_linkerCachable:!this.inlineTemplate,_ref:this.descriptor.ref,_asComponent:!0,_isRouterView:this._isRouterView,_context:this.vm,_scope:this._scope,_frag:this._frag};e&&y(r,e);var n=new this.Component(r);return this.keepAlive&&(this.cache[this.Component.cid]=n),n}},getCached:function(){return this.keepAlive&&this.cache[this.Component.cid]},unbuild:function(e){this.waitingFor&&(this.waitingFor.$destroy(),this.waitingFor=null);var t=this.childVM;return!t||this.keepAlive?void(t&&t._updateRef(!0)):void t.$destroy(!1,e)},remove:function(e,t){var r=this.keepAlive;if(e){this.pendingRemovals++,this.pendingRemovalCb=t;var n=this;e.$remove(function(){n.pendingRemovals--,r||e._cleanup(),!n.pendingRemovals&&n.pendingRemovalCb&&(n.pendingRemovalCb(),n.pendingRemovalCb=null)})}else t&&t()},transition:function(e,t){var r=this,n=this.childVM;switch(this.childVM=e,r.params.transitionMode){case"in-out":e.$before(r.anchor,function(){r.remove(n,t)});break;case"out-in":r.remove(n,function(){e.$before(r.anchor,t)});break;default:r.remove(n),e.$before(r.anchor,t)}},unbind:function(){if(this.invalidatePending(),this.unbuild(),this.cache){for(var e in this.cache)this.cache[e].$destroy();this.cache=null}}},lo={deep:!0,update:function(e){e&&"string"==typeof e?this.handleObject(_t(e)):x(e)?this.handleObject(e):Tr(e)?this.handleArray(e):this.cleanup()},handleObject:function(e){this.cleanup(e);for(var t=this.prevKeys=Object.keys(e),r=0,n=t.length;n>r;r++){var i=t[r];e[i]?J(this.el,i):ee(this.el,i)}},handleArray:function(e){this.cleanup(e);for(var t=0,r=e.length;r>t;t++)e[t]&&J(this.el,e[t]);this.prevKeys=e.slice()},cleanup:function(e){if(this.prevKeys)for(var t=this.prevKeys.length;t--;){var r=this.prevKeys[t];!r||e&&St(e,r)||ee(this.el,r)}}},po={style:Si,"class":lo,component:uo,prop:ho,transition:so},fo=hn._propBindingModes,mo={},vo=/^[$_a-zA-Z]+[\w$]*$/,go=/^v-bind:|^:/,yo=/^v-on:|^@/,bo=/:(.*)$/,xo=/\.[^\.]+/g,wo=/^(v-bind:|:)?transition$/,_o=["for","if"],So=1e3;Wt.terminal=!0;var Mo=/[^\w\-:\.]/,To=Object.freeze({compile:Ct,compileAndLinkProps:Rt,compileRoot:Dt,terminalDirectives:_o,transclude:Qt}),Eo=/^v-on:|^@/;ir.prototype._bind=function(){var e=this.name,t=this.descriptor;if(("cloak"!==e||this.vm._isCompiled)&&this.el&&this.el.removeAttribute){var r=t.attr||"v-"+e;this.el.removeAttribute(r)}var n=t.def;if("function"==typeof n?this.update=n:y(this,n),this._setupParams(),this.bind&&this.bind(),this._bound=!0,this.literal)this.update&&this.update(t.raw);else if((this.expression||this.modifiers)&&(this.update||this.twoWay)&&!this._checkStatement()){var i=this;this.update?this._update=function(e,t){i._locked||i.update(e,t)}:this._update=nr;var o=this._preProcess?v(this._preProcess,this):null,a=this._postProcess?v(this._postProcess,this):null,s=this._watcher=new $e(this.vm,this.expression,this._update,{filters:this.filters,twoWay:this.twoWay,deep:this.deep,preProcess:o,postProcess:a,scope:this._scope});this.afterBind?this.afterBind():this.update&&this.update(s.value)}},ir.prototype._setupParams=function(){if(this.params){var e=this.params;this.params=Object.create(null);for(var t,r,n,i=e.length;i--;)t=e[i],n=p(t),r=G(this.el,t),null!=r?this._setupParamWatcher(n,r):(r=I(this.el,t),null!=r&&(this.params[n]=""===r?!0:r))}},ir.prototype._setupParamWatcher=function(e,t){var r=this,n=!1,i=(this._scope||this.vm).$watch(t,function(t,i){if(r.params[e]=t,n){var o=r.paramWatchers&&r.paramWatchers[e];o&&o.call(r,t,i)}else n=!0},{immediate:!0,user:!1});(this._paramUnwatchFns||(this._paramUnwatchFns=[])).push(i)},ir.prototype._checkStatement=function(){var e=this.expression;if(e&&this.acceptStatement&&!Ie(e)){var t=ze(e).get,r=this._scope||this.vm,n=function(e){r.$event=e,t.call(r,r),r.$event=null};return this.filters&&(n=r._applyFilters(n,null,this.filters)),this.update(n),!0}},ir.prototype.set=function(e){this.twoWay&&this._withLock(function(){this._watcher.set(e)})},ir.prototype._withLock=function(e){var t=this;t._locked=!0,e.call(t),Fr(function(){t._locked=!1})},ir.prototype.on=function(e,t){K(this.el,e,t),(this._listeners||(this._listeners=[])).push([e,t])},ir.prototype._teardown=function(){if(this._bound){this._bound=!1,this.unbind&&this.unbind(),this._watcher&&this._watcher.teardown();var e,t=this._listeners;if(t)for(e=t.length;e--;)Q(this.el,t[e][0],t[e][1]);var r=this._paramUnwatchFns;if(r)for(e=r.length;e--;)r[e]();this.vm=this.el=this._watcher=this._listeners=null}};var Co=/[^|]\|[^|]/;Ae(pr),tr(pr),rr(pr),or(pr),ar(pr),sr(pr),cr(pr),hr(pr),ur(pr),lr(pr);var Ao=Ki._postProcess,ko=/(\d{3})(?=\d)/g,Lo={orderBy:mr,filterBy:dr,limitBy:fr,json:{read:function(e,t){return"string"==typeof e?e:JSON.stringify(e,null,Number(t)||2)},write:function(e){try{return JSON.parse(e)}catch(t){return e}}},capitalize:function(e){return e||0===e?(e=e.toString(),e.charAt(0).toUpperCase()+e.slice(1)):""},uppercase:function(e){return e||0===e?e.toString().toUpperCase():""},lowercase:function(e){return e||0===e?e.toString().toLowerCase():""},currency:function(e,t){if(e=parseFloat(e),!isFinite(e)||!e&&0!==e)return"";t=null!=t?t:"$";var r=Math.abs(e).toFixed(2),n=r.slice(0,-3),i=n.length%3,o=i>0?n.slice(0,i)+(n.length>3?",":""):"",a=r.slice(-3),s=0>e?"-":"";return t+s+o+n.slice(i).replace(ko,"$1,")+a},pluralize:function(e){var t=g(arguments,1);return t.length>1?t[e%10-1]||t[t.length-1]:t[0]+(1===e?"":"s")},debounce:function(e,t){return e?(t||(t=300),_(e,t)):void 0}},Po={priority:fi,params:["name"],paramWatchers:{name:function(e){qi.remove.call(this),e&&this.insert(e)}},bind:function(){this.anchor=oe("v-partial"),Y(this.el,this.anchor),this.insert(this.params.name)},insert:function(e){var t=xe(this.vm.$options,"partials",e);t&&(this.factory=new dt(this.vm,t),qi.insert.call(this))},unbind:function(){this.frag&&this.frag.destroy()}},Ro={priority:vi,bind:function(){var e=this.vm,t=e.$options._content;if(!t)return void this.fallback();var r=e._context,n=this.params&&this.params.name;if(n){var i='[slot="'+n+'"]',o=t.querySelectorAll(i);o.length?this.tryCompile(gr(o,t),r,e):this.fallback()}else this.tryCompile(gr(t.childNodes,t,!0),r,e)},tryCompile:function(e,t,r){e.hasChildNodes()?this.compile(e,t,r):this.fallback()},compile:function(e,t,r){if(e&&t){var n=r?r._scope:this._scope;this.unlink=t.$compile(e,r,n,this._frag)}e?Y(this.el,e):$(this.el)},fallback:function(){this.compile(te(this.el,!0),this.vm)},unbind:function(){this.unlink&&this.unlink()}},Do=y(y({},Ro),{priority:Ro.priority+1,params:["name"]}),Oo={slot:Ro,_namedSlot:Do,partial:Po};pr.version="1.0.15",pr.options={directives:Ji,elementDirectives:Oo,filters:Lo,transitions:{},components:{},partials:{},replace:!0},t.exports=pr},{}],39:[function(e,t,r){var n=r.cache={};r.insert=function(e){if(!n[e]){n[e]=!0;var t=document.createElement("style");return t.setAttribute("type","text/css"),"textContent"in t?t.textContent=e:t.styleSheet.cssText=e,document.getElementsByTagName("head")[0].appendChild(t),t}}},{}],40:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0}),r.createLogger=r.Store=void 0;var a=e("./util"),s=e("./middlewares/devtool"),c=n(s),h=e("./middlewares/logger"),u=n(h),l=void 0,p=r.Store=function(){function e(){var t=this,r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=r.state,o=void 0===n?{}:n,a=r.actions,s=void 0===a?{}:a,c=r.mutations,h=void 0===c?{}:c,u=r.middlewares,p=void 0===u?[]:u,f=r.strict,d=void 0===f?!1:f;i(this,e);var m=this.dispatch;this.dispatch=function(){for(var e=arguments.length,r=Array(e),n=0;e>n;n++)r[n]=arguments[n];m.apply(t,r)},this._vm=new l({data:o}),this._dispatching=!1,this.actions=Object.create(null),this._setupActions(s),this._setupMutations(h),this._setupMiddlewares(p,o),d&&this._setupMutationCheck()}return o(e,[{key:"dispatch",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;t>n;n++)r[n-1]=arguments[n];var i=this._mutations[e],o=this._prevSnapshot,s=this.state,c=void 0,h=void 0;i?(this._dispatching=!0,Array.isArray(i)?i.forEach(function(e){return e.apply(void 0,[s].concat(r))}):i.apply(void 0,[s].concat(r)),this._dispatching=!1,this._needSnapshots&&(c=this._prevSnapshot=(0,a.deepClone)(s),h=(0,a.deepClone)(r)),this._middlewares.forEach(function(t){t.onMutation&&(t.snapshot?t.onMutation({type:e,payload:h},c,o):t.onMutation({type:e,payload:r},s))})):console.warn("[vuex] Unknown mutation: "+e)}},{key:"hotUpdate",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.actions,r=e.mutations;t&&this._setupActions(t,!0),r&&this._setupMutations(r)}},{key:"_setupMutationCheck",value:function(){var e=this,t=this._vm.$watch("__vuex__",function(e){return e}),r=this._vm._watchers[0].constructor;t(),new r(this._vm,"$data",function(){if(!e._dispatching)throw new Error("[vuex] Do not mutate vuex store state outside mutation handlers.")},{deep:!0,sync:!0})}},{key:"_setupActions",value:function(e,t){var r=this;this._actions=Object.create(null),e=Array.isArray(e)?(0,a.mergeObjects)(e):e,Object.keys(e).forEach(function(t){r._actions[t]=(0,a.createAction)(e[t],r),r.actions[t]||(r.actions[t]=function(){var e;return(e=r._actions)[t].apply(e,arguments)})}),t&&Object.keys(this.actions).forEach(function(t){e[t]||delete r.actions[t]})}},{key:"_setupMutations",value:function(e){this._mutations=Array.isArray(e)?(0,a.mergeObjects)(e,!0):e}},{key:"_setupMiddlewares",value:function(e,t){this._middlewares=[c["default"]].concat(e),this._needSnapshots=e.some(function(e){return e.snapshot}),this._needSnapshots&&console.log("[vuex] One or more of your middlewares are taking state snapshots for each mutation. Make sure to use them only during development.");var r=this._prevSnapshot=this._needSnapshots?(0,a.deepClone)(t):null;this._middlewares.forEach(function(e){e.onInit&&e.onInit(e.snapshot?r:t)})}},{key:"state",get:function(){return this._vm._data},set:function(e){throw new Error("[vuex] Vuex root state is read only.")}}]),e}();r.createLogger=u["default"],r["default"]={Store:p,createLogger:u["default"],install:function(e){l=e}}},{"./middlewares/devtool":41,"./middlewares/logger":42,"./util":43}],41:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]={onInit:function(e){},onMutation:function(e,t){}},t.exports=r["default"]},{}],42:[function(e,t,r){"use strict";function n(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.collapsed,r=void 0===t?!0:t,n=(e.transformer,e.mutationTransformer),i=void 0===n?function(e){return e}:n;return{snapshot:!0,onMutation:function(e,t,n){if("undefined"!=typeof console){var a=new Date,s=" @ "+o(a.getHours(),2)+":"+o(a.getMinutes(),2)+":"+o(a.getSeconds(),2)+"."+o(a.getMilliseconds(),3),c=i(e),h="mutation "+e.type+s,u=r?console.groupCollapsed:console.group;try{u.call(console,h)}catch(l){console.log(h)}console.log("%c prev state","color: #9E9E9E; font-weight: bold",n),console.log("%c mutation","color: #03A9F4; font-weight: bold",c),console.log("%c next state","color: #4CAF50; font-weight: bold",t);try{console.groupEnd()}catch(l){console.log(" log end ")}}}}}function i(e,t){return new Array(t+1).join(e)}function o(e,t){return i("0",t-e.toString().length)+e}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n,t.exports=r["default"]},{}],43:[function(e,t,r){"use strict";function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function i(e,t){return"string"==typeof e?function(){for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];return t.dispatch.apply(t,[e].concat(n))}:"function"==typeof e?function(){for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];return e.apply(void 0,[t].concat(n))}:void 0}function o(e,t){return e.reduce(function(e,r){return Object.keys(r).forEach(function(n){var i=e[n];i?t?Array.isArray(i)?i.push(r[n]):e[n]=[e[n],r[n]]:console.warn("[vuex] Duplicate action: "+n):e[n]=r[n]}),e},{})}function a(e){if(Array.isArray(e))return e.map(a);if(e&&"object"===("undefined"==typeof e?"undefined":n(e))){for(var t={},r=Object.keys(e),i=0,o=r.length;o>i;i++){var s=r[i];t[s]=a(e[s])}return t}return e}Object.defineProperty(r,"__esModule",{value:!0}),r.createAction=i,r.mergeObjects=o,r.deepClone=a},{}],44:[function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e("vueify-insert-css").insert("html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}#app{font:100% Helvetica,sans-serif;color:#42b983}.sections{position:absolute}");Object.defineProperty(r,"__esModule",{value:!0});var i=e("./display/components/Footer.vue"),o=n(i),a=e("./display/components/Background.vue"),s=n(a),c=e("./display/sections/Preloader.vue"),h=n(c),u=e("./display/sections/About.vue"),l=n(u),p=e("./store/preloader"),f=n(p);r["default"]={components:{ComponentFooter:o["default"],SectionPreloader:h["default"],SectionAbout:l["default"],ComponentBackground:s["default"]},data:function(){return{}},computed:{isLoaded:function(){return f["default"].state.progress>=1},isHidden:function(){return f["default"].state.isHidden}}},t.exports.__esModule&&(t.exports=t.exports["default"]),("function"==typeof t.exports?t.exports.options:t.exports).template="<div id=app><component-footer></component-footer><section-preloader v-if=!isHidden></section-preloader><section-about></section-about><router-view class=sections v-if=isLoaded></router-view><component-background v-if=isLoaded></component-background></div>"},{"./display/components/Background.vue":47,"./display/components/Footer.vue":48,"./display/sections/About.vue":53,"./display/sections/Preloader.vue":54,"./store/preloader":66,"vueify-insert-css":39}],45:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]={mockingjay:{backgroundColor:"#ff0000",title:"Mockingjay - Part II",client:"Lionsgate",category:"Interactive poster creator",description:"Mockingjay..."},"mission-impossible":{backgroundColor:"#00ff00",title:"Mission Impossible",client:"Paramount pictures",category:"Official website",description:"Mission Impossible... [DESC]"},"into-the-storm":{backgroundColor:"#0000ff",title:"Go #IntoTheStorm",client:"Warner Bros.",category:"Oculus Rift 4D Experience",description:"Into The Storm... [DESC]"},"magic-mirror":{backgroundColor:"#ff00ff",title:"Magic Mirror",client:"Porsche",category:"Live vehicle transformation",description:"Porsche... [DESC]"},"caines-quest":{backgroundColor:"#ffff00",title:"Caine's quest",client:"Warner Bros.",category:"First-person WebGL game",description:"Jupiter Ascending... [DESC]"},"edge-of-tomorrow":{backgroundColor:"#000000",title:"Edge of Tomorrow",client:"Warner Bros.",category:"Motion poster creator",description:"Edge of Tomorrow... [DESC]"}}},{}],46:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(t){t.on("/project/:id",{name:"project",component:e("../display/sections/Project.vue")}),t.redirect({"*":"/project/"+(0,a["default"])(c["default"])[0]}),t.afterEach(function(e){})}Object.defineProperty(r,"__esModule",{value:!0}),r.configRouter=i;var o=e("babel-runtime/core-js/object/keys"),a=n(o),s=e("../api/projects"),c=n(s)},{"../api/projects":45,"../display/sections/Project.vue":55,"babel-runtime/core-js/object/keys":3}],47:[function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e("vueify-insert-css").insert(".component-background{position:absolute;z-index:-1;-webkit-transition:background-color 1s linear;transition:background-color 1s linear}");Object.defineProperty(r,"__esModule",{value:!0});var i=e("brindille-resize"),o=n(i),a=e("dom-css"),s=n(a),c=e("../../api/projects"),h=n(c),u=e("../../store/project"),l=n(u);r["default"]={data:function(){return{}},computed:{backgroundColor:function(){return h["default"][l["default"].state.project].backgroundColor}},attached:function(){this.resize(),o["default"].addListener(this.resize)},detached:function(){o["default"].removeListener(this.resize)},methods:{resize:function(){(0,s["default"])(this.$el,{width:o["default"].width,height:o["default"].height})}}},t.exports.__esModule&&(t.exports=t.exports["default"]),("function"==typeof t.exports?t.exports.options:t.exports).template='<div class=component-background v-bind:style="{ backgroundColor: backgroundColor }"></div>'},{"../../api/projects":45,"../../store/project":67,"brindille-resize":7,"dom-css":24,"vueify-insert-css":39}],48:[function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e("vueify-insert-css").insert(".component-footer{position:absolute;z-index:1}.component-footer .links{width:100%;height:auto;padding:0 0 1em;text-align:center;color:#000}.component-footer a{padding:0 0 2px;font-size:.8em;color:#000;text-decoration:none;border-bottom:1px solid #000}");Object.defineProperty(r,"__esModule",{value:!0});var i=e("brindille-resize"),o=n(i),a=e("dom-css"),s=n(a);r["default"]={data:function(){return{}},attached:function(){this.reset(),this.show(),o["default"].addListener(this.resize)},detached:function(){o["default"].removeListener(this.resize)},methods:{reset:function(){this.resize()},resize:function(){(0,s["default"])(this.$el,{width:o["default"].width,top:o["default"].height-this.$els.links.offsetHeight})},show:function(){},hide:function(){}}},t.exports.__esModule&&(t.exports=t.exports["default"]),("function"==typeof t.exports?t.exports.options:t.exports).template='<footer class=component-footer><div v-el:links="" class=links><a href=https://twitter.com/jmsaulnier target=_blank>Twitter</a> - <a href=https://github.com/jmsaulnier target=_blank>Github</a> - <a href=https://ca.linkedin.com/in/jmsaulnier target=_blank>Linkedin</a></div></footer>'},{"brindille-resize":7,"dom-css":24,"vueify-insert-css":39}],49:[function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e("vueify-insert-css").insert(".component-project-details{position:absolute;z-index:1}.component-project-details .background{position:absolute;top:0;z-index:-1;width:100%;height:100%;background-color:#000;opacity:.4}");Object.defineProperty(r,"__esModule",{value:!0});var i=e("vue"),o=n(i),a=e("velocity-animate"),s=n(a),c=e("brindille-resize"),h=n(c),u=e("dom-css"),l=n(u),p=e("../../../store/project"),f=n(p);r["default"]={data:function(){return{}},attached:function(){this.reset(),h["default"].addListener(this.resize)},detached:function(){h["default"].removeListener(this.resize)},
methods:{reset:function(){this.resize()},resize:function(){(0,l["default"])(this.$el,{width:h["default"].width,height:h["default"].height})},closeDetails:function(){f["default"].actions.closeDetails()}}},o["default"].transition("project-details",{css:!1,enter:function(e,t){(0,s["default"])(e.querySelector(".background"),{opacity:[.4,"easeInSine",0]},{duration:400,complete:function(){t()}})},leave:function(e,t){(0,s["default"])(e.querySelector(".background"),{opacity:[0,"easeInSine",.4]},{duration:400,complete:function(){t()}})}}),t.exports.__esModule&&(t.exports=t.exports["default"]),("function"==typeof t.exports?t.exports.options:t.exports).template="<aside class=component-project-details>[Details]<div v-el=background @click=closeDetails class=background></div></aside>"},{"../../../store/project":67,"brindille-resize":7,"dom-css":24,"velocity-animate":36,vue:38,"vueify-insert-css":39}],50:[function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e("vueify-insert-css").insert(".component-project-navigation a{position:absolute;z-index:1;display:inline-block;padding:.4em;color:#000;border:1px solid #000;cursor:pointer}.component-project-navigation .previous{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.component-project-navigation .next{-webkit-transform:rotate(90deg);transform:rotate(90deg)}");Object.defineProperty(r,"__esModule",{value:!0});var i=e("babel-runtime/core-js/object/keys"),o=n(i),a=e("velocity-animate"),s=(n(a),e("brindille-resize")),c=n(s),h=e("dom-css"),u=n(h),l=e("../../../api/projects"),p=n(l),f=e("../../../store/project"),d=n(f);r["default"]={data:function(){return{}},computed:{index:function(){return this.getIndex(d["default"].state.project)}},attached:function(){this.reset(),c["default"].addListener(this.resize)},detached:function(){c["default"].removeListener(this.resize)},methods:{reset:function(){this.resize()},resize:function(){(0,u["default"])(this.$els.previous,{top:.5*(c["default"].height-this.$els.previous.offsetHeight),left:.5*-(this.$els.previous.offsetWidth-this.$els.previous.offsetHeight)+.02*c["default"].width}),(0,u["default"])(this.$els.next,{top:.5*(c["default"].height-this.$els.next.offsetHeight),left:c["default"].width-.5*(this.$els.next.offsetWidth+this.$els.next.offsetHeight)-.02*c["default"].width})},navigate:function(e){"next"==e?this.$router.go({name:"project",params:{id:this.getProject(this.index+1)}}):this.$router.go({name:"project",params:{id:this.getProject(this.index-1)}})},getProject:function(e){var t=0,r="";return e>(0,o["default"])(p["default"]).length&&(e=0),0>e&&(e=(0,o["default"])(p["default"]).length-1),(0,o["default"])(p["default"]).forEach(function(n){e===t&&(r=n),t++}),r},getIndex:function(e){var t=0,r=0;return(0,o["default"])(p["default"]).forEach(function(n){e===n&&(r=t),t++}),r}}},t.exports.__esModule&&(t.exports=t.exports["default"]),("function"==typeof t.exports?t.exports.options:t.exports).template='<div class=component-project-navigation><a v-el:previous="" class=previous @click="navigate(\'previous\')">Previous</a> <a v-el:next="" class=next @click="navigate(\'next\')">Next</a></div>'},{"../../../api/projects":45,"../../../store/project":67,"babel-runtime/core-js/object/keys":3,"brindille-resize":7,"dom-css":24,"velocity-animate":36,"vueify-insert-css":39}],51:[function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e("vueify-insert-css").insert(".component-project-sketch canvas{width:100%;height:100%}");Object.defineProperty(r,"__esModule",{value:!0});var i=e("vue"),o=n(i),a=e("velocity-animate"),s=n(a),c=e("brindille-resize"),h=n(c),u=e("dom-css"),l=n(u),p=e("../../../store/project"),f=(n(p),e("../../sketch/project/loader")),d=n(f);r["default"]={props:{project:{type:String,required:!0}},data:function(){return{sketch:null}},attached:function(){this.reset(),h["default"].addListener(this.resize),this.sketch=(0,d["default"])(this.project,this.$el),this.sketch.load()},detached:function(){h["default"].removeListener(this.resize),this.sketch.unload(),this.sketch=null},methods:{reset:function(){this.resize()},resize:function(){(0,l["default"])(this.$el,{width:h["default"].width,height:h["default"].height})}}},o["default"].transition("project-sketch",{css:!1,enter:function(e,t){(0,s["default"])(e,{opacity:[1,"easeInSine",0]},{duration:400,complete:function(){t()}})},leave:function(e,t){(0,s["default"])(e,{opacity:[0,"easeInSine",1]},{duration:400,complete:function(){t()}})}}),t.exports.__esModule&&(t.exports=t.exports["default"]),("function"==typeof t.exports?t.exports.options:t.exports).template="<div class=component-project-sketch></div>"},{"../../../store/project":67,"../../sketch/project/loader":59,"brindille-resize":7,"dom-css":24,"velocity-animate":36,vue:38,"vueify-insert-css":39}],52:[function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e("vueify-insert-css").insert(".component-project-title{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;text-align:center;color:#fff;font-size:3em;-webkit-perspective:600px;perspective:600px}.component-project-title h2,.component-project-title h3{position:relative;display:inline-block;background-color:#000}.component-project-title h2{margin-bottom:.5em;font-size:1em}@media screen and (max-width:40em){.component-project-title h2{font-size:.6em}}.component-project-title h3{font-size:.5em}@media screen and (max-width:40em){.component-project-title h3{font-size:.4em}}.component-project-title h4{cursor:pointer;font-weight:400;font-size:.3em}@media screen and (max-width:40em){.component-project-title h4{font-size:.2em}}");Object.defineProperty(r,"__esModule",{value:!0});var i=e("vue"),o=n(i),a=e("velocity-animate"),s=n(a),c=e("brindille-resize"),h=n(c),u=e("dom-css"),l=n(u),p=e("../../../api/projects"),f=n(p),d=e("../../../store/project"),m=n(d);r["default"]={props:{project:{type:String,required:!0}},data:function(){return{title:f["default"][this.project].title,category:f["default"][this.project].category}},attached:function(){this.reset(),h["default"].addListener(this.resize)},detached:function(){h["default"].removeListener(this.resize)},methods:{reset:function(){this.resize()},resize:function(){(0,l["default"])(this.$el,{width:h["default"].width,height:h["default"].height})},openDetails:function(){m["default"].actions.openDetails()}}},o["default"].transition("project-title",{css:!1,enter:function(e,t){(0,s["default"])(e,{opacity:[1,"easeInSine",0],translateY:[0,"easeInSine",.1*-h["default"].height]},{duration:400,complete:function(){t()}})},leave:function(e,t){(0,s["default"])(e,{opacity:[0,"easeInSine",1],translateY:[.1*h["default"].height,"easeInSine",0]},{duration:400,complete:function(){t()}})}}),t.exports.__esModule&&(t.exports=t.exports["default"]),("function"==typeof t.exports?t.exports.options:t.exports).template="<span class=component-project-title><span><h2>{{title}}</h2><br><h3>{{category}}</h3><h4><a @click=openDetails>View details</a></h4></span></span>"},{"../../../api/projects":45,"../../../store/project":67,"brindille-resize":7,"dom-css":24,"velocity-animate":36,vue:38,"vueify-insert-css":39}],53:[function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e("vueify-insert-css").insert(".section-about{position:absolute;z-index:1;color:#000}.section-about .open{display:inline-block;position:relative;font-size:.9em;cursor:pointer}.section-about .container{position:absolute;top:0;opacity:0}.section-about .background{position:absolute;top:0;z-index:-1;width:100%;height:100%;background-color:#fff}");Object.defineProperty(r,"__esModule",{value:!0});var i=e("vue"),o=n(i),a=e("velocity-animate"),s=n(a),c=e("brindille-resize"),h=n(c),u=e("dom-css"),l=n(u),p=e("../../store/about"),f=n(p);r["default"]={data:function(){return{}},computed:{isOpen:function(){return f["default"].state.isOpen}},attached:function(){this.resize(),h["default"].addListener(this.resize)},detached:function(){h["default"].removeListener(this.resize)},methods:{resize:function(){(0,l["default"])(this.$els.container,{width:h["default"].width,height:h["default"].height}),(0,l["default"])(this.$els.open,{top:.02*h["default"].width,left:.02*h["default"].width})},open:function(){f["default"].actions.open()},close:function(){f["default"].actions.close()}}},o["default"].transition("about-open",{css:!1,enter:function(e,t){(0,s["default"])(e,{opacity:[1,"easeInSine",0],translateX:[0,"easeInSine",.01*-h["default"].width]},{duration:200,delay:300,complete:function(){t()}})},leave:function(e,t){(0,s["default"])(e,{opacity:[0,"easeInSine",1],translateX:[.01*-h["default"].width,"easeInSine",0]},{duration:200,complete:function(){t()}})}}),o["default"].transition("about-container",{css:!1,enter:function(e,t){(0,s["default"])(e,{opacity:[.8,"easeInSine",0]},{duration:400,delay:200,complete:function(){t()}})},leave:function(e,t){(0,s["default"])(e,{opacity:[0,"easeInSine",.8]},{duration:400,complete:function(){t()}})}}),t.exports.__esModule&&(t.exports=t.exports["default"]),("function"==typeof t.exports?t.exports.options:t.exports).template='<div class=section-about><a v-el:open="" v-show=!isOpen class=open @click=open transition=about-open> About</a><aside v-el:container="" class=container v-show=isOpen transition=about-container>... Blablabla<div v-el:background="" @click=close class=background></div></aside></div>'},{"../../store/about":65,"brindille-resize":7,"dom-css":24,"velocity-animate":36,vue:38,"vueify-insert-css":39}],54:[function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e("vueify-insert-css").insert(".section-preloader{position:absolute;z-index:2}.section-preloader .background-bottom,.section-preloader .background-top{width:100%;height:50%;background-color:#fff}.section-preloader .loading{position:absolute;z-index:1;top:50%;width:100%;height:1px;background-color:#ccc}.section-preloader .loading-progress{width:100%;height:100%;background-color:#333;-webkit-transform-origin:0 0;transform-origin:0 0}");Object.defineProperty(r,"__esModule",{value:!0});var i=e("velocity-animate"),o=n(i),a=e("brindille-preloader"),s=n(a),c=e("brindille-resize"),h=n(c),u=e("dom-css"),l=n(u),p=e("../../store/preloader"),f=n(p),d=e("../../manifest"),m=n(d);r["default"]={data:function(){return{}},attached:function(){this.reset(),this.show(),h["default"].addListener(this.resize),s["default"].on("progress",this.loaderProgressHandler),s["default"].on("complete",this.loaderCompleteHandler),s["default"].on("error",this.loaderErrorHandler),s["default"].load(m["default"])},detached:function(){h["default"].removeListener(this.resize)},methods:{reset:function(){this.resize(),(0,o["default"])(this.$els.loadingProgress,{scaleX:0},{duration:0})},resize:function(){(0,l["default"])(this.$el,{width:h["default"].width,height:h["default"].height})},show:function(){(0,o["default"])(this.$els.loading,{opacity:[1,0]},{duration:200})},updateLoadingProgress:function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];f["default"].actions.progressUpdate(e),(0,o["default"])(this.$els.loadingProgress,{scaleX:e},{duration:400,easing:"easeInOutExpo",queue:!1,complete:function(){r&&t.hide()}})},loaderProgressHandler:function(e){this.updateLoadingProgress(e.completedCount/e.totalCount)},loaderCompleteHandler:function(){s["default"].off("progress",this.loaderProgressHandler),s["default"].off("complete",this.loaderCompleteHandler),s["default"].off("error",this.loaderErrorHandler),this.updateLoadingProgress(1,!0)},hide:function(){(0,o["default"])(this.$els.loading,{opacity:0},{duration:0,delay:100}),(0,o["default"])(this.$els.backgroundBottom,{translateY:"100%"},{duration:1e3,delay:100,easing:"easeInOutCubic"}),(0,o["default"])(this.$els.backgroundTop,{translateY:"-100%"},{duration:1e3,delay:100,easing:"easeInOutCubic",complete:function(){f["default"].actions.hide()}})}}},t.exports.__esModule&&(t.exports=t.exports["default"]),("function"==typeof t.exports?t.exports.options:t.exports).template='<section class=section-preloader><div v-el:loading="" class=loading><div v-el:loading-progress="" class=loading-progress></div></div><div v-el:background-top="" class=background-top></div><div v-el:background-bottom="" class=background-bottom></div></section>'},{"../../manifest":64,"../../store/preloader":66,"brindille-preloader":6,"brindille-resize":7,"dom-css":24,"velocity-animate":36,"vueify-insert-css":39}],55:[function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}e("vueify-insert-css").insert(".section-project{color:#ff0}.section-project .titles{position:absolute;z-index:2}.section-project .sketches{position:absolute;z-index:1}");Object.defineProperty(r,"__esModule",{value:!0});var i=e("../components/project/Sketch.vue"),o=n(i),a=e("../components/project/Title.vue"),s=n(a),c=e("../components/project/Navigation.vue"),h=n(c),u=e("../components/project/Details.vue"),l=n(u),p=e("../../api/projects"),f=n(p),d=e("../../store/project"),m=n(d),v=e("../../store/about"),g=n(v);r["default"]={components:{ComponentProjectSketch:o["default"],ComponentProjectTitle:s["default"],ComponentProjectNavigation:h["default"],ComponentProjectDetails:l["default"]},route:{data:function(e){f["default"][this.$route.params.id]?(this.projects.push(this.$route.params.id),this.projects.length>1&&this.projects.shift(),m["default"].actions.update(this.$route.params.id)):e.redirect("/"),g["default"].actions.close()}},data:function(){return{projects:[]}},computed:{isDetailsOpen:function(){return m["default"].state.isDetailsOpen}},attached:function(){},detached:function(){},methods:{}},t.exports.__esModule&&(t.exports=t.exports["default"]),("function"==typeof t.exports?t.exports.options:t.exports).template='<section class=section-project><component-project-details v-if=isDetailsOpen transition=project-details></component-project-details><div class=titles v-for="project in projects" transition=project-title><component-project-title v-bind:project=project></component-project-title></div><component-project-navigation></component-project-navigation><div class=sketches v-for="project in projects" transition=project-sketch><component-project-sketch v-bind:project=project></component-project-sketch></div></section>'},{"../../api/projects":45,"../../store/about":65,"../../store/project":67,"../components/project/Details.vue":49,"../components/project/Navigation.vue":50,"../components/project/Sketch.vue":51,"../components/project/Title.vue":52,"vueify-insert-css":39}],56:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("babel-runtime/helpers/classCallCheck"),o=n(i),a=e("babel-runtime/helpers/createClass"),s=n(a),c=function(){function e(t){(0,o["default"])(this,e),this.domElement=t,this.isLoaded=!1}return(0,s["default"])(e,[{key:"load",value:function(){console.log("caines-quest -- load"),this.isLoaded=!0}},{key:"unload",value:function(){this.isLoaded=!1,console.log("caines-quest -- unload")}}]),e}();r["default"]=c},{"babel-runtime/helpers/classCallCheck":4,"babel-runtime/helpers/createClass":5}],57:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("babel-runtime/helpers/classCallCheck"),o=n(i),a=e("babel-runtime/helpers/createClass"),s=n(a),c=function(){function e(t){(0,o["default"])(this,e),this.domElement=t,this.isLoaded=!1}return(0,s["default"])(e,[{key:"load",value:function(){console.log("edge-of-tomorrow -- load"),this.isLoaded=!0}},{key:"unload",value:function(){this.isLoaded=!1,console.log("edge-of-tomorrow -- unload")}}]),e}();r["default"]=c},{"babel-runtime/helpers/classCallCheck":4,"babel-runtime/helpers/createClass":5}],58:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("babel-runtime/helpers/classCallCheck"),o=n(i),a=e("babel-runtime/helpers/createClass"),s=n(a),c=function(){function e(t){(0,o["default"])(this,e),this.domElement=t,this.isLoaded=!1}return(0,s["default"])(e,[{key:"load",value:function(){console.log("into-the-storm -- load"),this.isLoaded=!0}},{key:"unload",value:function(){this.isLoaded=!1,console.log("into-the-storm -- unload")}}]),e}();r["default"]=c},{"babel-runtime/helpers/classCallCheck":4,"babel-runtime/helpers/createClass":5}],59:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var r=null;switch(e){case"mockingjay":r=new a["default"](t);break;case"mission-impossible":r=new c["default"](t);break;case"into-the-storm":r=new u["default"](t);break;case"magic-mirror":r=new p["default"](t);break;case"caines-quest":r=new d["default"](t);break;case"edge-of-tomorrow":r=new v["default"](t)}return r}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=i;var o=e("./mockingjay"),a=n(o),s=e("./mission-impossible"),c=n(s),h=e("./into-the-storm"),u=n(h),l=e("./magic-mirror"),p=n(l),f=e("./caines-quest"),d=n(f),m=e("./edge-of-tomorrow"),v=n(m)},{"./caines-quest":56,"./edge-of-tomorrow":57,"./into-the-storm":58,"./magic-mirror":60,"./mission-impossible":61,"./mockingjay":62}],60:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("babel-runtime/helpers/classCallCheck"),o=n(i),a=e("babel-runtime/helpers/createClass"),s=n(a),c=function(){function e(t){(0,o["default"])(this,e),this.domElement=t,this.isLoaded=!1}return(0,s["default"])(e,[{key:"load",value:function(){console.log("magic-mirror -- load"),this.isLoaded=!0}},{key:"unload",value:function(){this.isLoaded=!1,console.log("magic-mirror -- unload")}}]),e}();r["default"]=c},{"babel-runtime/helpers/classCallCheck":4,"babel-runtime/helpers/createClass":5}],61:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("babel-runtime/helpers/classCallCheck"),o=n(i),a=e("babel-runtime/helpers/createClass"),s=n(a),c=e("three"),h=n(c),u=function(){function e(t){(0,o["default"])(this,e),this.domElement=t,this.isLoaded=!1}return(0,s["default"])(e,[{key:"load",value:function(){console.log("mission-impossible -- load"),this.scene=new h["default"].Scene,this.camera=new h["default"].PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),this.renderer=new h["default"].WebGLRenderer({alpha:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.domElement.appendChild(this.renderer.domElement);var e=new h["default"].BoxGeometry(1,1,1),t=new h["default"].MeshBasicMaterial({color:255});this.cube=new h["default"].Mesh(e,t),this.scene.add(this.cube),this.camera.position.z=5,this.isLoaded=!0,this.render()}},{key:"render",value:function(){console.log("mission-impossible -- render"),this.isLoaded&&(requestAnimationFrame(this.render.bind(this)),this.cube.rotation.x+=.1,this.cube.rotation.y+=.1,this.renderer.render(this.scene,this.camera))}},{key:"unload",value:function(){this.isLoaded=!1,console.log("mission-impossible -- unload")}}]),e}();r["default"]=u},{"babel-runtime/helpers/classCallCheck":4,"babel-runtime/helpers/createClass":5,three:32}],62:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("babel-runtime/helpers/classCallCheck"),o=n(i),a=e("babel-runtime/helpers/createClass"),s=n(a),c=e("three"),h=n(c),u=function(){function e(t){(0,o["default"])(this,e),this.domElement=t,this.isLoaded=!1}return(0,s["default"])(e,[{key:"load",value:function(){console.log("mockingjay -- load"),this.scene=new h["default"].Scene,this.camera=new h["default"].PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),this.renderer=new h["default"].WebGLRenderer({alpha:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.domElement.appendChild(this.renderer.domElement);var e=new h["default"].BoxGeometry(1,1,1),t=new h["default"].MeshBasicMaterial({color:65280});this.cube=new h["default"].Mesh(e,t),this.scene.add(this.cube),this.camera.position.z=5,this.isLoaded=!0,this.render()}},{key:"render",value:function(){console.log("mockingjay -- render"),this.isLoaded&&(requestAnimationFrame(this.render.bind(this)),this.cube.rotation.x+=.1,this.cube.rotation.y+=.1,this.renderer.render(this.scene,this.camera))}},{key:"unload",value:function(){this.isLoaded=!1,console.log("mockingjay -- unload")}}]),e}();r["default"]=u},{"babel-runtime/helpers/classCallCheck":4,"babel-runtime/helpers/createClass":5,three:32}],63:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("vue"),o=n(i),a=e("vue-router"),s=n(a),c=e("vuex"),h=n(c),u=e("./core/routes");e("es6-promise").polyfill(),o["default"].use(s["default"]),o["default"].use(h["default"]);var l=new s["default"]({history:!1,saveScrollPosition:!0});(0,u.configRouter)(l);var p=o["default"].extend(e("./App.vue"));l.start(p,"#app"),window.router=l},{"./App.vue":44,"./core/routes":46,"es6-promise":26,vue:38,"vue-router":37,vuex:40}],64:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=[{id:"yeoman",src:"assets/images/yeoman.png"}]},{}],65:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("vuex"),o=n(i),a={isOpen:!1},s={open:"OPEN",close:"CLOSE"},c={OPEN:function(e){e.isOpen=!0},CLOSE:function(e){e.isOpen=!1}};r["default"]=new o["default"].Store({state:a,actions:s,mutations:c})},{vuex:40}],66:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("vuex"),o=n(i),a={progress:0,isHidden:!1},s={progressUpdate:"PROGRESS_UPDATE",hide:"HIDE"},c={PROGRESS_UPDATE:function(e,t){e.progress=t},HIDE:function(e){e.isHidden=!0}};r["default"]=new o["default"].Store({state:a,actions:s,mutations:c})},{vuex:40}],67:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("vuex"),o=n(i),a={project:"",isDetailsOpen:!1},s={update:"UPDATE",openDetails:"OPEN_DETAILS",closeDetails:"CLOSE_DETAILS"},c={UPDATE:function(e,t){e.project=t,e.isDetailsOpen=!1},OPEN_DETAILS:function(e){e.isDetailsOpen=!0},CLOSE_DETAILS:function(e){e.isDetailsOpen=!1}};r["default"]=new o["default"].Store({state:a,actions:s,mutations:c})},{vuex:40}]},{},[63]);
